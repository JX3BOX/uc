(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db613d06"],{"2d46":function(t,n,e){"use strict";e.d(n,"q",(function(){return o})),e.d(n,"e",(function(){return s})),e.d(n,"o",(function(){return u})),e.d(n,"p",(function(){return f})),e.d(n,"k",(function(){return h})),e.d(n,"a",(function(){return b})),e.d(n,"i",(function(){return p})),e.d(n,"l",(function(){return g})),e.d(n,"b",(function(){return v})),e.d(n,"r",(function(){return l})),e.d(n,"d",(function(){return m})),e.d(n,"g",(function(){return d})),e.d(n,"h",(function(){return _})),e.d(n,"n",(function(){return C})),e.d(n,"j",(function(){return x})),e.d(n,"s",(function(){return $})),e.d(n,"c",(function(){return y})),e.d(n,"f",(function(){return j})),e.d(n,"m",(function(){return O}));var a=e("41cb"),c=e("bc3a"),r=e.n(c),i=e("65c2");function s(){return Object(a["$cms"])().get("/api/cms/user/my/profile")}function o(t){return Object(a["$cms"])().put("/api/cms/user/my/profile",t)}function u(t){return Object(a["$cms"])().put("/api/cms/user/my/avatar",t)}function l(t){return Object(a["$cms"])().post("/api/cms/upload/avatar",t)}function m(){var t=i["__imgPath"]+"avatar/index.json";return r.a.get(t)}function d(t){return Object(a["$cms"])().get("/api/cms/user/".concat(t,"/info"),{params:{__no_cache:1}})}function f(t){return Object(a["$cms"])().put("/api/cms/user/my/password",t)}function b(t){return Object(a["$cms"])().get("/api/cms/user/account/email/valid",{params:{email:t}})}function p(t){return Object(a["$cms"])().post("/api/cms/user/account/email/bind",t)}function h(t){return Object(a["$cms"])().put("/api/cms/user/account/email/verify",{code:t},{app:"jx3box"})}function v(){return Object(a["$cms"])().get("/api/cms/account/oauth/status")}function g(t){return Object(a["$cms"])({popType:"alert"}).delete("/api/cms/account/oauth/unbind/".concat(t))}function j(){return Object(a["$next"])().get("/api/next2/qqbot/bind-token")}function O(){return Object(a["$next"])().delete("/api/next2/qqbot/bind-token")}function _(){return Object(a["$cms"])().get("/api/cms/wechat/mp/bind")}function C(){return Object(a["$cms"])().get("/api/cms/wechat/mp/unbind")}function x(t){return Object(a["$cms"])().post("/api/cms/account/oauth/phone/bind",t,{app:"jx3box"})}function $(t){return Object(a["$cms"])().put("/api/cms/account/oauth/phone/verify",t,{app:"jx3box"})}function y(t){return Object(a["$cms"])().get("/api/cms/account/oauth/phone/check",{params:t})}},"39dd":function(t,n,e){},"48c0":function(t,n,e){"use strict";var a=function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-dashboard-profile m-profile"},[n("h2",{staticClass:"u-title"},[n("i",{class:t.icon}),t._v(" "+t._s(t.title)+" "),t._t("header")],2),n("tabs",{attrs:{tabs:t.tabList,"msg-change-count":t.msgChangeCount}}),t._t("default")],2)},c=[],r=(e("a9e3"),e("b0c0"),function(){var t=this,n=t._self._c;return n("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":t.changeTab},model:{value:t.active,callback:function(n){t.active=n},expression:"active"}},t._l(t.tabs,(function(e){return n("el-tab-pane",{key:e.name,attrs:{name:e.name}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"u-tab-icon",class:e.icon}),t._v(" "+t._s(e.label)+" "),t.showCount?n("span",{staticClass:"u-count",class:t.count[t.countMap[e.name]]?"is-orange":""},[t._v("("+t._s(t.count[t.countMap[e.name]]||0)+")")]):t._e()])])})),1)}),i=[],s=(e("caad"),e("14d9"),e("c944")),o={name:"",props:{tabs:{type:Array,default:function(){return[]}},msgChangeCount:{type:Number,default:0}},data:function(){return{active:"",countMap:{msg:"message",letter:"letter"},count:{message:0,letter:0}}},watch:{$route:function(){this.active=this.routeName},msgChangeCount:{immediate:!0,handler:function(t){t>0&&(this.count.message=0),t<0&&this.count.message>0&&(this.count.message+=t)}}},computed:{showCount:function(){return["msg","letter"].includes(this.routeName)},routeName:function(){return this.$route.name}},methods:{changeTab:function(){this.$router.push({name:this.active})},loadCount:function(){var t=this;Object(s["b"])().then((function(n){var e,a=(null===(e=n.data)||void 0===e?void 0:e.data)||{};t.count.letter=a.letter||0})),Object(s["c"])().then((function(n){var e;t.count.message=(null===(e=n.data.data)||void 0===e?void 0:e.unread_count)||0}))}},mounted:function(){this.active=this.routeName,this.showCount&&this.loadCount()},components:{}},u=o,l=e("2877"),m=Object(l["a"])(u,r,i,!1,null,null,null),d=m.exports,f=e("5c97"),b={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return f["d"]}},msgChangeCount:{type:Number,default:0}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:d}},p=b,h=(e("dc6f"),Object(l["a"])(p,a,c,!1,null,null,null));n["a"]=h.exports},"5c97":function(t){t.exports=JSON.parse('{"e":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"medal","icon":"el-icon-medal","label":"勋章"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"}],"d":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"notice","icon":"el-icon-message","label":"通知中心"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"},{"name":"auth","icon":"el-icon-s-check","label":"账号认证"}],"b":[{"name":"mall","icon":"el-icon-shopping-bag-1","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-2","label":"系统订单"}],"c":[{"name":"msg","icon":"el-icon-message","label":"通知"},{"name":"letter","icon":"el-icon-chat-dot-square","label":"私信"}],"a":[{"name":"certification","icon":"el-icon-medal","label":"电子证书"},{"name":"holidayCard","icon":"el-icon-sugar","label":"节日贺卡"},{"name":"birthdayCard","icon":"el-icon-present","label":"生日贺卡"}]}')},7886:function(t,n,e){"use strict";e("8a53")},"8a53":function(t,n,e){},c944:function(t,n,e){"use strict";e.d(n,"d",(function(){return c})),e.d(n,"f",(function(){return r})),e.d(n,"e",(function(){return i})),e.d(n,"g",(function(){return s})),e.d(n,"b",(function(){return u})),e.d(n,"a",(function(){return l})),e.d(n,"c",(function(){return o}));var a=e("41cb");function c(t){return Object(a["$next"])().get("/api/next2/userdata/messages",{params:t})}function r(t){return Object(a["$next"])().put("/api/next2/userdata/messages/read/".concat(t))}function i(){return Object(a["$next"])().put("/api/next2/userdata/messages/read")}function s(t){return Object(a["$next"])().delete("/api/next2/userdata/messages/".concat(t))}function o(){return Object(a["$next"])({mute:!0}).get("/api/next2/userdata/messages/unread_total")}function u(){return Object(a["$next"])({mute:!0}).get("/api/letter/unread/count")}function l(t){return Object(a["$next"])().get("/api/next2/comment/item/".concat(t))}},ca63:function(t,n,e){"use strict";e.r(n);e("b0c0");var a=function(){var t=this,n=t._self._c;return n("uc",{staticClass:"m-dashboard-frame m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[n("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[n("div",{staticClass:"m-frame"},[n("div",{staticClass:"m-frame-left"},[n("a",{staticClass:"u-btn el-button el-button--default el-button--mini is-plain",attrs:{href:"/dashboard/avatar",target:"_blank"}},[n("i",{staticClass:"el-icon-picture-outline-round"}),t._v(" 修改头像")]),n("div",{staticClass:"u-avatar-box"},[n("div",{staticClass:"u-avatar"},[n("img",{staticClass:"u-avatar-pic",attrs:{src:t.showAvatar(t.avatar)}}),t.frame?n("i",{staticClass:"u-avatar-frame"},[n("img",{attrs:{src:t.frameUrl(t.frame)}})]):t._e()])])]),n("div",{staticClass:"m-frame-right"},[n("div",{staticClass:"u-theme"},[n("div",{staticClass:"u-frame-list"},[n("div",{staticClass:"u-title"},[n("span",{staticClass:"u-name"},[n("i",{staticClass:"el-icon-collection-tag"}),t._v("头像框")]),n("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=avatar",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),n("div",{staticClass:"u-frame-item"},t._l(t.frameList,(function(e,a){return n("div",{key:a,staticClass:"u-picbox"},[n("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":200}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.desc)),n("br"),t._v(t._s(e.postscript))]),n("div",{staticClass:"u-pic",class:t.setClass(e),on:{click:function(n){return t.setAvatar(e)}}},[e.name?n("el-image",{attrs:{src:t.frameUrl(e.name),fit:"contain"}}):n("div",{staticClass:"u-noFrame"})],1)])],1)})),0)])])])]),n("div",{staticClass:"m-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:t.updateAvatarFrame}},[t._v("确认")]),n("el-button",{on:{click:t.reset}},[t._v("清除所有装扮")])],1)])},c=[],r=e("5530"),i=(e("99af"),e("4de4"),e("7db0"),e("d81d"),e("14d9"),e("e9f5"),e("910d"),e("f665"),e("7d54"),e("ab43"),e("b64b"),e("d3b7"),e("159b"),e("48c0")),s=e("5c97"),o=e("c9d2"),u=e("85e4"),l=e("65c2"),m=e("2d46"),d=e("f6be"),f={name:"frame",props:[],data:function(){return{tabList:s["e"],uid:o["a"].getInfo().uid,frameList:[],framebak:"",framesBak:{},avatar:o["a"].getInfo().avatar_origin,frame:null,frames:{},avatars:[],decoration:null}},computed:{},methods:{reset:function(){this.frame=this.framebak,this.frames=this.framesBak,this.dataProcessing()},frameUrl:function(t){if(t)return l["__imgPath"]+"avatar/images/".concat(t,"/").concat(t,".svg")},showAvatar:function(t){return Object(u["showAvatar"])(t,600)},setClass:function(t){return t.decoration&&t.receive?"receive":t.isHave?t.using?"select":void 0:"noHave"},updateAvatarFrame:function(){var t=this;Object(d["m"])({user_avatar_frame:this.frame}).then((function(n){t.$message({message:"头像框更新成功",type:"success"});var e=t.frameList.map((function(t){return{val:t.name,using:t.using,type:"avatar"}}));Object(d["j"])(e)}))},receiveFrame:function(t){var n=this;Object(d["i"])(this.uid,t).then((function(t){n.$message({message:"领取成功",type:"success"}),n.loadDecoration()}))},setAvatar:function(t){if(t.decoration&&t.receive)this.receiveFrame(t.name);else if(t.isHave){var n=this.frameList,e=n.find((function(t){return 1==t.using}));e&&(e.using=0),1==t.using?t.using=0:t.using=1,this.frame=t.name}},load:function(){var t=this;Object(m["g"])(this.uid).then((function(n){t.frame=n.data.data.user_avatar_frame||"",t.framebak=n.data.data.user_avatar_frame||""})),Object(m["d"])().then((function(n){t.frames=n.data,t.framesBak=n.data,t.loadDecoration()}))},loadDecoration:function(){var t=this;Object(d["b"])().then((function(n){var e=n.data.data,a=["atcard","homebg","sidebar","calendar"],c=e.filter((function(t){return""!=t.type&&-1!=a.indexOf(t.type)}));t.decoration=t.formattingData(c,"val"),t.avatars=e.filter((function(t){return"avatar"==t.type})),t.dataProcessing()}))},formattingData:function(t,n){var e={};return t.forEach((function(t,a){e[t[n]]?e[t[n]].push(t):e[t[n]]=[t]})),e},decorationAather:function(t){var n,e=["atcard","homebg","sidebar","calendar"],a=null===(n=this.decoration[t])||void 0===n?void 0:n.filter((function(t){return""!=t.type&&-1!=e.indexOf(t.type)}));return(null===a||void 0===a?void 0:a.length)>=4},dataProcessing:function(){var t=this,n=this.avatars||[],e=this.frames,a=[{desc:"无边框",name:"",val:"",isHave:1,using:1}],c=[],i=[];Object.keys(e).forEach((function(s,o){var u=Object(r["a"])(Object(r["a"])({},e[s]),{isHave:0,using:0,receive:!1}),l=n.find((function(t){return t.val==s}));l?(u.using=l.using,u.isHave=1,u.using&&(a[0].using=0)):u.decoration&&(u.receive=t.decorationAather(u.name)),u.isHave?a.push(u):u.decoration?c.push(u):i.push(u)})),this.frameList=[].concat(a,c,i)}},mounted:function(){this.load()},components:{uc:i["a"]}},b=f,p=(e("7886"),e("2877")),h=Object(p["a"])(b,a,c,!1,null,null,null);n["default"]=h.exports},dc6f:function(t,n,e){"use strict";e("39dd")},f6be:function(t,n,e){"use strict";e.d(n,"b",(function(){return s})),e.d(n,"j",(function(){return o})),e.d(n,"c",(function(){return u})),e.d(n,"d",(function(){return l})),e.d(n,"i",(function(){return m})),e.d(n,"m",(function(){return d})),e.d(n,"e",(function(){return f})),e.d(n,"g",(function(){return b})),e.d(n,"k",(function(){return p})),e.d(n,"a",(function(){return h})),e.d(n,"h",(function(){return v})),e.d(n,"f",(function(){return g})),e.d(n,"l",(function(){return j}));e("99af");var a=e("41cb"),c=e("bc3a"),r=e.n(c),i=e("65c2");function s(t){return Object(a["$cms"])().get("/api/cms/user/decoration",{params:t})}function o(t){return Object(a["$cms"])().post("/api/cms/user/decoration",t)}function u(){var t=i["__cdn"]+"design/decoration/index.json?".concat(Date.now());return r.a.get(t)}function l(){return r.a.get("".concat(i["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function m(t,n){return Object(a["$cms"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(n,"/for/avatar"))}function d(t){return Object(a["$cms"])().put("/api/cms/user/my/avatar-frame",t)}function f(){return Object(a["$cms"])().get("/api/cms/user/config/honor")}function b(t){return Object(a["$next"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function p(t){return Object(a["$cms"])().put("/api/cms/user/honor/use/".concat(t))}function h(){return Object(a["$cms"])().delete("/api/cms/user/honor/use")}function v(t,n){return Object(a["$next"])({mute:!0}).get("/api/next2/user/"+t+"/medals",{params:n})}function g(t){return Object(a["$cms"])().get("/api/cms/config/medal",{params:t})}function j(t,n,e){return Object(a["$next"])().put("/api/next2/user/".concat(t,"/medals/").concat(n,"/wear/").concat(e))}}}]);