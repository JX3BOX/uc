(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3783a599"],{1856:function(t,i,e){"use strict";e("7f23")},"1a95":function(t,i,e){"use strict";e.d(i,"a",(function(){return a})),e.d(i,"b",(function(){return s}));var n=e("41cb");function a(){return Object(n["$cms"])().get("/api/cms/user/conf")}function s(t){return Object(n["$cms"])().put("/api/cms/user/conf",t)}},3958:function(t,i,e){"use strict";e("a9f8")},"7f23":function(t,i,e){},8357:function(t,i,e){"use strict";e.r(i);e("b0c0"),e("ac1f"),e("841c");var n=function(){var t=this,i=t._self._c;return i("div",{staticClass:"m-dashboard m-dashboard-profile m-dashboard-work m-dashboard-whitelist m-whitelist"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-whitelist-primary"},[t._m(0),i("el-tabs",{on:{"tab-click":t.tabChange},model:{value:t.active,callback:function(i){t.active=i},expression:"active"}},[t.relationNetTypes.length?t._l(t.relationNetTypes,(function(e,n){return i("el-tab-pane",{key:n,attrs:{label:e.name,name:e.relationship_type}},["lover"===t.active&&t.isRelationNet?i("lover",{attrs:{list:t.members,waitList:t.waitList,relationId:t.relationId,"relation-active-name":t.relationActiveName},on:{refresh:t.onRefresh}}):t._e(),t.showOpen?i("div",{staticClass:"m-fun-open"},[i("el-empty",{attrs:{description:"您尚未开启该功能"}}),i("el-button",{attrs:{type:"success"},on:{click:t.onOpen}},[t._v("立即启用")])],1):t._e()],1)})):t._e(),i("el-tab-pane",{attrs:{label:"我的亲友",name:"whitelist"}}),i("el-tab-pane",{attrs:{label:"黑名单",name:"blacklist"}}),i("el-tab-pane",{attrs:{label:"我的关注",name:"myfollow"}}),i("el-tab-pane",{attrs:{label:"我的粉丝",name:"myfans"}})],2),t.isRelationNet?t._e():["whitelist"!==t.active?i("el-input",{staticClass:"m-privacy-search",attrs:{placeholder:"请输入搜索内容",clearable:""},on:{clear:t.handleChange},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.handleChange.apply(null,arguments)}},model:{value:t.keyword,callback:function(i){t.keyword=i},expression:"keyword"}},[i("template",{slot:"prepend"},[t._v("关键词")]),i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleChange},slot:"append"})],2):t._e(),t.list&&t.list.length?i("div",{staticClass:"m-whitelist-list u-list"},t._l(t.list,(function(e,n){return i("div",{key:e.kith_id||e.id,staticClass:"u-item"},[i("a",{staticClass:"u-item-pic",attrs:{href:t.userLink(e),target:"_blank"}},[i("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.getAvatar(e))}})]),i("a",{staticClass:"u-item-name",attrs:{href:t.userLink(e),target:"_blank"}},[t._v(t._s(t.getName(e)))]),"whitelist"===t.active?[e.status?i("span",{staticClass:"u-item-remark"},[t._v("备注："+t._s(e.remark||"无"))]):i("span",{staticClass:"u-item-remark"},[i("i",{staticClass:"el-icon-loading"}),t._v(" 等待确认中... ")])]:t._e(),i("div",{staticClass:"u-item-btns"},["whitelist"===t.active?[i("el-popconfirm",{attrs:{title:"确认删除亲友关系吗？"},on:{confirm:function(i){return t.remove(e.kith_id,n)}}},[i("el-button",{attrs:{slot:"reference",type:"warning",size:"mini",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1),i("el-button",{staticClass:"u-btn-edit",attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(i){return t.edit(e.kith_id,e)}}},[t._v("编辑")])]:[i("el-button",{staticClass:"u-btn-delete",attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(i){return t.removeOther(e)}}},[t._v("移除")])]],2)],2)})),0):t._e(),"whitelist"!==t.active?i("el-pagination",{attrs:{background:"","hide-on-single-page":"","current-page":t.pagination.pageIndex,total:t.pagination.total},on:{"current-change":t.currentChange}}):t._e()]],2),"myfans"===t.active||t.isRelationNet?t._e():i("div",{staticClass:"m-whitelist-sidebar"},[i("div",{staticClass:"u-title"},[i("i",{staticClass:"el-icon-news"}),t._v(" "+t._s(t.sideTitle))]),i("el-input",{staticClass:"u-input",attrs:{placeholder:"输入UID添加","suffix-icon":"el-icon-search"},on:{change:t.search},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.uid,callback:function(i){t.uid=t._n(i)},expression:"uid"}}),t.userdata?i("div",{staticClass:"u-list"},[i("div",{staticClass:"u-item"},[i("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.userdata.user_avatar),alt:t.userdata.display_name}}),i("div",{staticClass:"u-item-info"},[i("span",{staticClass:"u-item-uid"},[t._v("UID："+t._s(t.userdata.ID))]),i("b",{staticClass:"u-item-name"},[t._v(t._s(t.userdata.display_name))])]),t.isNewKith?t._e():i("i",{staticClass:"u-item-exist"},[t._v("已添加")])])]):t._e(),t.isNull?i("div",{staticClass:"u-null"},[i("el-alert",{attrs:{title:"无搜索结果",type:"info","show-icon":"",closable:!1}})],1):t._e(),i("el-button",{staticClass:"u-submit",attrs:{type:"success",disabled:"wihtelist"===t.active&&!t.allowAppend},on:{click:t.add}},[t._v(t._s(t.btnText))])],1)])},a=[function(){var t=this,i=t._self._c;return i("h2",{staticClass:"m-whitelist-title u-title"},[i("i",{staticClass:"el-icon-ship"}),t._v(" 隐私设置")])}],s=e("c14f"),o=e("1da1"),r=(e("99af"),e("4de4"),e("7db0"),e("caad"),e("d81d"),e("14d9"),e("4e82"),e("a434"),e("e9f5"),e("910d"),e("f665"),e("ab43"),e("d3b7"),e("2532"),e("41cb"));function l(){return Object(r["$cms"])().get("/api/cms/user/kith/my")}function c(t){return Object(r["$cms"])().get("/api/cms/user/".concat(t,"/info"))}function u(t){return Object(r["$cms"])().post("/api/cms/user/kith/".concat(t))}function d(t){return Object(r["$cms"])().delete("/api/cms/user/kith/".concat(t))}function f(t,i){return Object(r["$cms"])().put("/api/cms/user/kith/".concat(t),i)}function v(t){return Object(r["$next"])().get("/api/my-userlist/deny",{params:t})}function h(t){return Object(r["$next"])().post("/api/my-userlist/follow/".concat(t))}function m(t){return Object(r["$next"])().post("/api/my-userlist/deny/".concat(t))}function p(t){return Object(r["$next"])().delete("/api/my-userlist/deny/".concat(t))}function y(t){return Object(r["$next"])().get("/api/next2/rss/my-subscribers",{params:t})}function _(t){return Object(r["$next"])().get("/api/next2/rss/list",{params:t})}function g(t){return Object(r["$next"])().delete("/api/next2/rss/my-subscribers/".concat(t))}function b(t,i){return Object(r["$next"])().post("/api/next2/rss/subscribe/author/".concat(t),i)}function w(t){return Object(r["$next"])().delete("/api/next2/rss/subscribe/author/".concat(t))}function k(){return Object(r["$team"])().get("/api/team/relation-net/types")}function C(t){return Object(r["$team"])().post("/api/team/relation-net/item",t)}function L(t){return Object(r["$team"])().get("/api/team/relation-net/members/by-type/".concat(t))}function x(t,i){return Object(r["$team"])().post("/api/team/relation-net/item/".concat(t,"/invite/user/").concat(i))}function $(t){return Object(r["$team"])().delete("/api/team/relation-net/invite/send-list/item/".concat(t))}function O(){return Object(r["$team"])().get("/api/team/relation-net/invite/todo-list")}function N(t,i){return Object(r["$team"])().put("/api/team/relation-net/item/".concat(t,"/invite/deal-with/").concat(i))}function A(t){return Object(r["$team"])().put("/api/team/relation-net/item/".concat(t,"/exit"))}var I=e("1a95"),j=e("c9d2"),T=e("85e4"),R=function(){var t=this,i=t._self._c;return i("div",{staticClass:"m-privacy-lover"},[t.list.length?[i("div",{staticClass:"m-members"},[t.me.id?i("div",{staticClass:"u-item"},[i("a",{staticClass:"u-item-pic",attrs:{href:t.userLink(t.me),target:"_blank"}},[i("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.getAvatar(t.me))}})]),i("a",{staticClass:"u-item-name",attrs:{href:t.userLink(t.me),target:"_blank"}},[t._v(t._s(t.getName(t.me)))])]):t._e(),i("div",{staticClass:"u-div"},[t._m(0),t.myLover.id&&t.myLover.status?[i("div",{staticClass:"u-div-meta"},[t._v(" "+t._s(t.formatTime(t.myLover.updated_at))+" ")]),i("div",{staticClass:"u-div-meta u-div-unbind",on:{click:function(i){return t.onExit(t.myLover)}}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[i("path",{attrs:{d:"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2s-6.3 25.5 4.1 33.7l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L489.3 358.2l90.5-90.5c56.5-56.5 56.5-148 0-204.5-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6 31.5 31.5 31.5 82.5 0 114l-96 96-31.9-25c24.3-53.8 13.5-118.3-29.6-161.4-52.2-52.3-134.5-56.2-191.3-11.7L38.8 5.1zM239 162c30.1-14.9 67.7-9.9 92.8 15.3 20 20 27.5 48.3 21.7 74.5L239 162zm167.6 254.4L220.9 270c-2.1 39.8 12.2 80.1 42.2 110 38.9 38.9 94.4 51 143.6 36.3zm-290-228.5l-56.4 56.4c-56.5 56.5-56.5 148 0 204.5 50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l61.8-61.8-50.6-39.9z"}})]),t._v("解除绑定 ")])]:t._e()],2),i("div",{staticClass:"m-wrapper"},[t.myLover.id?i("div",{staticClass:"u-item"},[i("a",{staticClass:"u-item-pic",attrs:{href:t.userLink(t.myLover),target:"_blank"}},[i("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.getAvatar(t.myLover))}})]),i("a",{staticClass:"u-item-name",attrs:{href:t.userLink(t.myLover),target:"_blank"}},[t._v(t._s(t.getName(t.myLover)))]),i("div",{staticClass:"u-action"},[t.myLover.status?t._e():i("div",{staticClass:"u-item-remark"},[t._m(1),i("el-button",{attrs:{plain:"",type:"info",size:"mini"},on:{click:function(i){return i.stopPropagation(),t.onCancel(t.myLover)}}},[t._v("取消")])],1)])]):i("div",{staticClass:"u-item u-add-item",on:{click:t.toAdd}},[t._m(2),i("div",{staticClass:"u-bind"},[t._v("绑定情缘")])]),t.waitList.length?i("div",{staticClass:"u-pending el-alert el-alert--warning is-light"},[i("div",{staticClass:"u-wait-tip"},[i("i",{staticClass:"el-icon-warning-outline"}),t._v(" 您有 "),i("b",[t._v(t._s(t.waitList.length))]),t._v(" 条情缘申请待处理，"),i("span",{staticClass:"u-pending-btn",on:{click:function(i){return i.stopPropagation(),t.toWait.apply(null,arguments)}}},[t._v("查看")])])]):t._e()])])]:t._e(),t.waitVisible?i("waitList",{attrs:{visible:t.waitVisible,waitList:t.waitList,list:t.list},on:{refresh:t.onEmit,close:function(i){t.waitVisible=!1}}}):t._e(),t.inviteVisible?i("inviteUser",{attrs:{visible:t.inviteVisible,list:t.list,type:"lover",relationId:t.relationId,"relation-active-name":t.relationActiveName},on:{update:t.onRefresh,close:function(i){t.inviteVisible=!1}}}):t._e()],2)},B=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"u-div-icon"},[i("i",{staticClass:"el-icon-connection"})])},function(){var t=this,i=t._self._c;return i("div",{staticClass:"u-pending"},[i("i",{staticClass:"el-icon-time"}),t._v("等待确认中...")])},function(){var t=this,i=t._self._c;return i("div",{staticClass:"u-add"},[i("i",{staticClass:"el-icon-plus"})])}],D=(e("a9e3"),e("c1df")),z=e.n(D),U=function(){var t=this,i=t._self._c;return i("el-dialog",{staticClass:"w-dialog m-invite-user-dialog",attrs:{width:"500",visible:t.show,title:t.title},on:{"update:visible":function(i){t.show=i},close:t.close},scopedSlots:t._u([{key:"footer",fn:function(){return[i("div",{staticClass:"dialog-footer"},[i("div",{staticClass:"m-confirm"},[i("el-button",{on:{click:t.close}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",loading:t.loading,disabled:t.loading},on:{click:t.add}},[t._v(" 提交 ")])],1)])]},proxy:!0}])},[i("div",{staticClass:"m-invite-user"},[i("el-input",{staticClass:"u-input",attrs:{placeholder:"输入UID添加","suffix-icon":"el-icon-search"},on:{change:t.search},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.uid,callback:function(i){t.uid=t._n(i)},expression:"uid"}}),t.userdata?i("div",{staticClass:"u-list"},[i("div",{staticClass:"u-item"},[i("img",{staticClass:"u-avatar",attrs:{src:t._f("showAvatar")(t.userdata.user_avatar),alt:t.userdata.display_name}}),i("div",{staticClass:"u-info"},[i("span",{staticClass:"u-uid"},[t._v("UID："+t._s(t.userdata.ID))]),i("b",{staticClass:"u-name"},[t._v(t._s(t.userdata.display_name))])])])]):t._e(),t.isNull?i("div",{staticClass:"u-null"},[i("el-alert",{attrs:{title:"无搜索结果",type:"info","show-icon":"",closable:!1}})],1):t._e()],1)])},S=[],V=e("2ef0"),M={name:"inviteUser",props:{visible:{type:Boolean,default:!1},relationActiveName:{type:String,default:""},relationId:{type:[String,Number],default:0},list:{type:Array,default:function(){return[]}},type:{type:String,default:"lover"}},emits:["close","update"],data:function(){return{loading:!1,show:!1,uid:"",userdata:"",flag:!1}},computed:{isNull:function(){return this.uid&&!this.userdata&&this.flag},title:function(){return"邀请"+this.relationActiveName},userId:function(){return j["a"].getInfo().uid}},watch:{visible:{immediate:!0,handler:function(t){this.show=t}}},filters:{showAvatar:function(t){return Object(T["showAvatar"])(t,"m")}},methods:{close:function(){this.show=!1,this.$emit("close",!1)},search:function(t){var i=this;t&&!isNaN(t)&&(this.flag=!1,c(t).then((function(t){i.userdata=t.data.data})).finally((function(){i.flag=!0})))},inviteUser:function(){var t=this;this.relationId&&(this.loading=!0,x(this.relationId,this.userdata.ID).then((function(){t.$notify({title:"已发送邀请",type:"success"}),t.$emit("update"),t.close()})).finally((function(){t.loading=!1})))},add:Object(V["throttle"])((function(){var t=this;this.userdata?this.list.length?this.inviteUser():C({relationship_type:this.type}).then((function(){t.inviteUser()})):this.$notify({title:"提示",message:"请先输入UID进行搜索",type:"warning"})}),500)}},q=M,E=(e("3958"),e("2877")),W=Object(E["a"])(q,U,S,!1,null,null,null),P=W.exports,F=function(){var t=this,i=t._self._c;return i("el-dialog",{staticClass:"w-dialog m-wait-list-dialog",attrs:{visible:t.show,title:"待处理列表"},on:{"update:visible":function(i){t.show=i},close:t.close},scopedSlots:t._u([{key:"footer",fn:function(){return[i("div",{staticClass:"dialog-footer"},[i("div",{staticClass:"m-confirm"},[i("el-button",{on:{click:t.close}},[t._v("取消")])],1)])]},proxy:!0}])},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-wait-list"},t._l(t.waitList,(function(e,n){return i("div",{key:n,staticClass:"u-item"},[e.status?t._e():i("div",{staticClass:"u-close",on:{click:function(i){return i.stopPropagation(),t.onReject(e)}}},[i("i",{staticClass:"el-icon-close"})]),i("a",{staticClass:"u-item-pic",attrs:{href:t.userLink(e),target:"_blank"}},[i("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.getAvatar(e))}})]),i("a",{staticClass:"u-item-name",attrs:{href:t.userLink(e),target:"_blank"}},[t._v(t._s(t.getName(e)))]),i("div",{staticClass:"u-action"},[e.status?t._e():i("span",{staticClass:"u-item-remark"},[t.list.length<=1?i("el-button",{attrs:{size:"mini",type:"success",plain:""},on:{click:function(i){return t.onAccept(e)}}},[t._v("接受")]):t._e()],1)])])})),0)])},K=[],Y={name:"inviteUser",props:{visible:{type:Boolean,default:!1},waitList:{type:Array,default:function(){return[]}},list:{type:Array,default:function(){return[]}}},emits:["close","update"],data:function(){return{loading:!1,show:!1}},computed:{},watch:{visible:{immediate:!0,handler:function(t){this.show=t}}},filters:{showAvatar:function(t){return Object(T["showAvatar"])(t,"m")}},methods:{close:function(){this.show=!1,this.$emit("close",!1)},userLink:function(t){var i,e=t.initiator_id||(null===(i=t.creator_info)||void 0===i?void 0:i.id);return Object(T["authorLink"])(e)},getAvatar:function(t){var i,e;return(null===(i=t.user_info)||void 0===i?void 0:i.avatar)||(null===(e=t.creator_info)||void 0===e?void 0:e.avatar)},getName:function(t){var i,e;return(null===(i=t.user_info)||void 0===i?void 0:i.display_name)||(null===(e=t.creator_info)||void 0===e?void 0:e.display_name)},onAccept:function(t){var i=this;this.$confirm("是否接受 ".concat(t.creator_info.display_name," 的邀请，成为ta的情缘？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.loading=!0,N(t.net_id,1).then((function(){i.$notify({title:"接受成功",type:"success"}),i.close(),i.$emit("refresh","loadWaitInvites"),i.$emit("refresh","loadRelationNetMembersByType")})).finally((function(){i.loading=!1}))}))},onReject:function(t){var i=this;this.$confirm("是否拒绝 ".concat(t.creator_info.display_name," 的邀请？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.loading=!0,N(t.net_id,2).then((function(){i.$notify({title:"拒绝成功",type:"success"}),i.$emit("refresh","loadWaitInvites")})).finally((function(){i.loading=!1}))}))}}},H=Y,J=(e("e2e9"),Object(E["a"])(H,F,K,!1,null,null,null)),G=J.exports,Q={name:"Lover",components:{inviteUser:P,waitList:G},emits:["refresh"],props:{list:{type:Array,default:function(){return[]}},waitList:{type:Array,default:function(){return[]}},relationActiveName:{type:String,default:""},relationId:{type:[String,Number],default:0}},data:function(){return{inviteVisible:!1,waitVisible:!1}},computed:{userId:function(){return j["a"].getInfo().uid},me:function(){var t=this;return this.list.find((function(i){return i.user_id==t.userId}))||{}},myLover:function(){var t=this;return this.list.find((function(i){return i.user_id!=t.userId}))||{}}},watch:{list:{deep:!0,handler:function(t){t.length||this.loadConf()}}},mounted:function(){},methods:{toWait:function(){this.waitList.length&&(this.waitVisible=!0)},formatTime:function(t){return z()(t).format("YYYY-MM-DD HH:mm:ss")},toAdd:function(){this.inviteVisible=!0},onEmit:function(t){this.$emit("refresh",t)},onRefresh:function(){this.$emit("refresh","loadRelationNetMembersByType")},userLink:function(t){var i,e=t.user_id||(null===(i=t.creator_info)||void 0===i?void 0:i.id);return Object(T["authorLink"])(e)},getAvatar:function(t){var i,e;return(null===(i=t.user_info)||void 0===i?void 0:i.avatar)||(null===(e=t.creator_info)||void 0===e?void 0:e.avatar)},getName:function(t){var i,e;return(null===(i=t.user_info)||void 0===i?void 0:i.display_name)||(null===(e=t.creator_info)||void 0===e?void 0:e.display_name)},onExit:function(t){var i,e=this;this.$confirm("是否和 ".concat(null===(i=t.user_info)||void 0===i?void 0:i.display_name," 解除情缘绑定？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,A(t.net_id).then((function(){e.$notify({title:"解除成功",type:"success"}),e.onRefresh()})).finally((function(){e.loading=!1}))}))},onCancel:function(t){var i=this;this.loading=!0,$(t.id).then((function(t){i.$notify({title:"取消成功",type:"success"}),i.onRefresh()})).finally((function(){i.loading=!1}))}},filters:{showAvatar:function(t){return Object(T["showAvatar"])(t,"m")},authorLink:T["authorLink"]}},X=Q,Z=(e("1856"),Object(E["a"])(X,R,B,!1,null,null,null)),tt=Z.exports,it={name:"privacy",components:{lover:tt},props:[],data:function(){return{list:[],loading:!1,uid:"",userdata:"",flag:!1,limit_map:{member:5,vip:20,pro:100},identity:"member",active:"lover",keyword:"",pagination:{pageIndex:1,pageSize:10,total:0},relationNetTypes:[],net:{},members:[],waitList:[],inviteVisible:!1,isAllowLover:!1}},computed:{isRelationNet:function(){var t=this;return this.relationNetTypes.find((function(i){return i.relationship_type===t.active}))},relationActiveName:function(){var t,i=this;return null===(t=this.relationNetTypes.find((function(t){return t.relationship_type===i.active})))||void 0===t?void 0:t.name},relationId:function(){var t;return(null===(t=this.net)||void 0===t?void 0:t.id)||0},allowAppend:function(){return this.userdata&&this.total<this.limit&&this.isNewKith},isNewKith:function(){var t,i=null===(t=this.userdata)||void 0===t?void 0:t.ID;return!this.currentIdList.includes(i)},currentIdList:function(){return this.list.map((function(t){return t.kith_id}))},limit:function(){return this.limit_map[this.identity]||5},total:function(){var t;return null===(t=this.list)||void 0===t?void 0:t.length},isNull:function(){return this.uid&&!this.userdata&&this.flag},fns:function(){return{blacklist:v,myfans:y}},removeFns:function(){return{blacklist:p,myfollow:w,myfans:g}},addFns:function(){return{blacklist:m,myfollow:h,whitelist:u}},btnText:function(){return this.isRelationNet?"添加":{blacklist:"拉黑",myfollow:"关注",whitelist:"添加亲友 (".concat(this.total," / ").concat(this.limit,")")}[this.active]},sideTitle:function(){return this.isRelationNet?this.relationActiveName:{blacklist:"添加黑名单",myfollow:"添加关注",whitelist:"添加亲友"}[this.active]},userId:function(){return j["a"].getInfo().uid},showOpen:function(){return"lover"==this.active&&!this.isAllowLover}},methods:{onOpen:function(){var t=this;this.$confirm("是否立即启用？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(I["b"])({accept_lover_request:1}).then((function(){t.$notify({title:"开启成功",type:"success"}),t.isAllowLover=!0,t.loadRelationNetMembersByType()}))}))},loadConf:function(){var t=this;Object(I["a"])().then((function(i){var e,n;t.isAllowLover=!(null===i||void 0===i||null===(e=i.data)||void 0===e||null===(n=e.data)||void 0===n||!n.accept_lover_request),t.isAllowLover&&t.loadRelationNetMembersByType()}))},onRefresh:function(t){null===this||void 0===this||this[t]()},loadRelationNetTypes:function(){var t=this;return Object(o["a"])(Object(s["a"])().m((function i(){return Object(s["a"])().w((function(i){while(1)switch(i.n){case 0:return i.n=1,k().then((function(i){var e;t.relationNetTypes=null===(e=i.data.data)||void 0===e?void 0:e.filter((function(t){return t.is_official&&t.is_only_one}))}));case 1:return i.a(2,i.v)}}),i)})))()},handleChange:function(){this.pagination.pageIndex=1,this.loadList()},loadRelationNetMembersByType:function(){var t=this,i=this.active;this.loading=!0,L(i).then((function(i){var e,n;t.members=(null===(e=i.data.data)||void 0===e?void 0:e.members)||[],t.net=(null===(n=i.data.data)||void 0===n?void 0:n.net)||{}})).finally((function(){t.loading=!1}))},loadWaitInvites:function(){var t=this;this.loading=!0,O().then((function(i){var e,n,a;t.waitList=(null===(e=i.data)||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.list)||void 0===a?void 0:a.filter((function(i){var e;return(null===(e=i.net)||void 0===e?void 0:e.relationship_type)===t.active})))||[]})).finally((function(){t.loading=!1}))},tabChange:function(){var t=this;if(this.relationNetTypes.find((function(i){return i.relationship_type===t.active})))return"lover"==this.active?this.loadConf():this.loadRelationNetMembersByType(),void this.$router.push({name:"privacy",query:{tab:this.active}});this.keyword=this.$route.query.keyword||"",this.pagination.pageIndex=1,this.loadList()},currentChange:function(t){this.pagination.pageIndex=t,this.loadList()},search:function(t){var i=this;t&&!isNaN(t)&&(this.flag=!1,c(t).then((function(t){i.userdata=t.data.data})).finally((function(){i.flag=!0})))},add:function(){var t=this;this.userdata?"myfollow"===this.active?b(this.userdata.ID,{title:this.userdata.display_name}).then((function(i){t.loadList()})):this.addFns[this.active](this.userdata.ID).then((function(i){t.loadList()})):this.$notify({title:"提示",message:"请先输入UID进行搜索",type:"warning"})},addKith:function(){var t=this;this.allowAppend&&u(this.uid).then((function(){t.$notify({title:"成功",message:"添加成功",type:"success"}),t.list.push({kith_id:t.uid,level:0,status:0,kith_info:t.userdata})}))},follow:function(){var t=this;h(this.userdata.ID).then((function(){t.$notify({title:"成功",message:"关注成功",type:"success"}),t.loadList()}))},deny:function(){var t=this;m(this.userdata.ID).then((function(){t.$notify({title:"成功",message:"拉黑成功",type:"success"}),t.loadList()}))},loadList:function(){var t=this;if(this.loading=!0,this.$router.push({name:"privacy",query:{tab:this.active}}),"whitelist"===this.active)l().then((function(i){var e=i.data.data;e=e.sort((function(t,i){return i.level-t.level})),t.list=e})).finally((function(){t.loading=!1}));else if("myfollow"===this.active){var i={index:this.pagination.pageIndex,pageSize:this.pagination.pageSize,q:this.keyword,category:2};_(i).then((function(i){t.list=i.data.data.list||[],t.pagination.total=i.data.data.page.total})).finally((function(){t.loading=!1}))}else{var e={pageIndex:this.pagination.pageIndex,pageSize:this.pagination.pageSize,display_name:this.keyword};this.fns[this.active](e).then((function(i){t.list=i.data.data.list||[],t.pagination.total=i.data.data.page.total})).finally((function(){t.loading=!1}))}},remove:function(t,i){var e=this;d(t).then((function(){e.$notify({title:"成功",message:"删除成功",type:"success"}),e.list.splice(i,1)}))},edit:function(t,i){var e=this;this.$prompt("请输入备注","设置",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(n){var a=n.value;f(t,{remark:a}).then((function(){e.$notify({title:"成功",message:"编辑成功",type:"success"}),i.remark=a}))}))},removeOther:function(t){var i=this,e={blacklist:"确认解除对该用户的屏蔽？",myfollow:"确认不再订阅该用户？",myfans:"确认要移除粉丝？"};this.$confirm(e[this.active],"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){var e="";e="whitelist"===i.active?t.kith_id:"myfans"===i.active?t.user_id:"blacklist"===i.active?t.bind_user_id:t.author_id,i.removeFns[i.active](e).then((function(){i.$notify({title:"成功",message:"操作成功",type:"success"}),i.loadList()}))})).finally((function(){}))},userLink:function(t){var i="";return i="whitelist"===this.active?t.kith_id:"myfans"===this.active?t.user_id:"blacklist"===this.active?t.bind_user_id:t.author_id,Object(T["authorLink"])(i)},getAvatar:function(t){var i,e;return"myfans"==this.active?null===(i=t.user_info)||void 0===i?void 0:i.avatar:"myfollow"==this.active?null===(e=t.author_info)||void 0===e?void 0:e.avatar:(t.kith_info||t).user_avatar},getName:function(t){var i,e;return"myfans"==this.active?null===(i=t.user_info)||void 0===i?void 0:i.display_name:"myfollow"==this.active?null===(e=t.author_info)||void 0===e?void 0:e.display_name:(t.kith_info||t).display_name}},mounted:function(){var t=this;this.loadRelationNetTypes().then((function(){var i=t.$route.query.tab,e=t.relationNetTypes;e.length&&!i&&(i=e[0].relationship_type),i&&e.find((function(t){return t.relationship_type===i}))?(t.active=i,"lover"==t.active?t.loadConf():t.loadRelationNetMembersByType(),t.loadWaitInvites()):(t.active=i||"whitelist",t.loadList())})),j["a"].getAsset().then((function(i){j["a"]._isPRO(i)?t.identity="pro":j["a"]._isVIP(i)?t.identity="vip":t.identity="member"}))},filters:{showAvatar:function(t){return Object(T["showAvatar"])(t,"m")},authorLink:T["authorLink"]}},et=it,nt=(e("d97c"),Object(E["a"])(et,n,a,!1,null,"094cfc07",null));i["default"]=nt.exports},9021:function(t,i,e){},a9f8:function(t,i,e){},d97c:function(t,i,e){"use strict";e("9021")},ddf8:function(t,i,e){},e2e9:function(t,i,e){"use strict";e("ddf8")}}]);