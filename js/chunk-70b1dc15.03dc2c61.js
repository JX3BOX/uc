(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70b1dc15"],{"0fb9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("uc",{attrs:{icon:"el-icon-shopping-bag-1",title:"订单中心",tabList:t.tabList}},[e("div",{staticClass:"m-dashboard m-dashboard-work m-dashboard-orders"},[e("div",{staticClass:"m-dashboard-orders-cont"},[t.list&&t.list.length?e("div",{staticClass:"m-mall-list"},[e("table",[e("thead",[e("th",[t._v("兑换时间")]),e("th",[t._v("兑换商品")]),e("th",[t._v("订单号")]),e("th",[t._v("数量")]),e("th",[t._v("订单状态")]),e("th",[t._v("付款状态")]),e("th",[t._v("是否为赠送")]),e("th",[t._v("操作")])]),e("tbody",t._l(t.list,(function(n,a){return e("tr",{key:a},[e("td",[t._v(t._s(n.order.created_at))]),e("td",[e("span",{staticClass:"u-title",on:{click:function(e){return t.showDetail(n)}}},[e("i",{staticClass:"el-icon-link"}),t._v(t._s(n.goods.title))])]),e("td",[t._v(t._s(n.order.order_no))]),e("td",[t._v(t._s(n.order.goods_num))]),e("td",[t._v(t._s(t.orderStatus[n.order.order_status]))]),e("td",[t._v(t._s(t.payStatus[n.order.pay_status]))]),e("td",[t._v(t._s(n.order.is_vitural_gift_order?"是":"否"))]),e("td",[e("div",{staticClass:"u-op"},[t.showPay(n.order)?e("el-tooltip",{attrs:{effect:"dark",content:"点击支付",placement:"top"}},[e("el-button",{attrs:{link:"",size:"mini",type:"success",plain:"",icon:"el-icon-wallet",circle:""},on:{click:function(e){return t.toPay(n)}}})],1):t._e(),3==n.order.order_status?[e("el-tooltip",{attrs:{effect:"dark",content:"确认收货",placement:"top"}},[e("el-button",{attrs:{link:"",size:"mini",plain:"",icon:"el-icon-circle-check",circle:""},on:{click:function(e){return t.isReceipt(n.order.id)}}})],1)]:t._e(),0==n.order.order_status?e("el-tooltip",{attrs:{effect:"dark",content:"取消订单",placement:"top"}},[e("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info",title:"确定取消吗？"},on:{confirm:function(e){return t.cancel(n.order.id)}}},[e("el-button",{attrs:{slot:"reference",size:"mini",type:"info",plain:"",icon:"el-icon-circle-close",circle:""},slot:"reference"})],1)],1):t._e(),4==n.order.order_status?[e("el-tooltip",{attrs:{effect:"dark",content:"评价商品",placement:"top"}},[e("el-button",{attrs:{icon:"el-icon-chat-dot-square",size:"mini",plain:"",circle:""},on:{click:function(e){return t.handleShow("comment",n.order.id)}}})],1)]:t._e()],2)])])})),0)]),e("div",{staticClass:"m-mall-pages"},[e("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,jumper","page-size":t.pageSize,total:t.total,"current-page":t.pageIndex},on:{"update:currentPage":function(e){t.pageIndex=e},"update:current-page":function(e){t.pageIndex=e}}})],1)]):e("div",{staticClass:"m-mall-null"},[e("el-alert",{attrs:{title:"还有任何订单记录",type:"info","show-icon":""}})],1)])]),e("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("GoodComment",{attrs:{order_id:t.order_id,type:t.type},on:{close:t.handleClose}})],1)],1)},o=[],r=(n("d81d"),n("14d9"),n("e9f5"),n("ab43"),n("d3b7"),n("48c0")),i=function(){var t=this,e=t._self._c;return e("el-form",{ref:"form",staticClass:"m-goods-comment",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"商品评价",prop:"rate"}},[e("el-rate",{attrs:{max:3},model:{value:t.form.rate,callback:function(e){t.$set(t.form,"rate",e)},expression:"form.rate"}})],1),e("el-form-item",{attrs:{label:"物流评价",prop:"express_rate"}},[e("el-rate",{attrs:{max:3},model:{value:t.form.express_rate,callback:function(e){t.$set(t.form,"express_rate",e)},expression:"form.express_rate"}})],1),e("el-form-item",{attrs:{label:"评价内容",prop:"comment"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.form.comment,callback:function(e){t.$set(t.form,"comment",e)},expression:"form.comment"}})],1),e("el-form-item",{attrs:{label:"是否匿名",prop:"is_anonymous"}},[e("el-switch",{model:{value:t.form.is_anonymous,callback:function(e){t.$set(t.form,"is_anonymous",e)},expression:"form.is_anonymous"}})],1),e("div",{staticClass:"m-button"},[e("el-button",{on:{click:function(e){return t.close("form")}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("确定")])],1)],1)},s=[],c=n("244d"),l={name:"goodComment",props:["order_id"],data:function(){return{form:{rate:3,express_rate:3,comment:"",is_anonymous:!0,order_id:this.order_id},rules:{comment:{required:!0,message:"请填写评价内容",trigger:"blur"}}}},methods:{close:function(t){this.$emit("close",t)},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){t&&Object(c["k"])(e.form).then((function(){e.$message({message:"评价成功",type:"success"}),e.close(e.order_id)}))}))}}},u=l,d=(n("6519"),n("2877")),m=Object(d["a"])(u,i,s,!1,null,null,null),p=m.exports,f=n("8907"),b=n("5c97"),h={name:"mall",components:{uc:r["a"],GoodComment:p},data:function(){return{list:[],total:0,pageIndex:1,pageSize:10,payStatus:f["b"],orderStatus:f["a"],order_id:"",tabList:b["b"],dialogVisible:!1,type:""}},computed:{params:function(){var t={pageIndex:this.pageIndex,pageSize:this.pageSize};return t},params_pageIndex:function(){return this.$route.params.pageIndex},title:function(){var t={comment:"商品评价",append:"追加评价"};return t[this.type]||""}},watch:{params:{deep:!0,handler:function(){this.load()}},params_pageIndex:{immediate:!0,handler:function(t){t&&(this.pageIndex=t)}}},methods:{load:function(){var t=this;Object(c["h"])(this.params).then((function(e){t.list=e.data.data.list,t.total=e.data.data.page.total}))},showPay:function(t){var e=t.order_status,n=t.pay_status;return 1!=e&&2!=e&&7!=e&&0==n},showDetail:function(t){var e=t.order;this.$router.push({name:"order-detail",params:{id:e.id,pageIndex:this.pageIndex}})},cancel:function(t){var e=this;Object(c["c"])(t).then((function(){e.$message({message:"关闭订单成功",type:"success"}),e.list=e.list.map((function(e){return e.order.id==t&&(e.order.order_status=1),e}))}))},toPay:function(t){var e=this,n=t.order.id;Object(c["m"])(n).then((function(){e.$message({message:"付款成功",type:"success"}),e.list=e.list.map((function(t){return t.order.id==n&&(t.order.pay_status=1),t}))}))},isReceipt:function(t){var e=this;Object(c["l"])(t).then((function(){e.$message({message:"收货成功",type:"success"}),e.list=e.list.map((function(e){return e.order.id==t&&(e.order.order_status=4),e}))}))},handleShow:function(t,e){this.type=t,this.order_id=e,this.dialogVisible=!0},handleClose:function(t){this.dialogVisible=!1,this.order_id="",this.type="",t&&(this.list=this.list.map((function(e){return e.order.id==t&&(e.order.order_status=5),e})))}},mounted:function(){this.load()}},g=h,_=(n("728a"),Object(d["a"])(g,a,o,!1,null,"8b1b243a",null));e["default"]=_.exports},"244d":function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"n",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"o",(function(){return u})),n.d(e,"p",(function(){return d})),n.d(e,"i",(function(){return m})),n.d(e,"c",(function(){return p})),n.d(e,"m",(function(){return f})),n.d(e,"j",(function(){return h})),n.d(e,"l",(function(){return b})),n.d(e,"k",(function(){return g})),n.d(e,"b",(function(){return _})),n.d(e,"f",(function(){return v}));n("99af");var a=n("41cb");function o(t){return Object(a["$pay"])().get("/api/mall/ship-address",t)}function r(t){return Object(a["$pay"])().post("/api/mall/ship-address",t)}function i(t,e){return Object(a["$pay"])().put("/api/mall/ship-address/".concat(t),e)}function s(t){return Object(a["$pay"])().delete("/api/mall/ship-address/".concat(t))}function c(t){return Object(a["$pay"])().put("/api/mall/ship-address/default/".concat(t))}function l(t){return Object(a["$pay"])().get("/api/mall/my/orders",{params:t})}function u(t,e){return Object(a["$pay"])().put("/api/mall/my/orders/".concat(t,"/bind-address/").concat(e))}function d(t,e){return Object(a["$pay"])().put("/api/mall/my/orders/".concat(t,"/remark"),{remark:e})}function m(t){return Object(a["$pay"])().get("/api/mall/my/orders/".concat(t))}function p(t){return Object(a["$pay"])().put("/api/mall/my/orders/".concat(t,"/cancel"))}function f(t){return Object(a["$pay"])().post("/api/mall/my/orders/".concat(t,"/pay"))}function b(t){return Object(a["$pay"])().post("/api/mall/my/orders/".concat(t,"/received"))}function h(t){return Object(a["$pay"])().get("/api/mall/my/virtual_goods",{params:t})}function g(t){return Object(a["$pay"])().post("/api/mall/goods-rate",t)}function _(t,e){return Object(a["$pay"])().post("/api/mall/goods-rate/".concat(t,"/append-comments"),e)}function v(t){return Object(a["$pay"])().delete("/api/mall/goods-rate/".concat(t))}},"39dd":function(t,e,n){},"48c0":function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-dashboard-profile m-profile"},[e("h2",{staticClass:"u-title"},[e("i",{class:t.icon}),t._v(" "+t._s(t.title)+" "),t._t("header")],2),e("tabs",{attrs:{tabs:t.tabList,"msg-change-count":t.msgChangeCount}}),t._t("default")],2)},o=[],r=(n("a9e3"),n("b0c0"),function(){var t=this,e=t._self._c;return e("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabs,(function(n){return e("el-tab-pane",{key:n.name,attrs:{name:n.name}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"u-tab-icon",class:n.icon}),t._v(" "+t._s(n.label)+" "),t.showCount?e("span",{staticClass:"u-count",class:t.count[t.countMap[n.name]]?"is-orange":""},[t._v("("+t._s(t.count[t.countMap[n.name]]||0)+")")]):t._e()])])})),1)}),i=[],s=(n("caad"),n("14d9"),n("c944")),c={name:"",props:{tabs:{type:Array,default:function(){return[]}},msgChangeCount:{type:Number,default:0}},data:function(){return{active:"",countMap:{msg:"message",letter:"letter"},count:{message:0,letter:0}}},watch:{$route:function(){this.active=this.routeName},msgChangeCount:{immediate:!0,handler:function(t){t>0&&(this.count.message=0),t<0&&this.count.message>0&&(this.count.message+=t)}}},computed:{showCount:function(){return["msg","letter"].includes(this.routeName)},routeName:function(){return this.$route.name}},methods:{changeTab:function(){this.$router.push({name:this.active})},loadCount:function(){var t=this;Object(s["b"])().then((function(e){var n,a=(null===(n=e.data)||void 0===n?void 0:n.data)||{};t.count.letter=a.letter||0})),Object(s["c"])().then((function(e){var n;t.count.message=(null===(n=e.data.data)||void 0===n?void 0:n.unread_count)||0}))}},mounted:function(){this.active=this.routeName,this.showCount&&this.loadCount()},components:{}},l=c,u=n("2877"),d=Object(u["a"])(l,r,i,!1,null,null,null),m=d.exports,p=n("5c97"),f={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return p["d"]}},msgChangeCount:{type:Number,default:0}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:m}},b=f,h=(n("dc6f"),Object(u["a"])(b,a,o,!1,null,null,null));e["a"]=h.exports},"5c97":function(t){t.exports=JSON.parse('{"e":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"}],"d":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"notice","icon":"el-icon-message","label":"通知中心"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"},{"name":"auth","icon":"el-icon-s-check","label":"账号认证"}],"b":[{"name":"mall","icon":"el-icon-shopping-bag-1","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-2","label":"系统订单"}],"c":[{"name":"msg","icon":"el-icon-message","label":"通知"},{"name":"letter","icon":"el-icon-chat-dot-square","label":"私信"}],"a":[{"name":"certification","icon":"el-icon-medal","label":"电子证书"},{"name":"holidayCard","icon":"el-icon-sugar","label":"节日贺卡"},{"name":"birthdayCard","icon":"el-icon-present","label":"生日贺卡"},{"name":"medal","icon":"el-icon-medal","label":"勋章"}]}')},6519:function(t,e,n){"use strict";n("98b7")},"728a":function(t,e,n){"use strict";n("ae5b")},8907:function(t){t.exports=JSON.parse('{"b":{"0":"未支付","1":"已支付","2":"已退款"},"a":{"0":"未发货","1":"取消订单","2":"订单关闭","3":"已发货","4":"确认收货","5":"已评价","6":"退货退款","7":"等待退款","8":"已追评","9":"系统回复"}}')},"98b7":function(t,e,n){},ae5b:function(t,e,n){},c944:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"f",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return c}));var a=n("41cb");function o(t){return Object(a["$next"])().get("/api/next2/userdata/messages",{params:t})}function r(t){return Object(a["$next"])().put("/api/next2/userdata/messages/read/".concat(t))}function i(){return Object(a["$next"])().put("/api/next2/userdata/messages/read")}function s(t){return Object(a["$next"])().delete("/api/next2/userdata/messages/".concat(t))}function c(){return Object(a["$next"])({mute:!0}).get("/api/next2/userdata/messages/unread_total")}function l(){return Object(a["$next"])({mute:!0}).get("/api/letter/unread/count")}function u(t){return Object(a["$next"])().get("/api/next2/comment/item/".concat(t))}},dc6f:function(t,e,n){"use strict";n("39dd")}}]);