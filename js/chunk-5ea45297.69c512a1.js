(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ea45297"],{"1a95":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var n=i("41cb");function a(){return Object(n["$cms"])().get("/api/cms/user/conf")}function s(t){return Object(n["$cms"])().put("/api/cms/user/conf",t)}},"5f9b":function(t,e,i){},"797a":function(t,e,i){},8357:function(t,e,i){"use strict";i.r(e);i("b0c0"),i("ac1f"),i("841c");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-dashboard m-dashboard-profile m-dashboard-work m-dashboard-whitelist m-whitelist"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-whitelist-primary"},[t._m(0),e("el-tabs",{on:{"tab-click":t.tabChange},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t.relationNetTypes.length?t._l(t.relationNetTypes,(function(i,n){return e("el-tab-pane",{key:n,attrs:{label:i.name,name:i.relationship_type}},["lover"===t.active&&t.isRelationNet?e("lover",{attrs:{list:t.members,waitList:t.waitList,relationId:t.relationId,"relation-active-name":t.relationActiveName},on:{refresh:t.onRefresh}}):t._e()],1)})):t._e(),e("el-tab-pane",{attrs:{label:"我的亲友",name:"whitelist"}}),e("el-tab-pane",{attrs:{label:"黑名单",name:"blacklist"}}),e("el-tab-pane",{attrs:{label:"我的关注",name:"myfollow"}}),e("el-tab-pane",{attrs:{label:"我的粉丝",name:"myfans"}})],2),t.isRelationNet?t._e():["whitelist"!==t.active?e("el-input",{staticClass:"m-privacy-search",attrs:{placeholder:"请输入搜索内容",clearable:""},on:{clear:t.handleChange},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleChange.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[e("template",{slot:"prepend"},[t._v("关键词")]),e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleChange},slot:"append"})],2):t._e(),t.list&&t.list.length?e("div",{staticClass:"m-whitelist-list u-list"},t._l(t.list,(function(i,n){return e("div",{key:i.kith_id||i.id,staticClass:"u-item"},[e("a",{staticClass:"u-item-pic",attrs:{href:t.userLink(i),target:"_blank"}},[e("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.getAvatar(i))}})]),e("a",{staticClass:"u-item-name",attrs:{href:t.userLink(i),target:"_blank"}},[t._v(t._s(t.getName(i)))]),"whitelist"===t.active?[i.status?e("span",{staticClass:"u-item-remark"},[t._v("备注："+t._s(i.remark||"无"))]):e("span",{staticClass:"u-item-remark"},[e("i",{staticClass:"el-icon-loading"}),t._v(" 等待确认中... ")])]:t._e(),e("div",{staticClass:"u-item-btns"},["whitelist"===t.active?[e("el-popconfirm",{attrs:{title:"确认删除亲友关系吗？"},on:{confirm:function(e){return t.remove(i.kith_id,n)}}},[e("el-button",{attrs:{slot:"reference",type:"warning",size:"mini",icon:"el-icon-delete"},slot:"reference"},[t._v("删除")])],1),e("el-button",{staticClass:"u-btn-edit",attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.edit(i.kith_id,i)}}},[t._v("编辑")])]:[e("el-button",{staticClass:"u-btn-delete",attrs:{size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeOther(i)}}},[t._v("移除")])]],2)],2)})),0):t._e(),"whitelist"!==t.active?e("el-pagination",{attrs:{background:"","hide-on-single-page":"","current-page":t.pagination.pageIndex,total:t.pagination.total},on:{"current-change":t.currentChange}}):t._e()]],2),"myfans"===t.active||t.isRelationNet?t._e():e("div",{staticClass:"m-whitelist-sidebar"},[e("div",{staticClass:"u-title"},[e("i",{staticClass:"el-icon-news"}),t._v(" "+t._s(t.sideTitle))]),e("el-input",{staticClass:"u-input",attrs:{placeholder:"输入UID添加","suffix-icon":"el-icon-search"},on:{change:t.search},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.uid,callback:function(e){t.uid=t._n(e)},expression:"uid"}}),t.userdata?e("div",{staticClass:"u-list"},[e("div",{staticClass:"u-item"},[e("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.userdata.user_avatar),alt:t.userdata.display_name}}),e("div",{staticClass:"u-item-info"},[e("span",{staticClass:"u-item-uid"},[t._v("UID："+t._s(t.userdata.ID))]),e("b",{staticClass:"u-item-name"},[t._v(t._s(t.userdata.display_name))])]),t.isNewKith?t._e():e("i",{staticClass:"u-item-exist"},[t._v("已添加")])])]):t._e(),t.isNull?e("div",{staticClass:"u-null"},[e("el-alert",{attrs:{title:"无搜索结果",type:"info","show-icon":"",closable:!1}})],1):t._e(),e("el-button",{staticClass:"u-submit",attrs:{type:"success",disabled:"wihtelist"===t.active&&!t.allowAppend},on:{click:t.add}},[t._v(t._s(t.btnText))])],1)])},a=[function(){var t=this,e=t._self._c;return e("h2",{staticClass:"m-whitelist-title u-title"},[e("i",{staticClass:"el-icon-ship"}),t._v(" 隐私设置")])}],s=i("c14f"),o=i("1da1"),r=(i("99af"),i("4de4"),i("7db0"),i("caad"),i("d81d"),i("14d9"),i("4e82"),i("a434"),i("e9f5"),i("910d"),i("f665"),i("ab43"),i("d3b7"),i("2532"),i("41cb"));function l(){return Object(r["$cms"])().get("/api/cms/user/kith/my")}function c(t){return Object(r["$cms"])().get("/api/cms/user/".concat(t,"/info"))}function u(t){return Object(r["$cms"])().post("/api/cms/user/kith/".concat(t))}function d(t){return Object(r["$cms"])().delete("/api/cms/user/kith/".concat(t))}function f(t,e){return Object(r["$cms"])().put("/api/cms/user/kith/".concat(t),e)}function h(t){return Object(r["$next"])().get("/api/my-userlist/deny",{params:t})}function v(t){return Object(r["$next"])().post("/api/my-userlist/follow/".concat(t))}function m(t){return Object(r["$next"])().post("/api/my-userlist/deny/".concat(t))}function p(t){return Object(r["$next"])().delete("/api/my-userlist/deny/".concat(t))}function y(t){return Object(r["$next"])().get("/api/next2/rss/my-subscribers",{params:t})}function b(t){return Object(r["$next"])().get("/api/next2/rss/list",{params:t})}function g(t){return Object(r["$next"])().delete("/api/next2/rss/my-subscribers/".concat(t))}function _(t,e){return Object(r["$next"])().post("/api/next2/rss/subscribe/author/".concat(t),e)}function w(t){return Object(r["$next"])().delete("/api/next2/rss/subscribe/author/".concat(t))}function k(){return Object(r["$team"])().get("/api/team/relation-net/types")}function C(t){return Object(r["$team"])().post("/api/team/relation-net/item",t)}function x(t){return Object(r["$team"])().get("/api/team/relation-net/members/by-type/".concat(t))}function O(t,e){return Object(r["$team"])().post("/api/team/relation-net/item/".concat(t,"/invite/user/").concat(e))}function $(t){return Object(r["$team"])().delete("/api/team/relation-net/invite/send-list/item/".concat(t))}function L(){return Object(r["$team"])().get("/api/team/relation-net/invite/todo-list")}function N(t,e){return Object(r["$team"])().put("/api/team/relation-net/item/".concat(t,"/invite/deal-with/").concat(e))}function I(t){return Object(r["$team"])().put("/api/team/relation-net/item/".concat(t,"/exit"))}var j=i("c9d2"),A=i("85e4"),T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-privacy-lover"},[t.list.length?[e("div",{staticClass:"m-members"},[t.me.id?e("div",{staticClass:"u-item"},[e("a",{staticClass:"u-item-pic",attrs:{href:t.userLink(t.me),target:"_blank"}},[e("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.getAvatar(t.me))}})]),e("a",{staticClass:"u-item-name",attrs:{href:t.userLink(t.me),target:"_blank"}},[t._v(t._s(t.getName(t.me)))])]):t._e(),t.myLover.id?[t._m(0),e("div",{staticClass:"m-wrapper"},[e("div",{staticClass:"u-item"},[e("a",{staticClass:"u-item-pic",attrs:{href:t.userLink(t.myLover),target:"_blank"}},[e("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.getAvatar(t.myLover))}})]),e("a",{staticClass:"u-item-name",attrs:{href:t.userLink(t.myLover),target:"_blank"}},[t._v(t._s(t.getName(t.myLover)))]),t.myLover.status?e("span",{staticClass:"u-item-remark u-exit",on:{click:function(e){return t.onExit(t.myLover)}}},[t._v(" 解除关系 ")]):e("span",{staticClass:"u-item-remark"},[t._v(" 等待确认中... "),e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.onCancel(t.myLover)}}},[t._v("取消")])],1)]),t.waitList.length?e("el-alert",{staticClass:"u-wait-tip",attrs:{title:"您有 ".concat(t.waitList.length," 条邀请待处理！"),type:"warning","show-icon":"",closable:!1},nativeOn:{click:function(e){t.waitVisible=!0}}}):t._e()],1)]:e("div",{staticClass:"m-wrapper"},[e("div",{staticClass:"u-item u-add",on:{click:t.toAdd}},[e("i",{staticClass:"el-icon-plus"})]),t.waitList.length?e("el-alert",{staticClass:"u-wait-tip",attrs:{title:"您有 ".concat(t.waitList.length," 条邀请待处理！"),type:"warning","show-icon":"",closable:!1},nativeOn:{click:function(e){t.waitVisible=!0}}}):t._e()],1)],2)]:t._e(),t.showOpen?e("el-button",{attrs:{type:"success"},on:{click:t.onOpen}},[t._v("启用")]):t._e(),e("el-dialog",{attrs:{title:"待处理列表",visible:t.waitVisible,width:"80%"},on:{"update:visible":function(e){t.waitVisible=e}}},[e("div",{staticClass:"m-whitelist-list m-wait-list"},t._l(t.waitList,(function(i,n){return e("div",{key:n,staticClass:"u-item"},[e("a",{staticClass:"u-item-pic",attrs:{href:t.userLink(i),target:"_blank"}},[e("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.getAvatar(i))}})]),e("a",{staticClass:"u-item-name",attrs:{href:t.userLink(i),target:"_blank"}},[t._v(t._s(t.getName(i)))]),i.status?t._e():e("span",{staticClass:"u-item-remark"},[t.members.length?t._e():e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.onAccept(i)}}},[t._v("接受")]),e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.onReject(i)}}},[t._v("拒绝")])],1)])})),0),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.waitVisible=!1}}},[t._v("取 消")])],1)]),t.inviteVisible?e("inviteUser",{attrs:{visible:t.inviteVisible,list:t.list,type:"lover",relationId:t.relationId,"relation-active-name":t.relationActiveName},on:{update:t.onRefresh,close:function(e){t.inviteVisible=!1}}}):t._e()],2)},R=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"u-switch"},[e("i",{staticClass:"el-icon-d-arrow-right"})])}],B=(i("a9e3"),i("1a95")),D=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"w-dialog m-invite-user",attrs:{width:"500",visible:t.show,title:t.title},on:{"update:visible":function(e){t.show=e},close:t.close},scopedSlots:t._u([{key:"footer",fn:function(){return[e("div",{staticClass:"dialog-footer"},[e("div",{staticClass:"m-confirm"},[e("el-button",{on:{click:t.close}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",loading:t.loading,disabled:t.loading},on:{click:t.add}},[t._v(" 提交 ")])],1)])]},proxy:!0}])},[e("el-input",{staticClass:"u-input",attrs:{placeholder:"输入UID添加","suffix-icon":"el-icon-search"},on:{change:t.search},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.uid,callback:function(e){t.uid=t._n(e)},expression:"uid"}}),t.userdata?e("div",{staticClass:"u-list"},[e("div",{staticClass:"u-item"},[e("img",{staticClass:"u-item-avatar",attrs:{src:t._f("showAvatar")(t.userdata.user_avatar),alt:t.userdata.display_name}}),e("div",{staticClass:"u-item-info"},[e("span",{staticClass:"u-item-uid"},[t._v("UID："+t._s(t.userdata.ID))]),e("b",{staticClass:"u-item-name"},[t._v(t._s(t.userdata.display_name))])])])]):t._e(),t.isNull?e("div",{staticClass:"u-null"},[e("el-alert",{attrs:{title:"无搜索结果",type:"info","show-icon":"",closable:!1}})],1):t._e()],1)},V=[],U=i("2ef0"),z={name:"inviteUser",props:{visible:{type:Boolean,default:!1},relationActiveName:{type:String,default:""},relationId:{type:[String,Number],default:0},list:{type:Array,default:function(){return[]}},type:{type:String,default:"lover"}},emits:["close","update"],data:function(){return{loading:!1,show:!1,uid:"",userdata:"",flag:!1}},computed:{isNull:function(){return this.uid&&!this.userdata&&this.flag},title:function(){return"邀请"+this.relationActiveName},userId:function(){return j["a"].getInfo().uid}},watch:{visible:{immediate:!0,handler:function(t){this.show=t}}},filters:{showAvatar:function(t){return Object(A["showAvatar"])(t,"m")}},methods:{close:function(){this.show=!1,this.$emit("close",!1)},search:function(t){var e=this;t&&!isNaN(t)&&(this.flag=!1,c(t).then((function(t){e.userdata=t.data.data})).finally((function(){e.flag=!0})))},inviteUser:function(){var t=this;this.relationId&&(this.loading=!0,O(this.relationId,this.userdata.ID).then((function(){t.$notify({title:"已发送邀请",type:"success"}),t.$emit("update")})).finally((function(){t.loading=!1})))},add:Object(U["throttle"])((function(){var t=this;this.userdata?this.list.length?this.inviteUser():C({relationship_type:this.type}).then((function(){t.inviteUser()})):this.$notify({title:"提示",message:"请先输入UID进行搜索",type:"warning"})}),500)}},S=z,q=(i("bf3d"),i("2877")),E=Object(q["a"])(S,D,V,!1,null,null,null),F=E.exports,K={name:"Lover",components:{inviteUser:F},emits:["refresh"],props:{list:{type:Array,default:function(){return[]}},waitList:{type:Array,default:function(){return[]}},relationActiveName:{type:String,default:""},relationId:{type:[String,Number],default:0}},data:function(){return{inviteVisible:!1,waitVisible:!1,isAllowLover:!1}},computed:{showOpen:function(){return!this.isAllowLover&&!this.list.length},userId:function(){return j["a"].getInfo().uid},me:function(){var t=this;return this.list.find((function(e){return e.user_id==t.userId}))||{}},myLover:function(){var t=this;return this.list.find((function(e){return e.user_id!=t.userId}))||{}}},watch:{list:{deep:!0,handler:function(t){t.length||this.loadConf()}}},mounted:function(){},methods:{toAdd:function(){this.inviteVisible=!0},onRefresh:function(){this.$emit("refresh","loadRelationNetMembersByType")},onOpen:function(){var t=this;this.$confirm("是否立即启用情缘功能？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(B["b"])({accept_lover_request:1}).then((function(){t.$notify({title:"开启成功",type:"success"})}))}))},autoCreateNet:function(){var t=this;this.list.length||C({relationship_type:"lover"}).then((function(){t.onRefresh()}))},loadConf:function(){var t=this;Object(B["a"])().then((function(e){var i,n;t.isAllowLover=!(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(n=i.data)||void 0===n||!n.accept_lover_request),t.isAllowLover&&t.autoCreateNet()}))},userLink:function(t){var e,i=t.user_id||(null===(e=t.creator_info)||void 0===e?void 0:e.id);return Object(A["authorLink"])(i)},getAvatar:function(t){var e,i;return(null===(e=t.user_info)||void 0===e?void 0:e.avatar)||(null===(i=t.creator_info)||void 0===i?void 0:i.avatar)},getName:function(t){var e,i;return(null===(e=t.user_info)||void 0===e?void 0:e.display_name)||(null===(i=t.creator_info)||void 0===i?void 0:i.display_name)},onExit:function(t){var e=this;this.$confirm("是否解除关系？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,I(t.net_id).then((function(){e.$notify({title:"解除成功",type:"success"}),e.onRefresh()})).finally((function(){e.loading=!1}))}))},onAccept:function(t){var e=this;this.$confirm("是否接受 ".concat(t.creator_info.display_name," 的邀请，成为ta的情缘？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,N(t.net_id,1).then((function(){e.$notify({title:"接受成功",type:"success"}),e.waitVisible=!1,e.onRefresh()})).finally((function(){e.loading=!1}))}))},onReject:function(t){var e=this;this.$confirm("是否拒绝 ".concat(t.creator_info.display_name," 的邀请？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,N(t.net_id,2).then((function(){e.$notify({title:"拒绝成功",type:"success"}),e.$emit("refresh","loadWaitInvites")})).finally((function(){e.loading=!1}))}))},onCancel:function(t){var e=this;this.loading=!0,$(t.id).then((function(t){e.$notify({title:"取消成功",type:"success"}),e.onRefresh()})).finally((function(){e.loading=!1}))}},filters:{showAvatar:function(t){return Object(A["showAvatar"])(t,"m")},authorLink:A["authorLink"]}},M=K,W=(i("afb7"),Object(q["a"])(M,T,R,!1,null,null,null)),J=W.exports,P={name:"privacy",components:{lover:J},props:[],data:function(){return{list:[],loading:!1,uid:"",userdata:"",flag:!1,limit_map:{member:5,vip:20,pro:100},identity:"member",active:"lover",keyword:"",pagination:{pageIndex:1,pageSize:10,total:0},relationNetTypes:[],net:{},members:[],waitList:[],inviteVisible:!1}},computed:{isRelationNet:function(){var t=this;return this.relationNetTypes.find((function(e){return e.relationship_type===t.active}))},relationActiveName:function(){var t,e=this;return null===(t=this.relationNetTypes.find((function(t){return t.relationship_type===e.active})))||void 0===t?void 0:t.name},relationId:function(){var t;return(null===(t=this.net)||void 0===t?void 0:t.id)||0},allowAppend:function(){return this.userdata&&this.total<this.limit&&this.isNewKith},isNewKith:function(){var t,e=null===(t=this.userdata)||void 0===t?void 0:t.ID;return!this.currentIdList.includes(e)},currentIdList:function(){return this.list.map((function(t){return t.kith_id}))},limit:function(){return this.limit_map[this.identity]||5},total:function(){var t;return null===(t=this.list)||void 0===t?void 0:t.length},isNull:function(){return this.uid&&!this.userdata&&this.flag},fns:function(){return{blacklist:h,myfans:y}},removeFns:function(){return{blacklist:p,myfollow:w,myfans:g}},addFns:function(){return{blacklist:m,myfollow:v,whitelist:u}},btnText:function(){return this.isRelationNet?"添加":{blacklist:"拉黑",myfollow:"关注",whitelist:"添加亲友 (".concat(this.total," / ").concat(this.limit,")")}[this.active]},sideTitle:function(){return this.isRelationNet?this.relationActiveName:{blacklist:"添加黑名单",myfollow:"添加关注",whitelist:"添加亲友"}[this.active]},userId:function(){return j["a"].getInfo().uid}},methods:{onRefresh:function(t){null===this||void 0===this||this[t]()},loadRelationNetTypes:function(){var t=this;return Object(o["a"])(Object(s["a"])().m((function e(){return Object(s["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,k().then((function(e){var i;t.relationNetTypes=null===(i=e.data.data)||void 0===i?void 0:i.filter((function(t){return t.is_official&&t.is_only_one}))}));case 1:return e.a(2,e.v)}}),e)})))()},handleChange:function(){this.pagination.pageIndex=1,this.loadList()},loadRelationNetMembersByType:function(){var t=this,e=this.active;this.loading=!0,x(e).then((function(e){var i,n;t.members=(null===(i=e.data.data)||void 0===i?void 0:i.members)||[],t.net=(null===(n=e.data.data)||void 0===n?void 0:n.net)||{}})).finally((function(){t.loading=!1}))},loadWaitInvites:function(){var t=this;this.loading=!0,L().then((function(e){var i,n,a;t.waitList=(null===(i=e.data)||void 0===i||null===(n=i.data)||void 0===n||null===(a=n.list)||void 0===a?void 0:a.filter((function(e){var i;return(null===(i=e.net)||void 0===i?void 0:i.relationship_type)===t.active})))||[]})).finally((function(){t.loading=!1}))},tabChange:function(){var t=this;this.relationNetTypes.find((function(e){return e.relationship_type===t.active}))?this.loadRelationNetMembersByType():(this.keyword=this.$route.query.keyword||"",this.pagination.pageIndex=1,this.loadList())},currentChange:function(t){this.pagination.pageIndex=t,this.loadList()},search:function(t){var e=this;t&&!isNaN(t)&&(this.flag=!1,c(t).then((function(t){e.userdata=t.data.data})).finally((function(){e.flag=!0})))},add:function(){var t=this;this.userdata?"myfollow"===this.active?_(this.userdata.ID,{title:this.userdata.display_name}).then((function(e){t.loadList()})):this.addFns[this.active](this.userdata.ID).then((function(e){t.loadList()})):this.$notify({title:"提示",message:"请先输入UID进行搜索",type:"warning"})},addKith:function(){var t=this;this.allowAppend&&u(this.uid).then((function(){t.$notify({title:"成功",message:"添加成功",type:"success"}),t.list.push({kith_id:t.uid,level:0,status:0,kith_info:t.userdata})}))},follow:function(){var t=this;v(this.userdata.ID).then((function(){t.$notify({title:"成功",message:"关注成功",type:"success"}),t.loadList()}))},deny:function(){var t=this;m(this.userdata.ID).then((function(){t.$notify({title:"成功",message:"拉黑成功",type:"success"}),t.loadList()}))},loadList:function(){var t=this;if(this.loading=!0,this.$router.push({name:"privacy",query:{tab:this.active}}),"whitelist"===this.active)l().then((function(e){var i=e.data.data;i=i.sort((function(t,e){return e.level-t.level})),t.list=i})).finally((function(){t.loading=!1}));else if("myfollow"===this.active){var e={index:this.pagination.pageIndex,pageSize:this.pagination.pageSize,q:this.keyword,category:2};b(e).then((function(e){t.list=e.data.data.list||[],t.pagination.total=e.data.data.page.total})).finally((function(){t.loading=!1}))}else{var i={pageIndex:this.pagination.pageIndex,pageSize:this.pagination.pageSize,display_name:this.keyword};this.fns[this.active](i).then((function(e){t.list=e.data.data.list||[],t.pagination.total=e.data.data.page.total})).finally((function(){t.loading=!1}))}},remove:function(t,e){var i=this;d(t).then((function(){i.$notify({title:"成功",message:"删除成功",type:"success"}),i.list.splice(e,1)}))},edit:function(t,e){var i=this;this.$prompt("请输入备注","设置",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(n){var a=n.value;f(t,{remark:a}).then((function(){i.$notify({title:"成功",message:"编辑成功",type:"success"}),e.remark=a}))}))},removeOther:function(t){var e=this,i={blacklist:"确认解除对该用户的屏蔽？",myfollow:"确认不再订阅该用户？",myfans:"确认要移除粉丝？"};this.$confirm(i[this.active],"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){var i="";i="whitelist"===e.active?t.kith_id:"myfans"===e.active?t.user_id:"blacklist"===e.active?t.bind_user_id:t.author_id,e.removeFns[e.active](i).then((function(){e.$notify({title:"成功",message:"操作成功",type:"success"}),e.loadList()}))})).finally((function(){}))}},mounted:function(){var t=this;this.loadRelationNetTypes().then((function(){if(t.relationNetTypes.length){var e,i=(null===(e=t.relationNetTypes.find((function(e){return e.relationship_type===t.$route.query.tab})))||void 0===e?void 0:e.relationship_type)||"lover";t.active=i,t.loadRelationNetMembersByType(),t.loadWaitInvites()}else t.active=t.$route.query.tab||"whitelist",t.loadList()})),j["a"].getAsset().then((function(e){j["a"]._isPRO(e)?t.identity="pro":j["a"]._isVIP(e)?t.identity="vip":t.identity="member"}))},filters:{showAvatar:function(t){return Object(A["showAvatar"])(t,"m")},authorLink:A["authorLink"]}},G=P,H=(i("a782"),Object(q["a"])(G,n,a,!1,null,"d607b1de",null));e["default"]=H.exports},a782:function(t,e,i){"use strict";i("5f9b")},afb7:function(t,e,i){"use strict";i("e088")},bf3d:function(t,e,i){"use strict";i("797a")},e088:function(t,e,i){}}]);