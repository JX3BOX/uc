(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-684b3e7c"],{"23a2":function(t,e,n){"use strict";n("e2f5")},"39dd":function(t,e,n){},"48c0":function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-dashboard-profile m-profile"},[e("h2",{staticClass:"u-title"},[e("i",{class:t.icon}),t._v(" "+t._s(t.title)+" "),t._t("header")],2),e("tabs",{attrs:{tabs:t.tabList,"msg-change-count":t.msgChangeCount}}),t._t("default")],2)},i=[],o=(n("a9e3"),n("b0c0"),function(){var t=this,e=t._self._c;return e("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabs,(function(n){return e("el-tab-pane",{key:n.name,attrs:{name:n.name}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"u-tab-icon",class:n.icon}),t._v(" "+t._s(n.label)+" "),t.showCount?e("span",{staticClass:"u-count",class:t.count[t.countMap[n.name]]?"is-orange":""},[t._v("("+t._s(t.count[t.countMap[n.name]]||0)+")")]):t._e()])])})),1)}),r=[],s=(n("caad"),n("14d9"),n("c944")),c={name:"",props:{tabs:{type:Array,default:function(){return[]}},msgChangeCount:{type:Number,default:0}},data:function(){return{active:"",countMap:{msg:"message",letter:"letter"},count:{message:0,letter:0}}},watch:{$route:function(){this.active=this.routeName},msgChangeCount:{immediate:!0,handler:function(t){t>0&&(this.count.message=0),t<0&&this.count.message>0&&(this.count.message+=t)}}},computed:{showCount:function(){return["msg","letter"].includes(this.routeName)},routeName:function(){return this.$route.name}},methods:{changeTab:function(){this.$router.push({name:this.active})},loadCount:function(){var t=this;Object(s["b"])().then((function(e){var n,a=(null===(n=e.data)||void 0===n?void 0:n.data)||{};t.count.letter=a.letter||0})),Object(s["c"])().then((function(e){var n;t.count.message=(null===(n=e.data.data)||void 0===n?void 0:n.unread_count)||0}))}},mounted:function(){this.active=this.routeName,this.showCount&&this.loadCount()},components:{}},l=c,u=n("2877"),d=Object(u["a"])(l,o,r,!1,null,null,null),m=d.exports,h=n("5c97"),f={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return h["d"]}},msgChangeCount:{type:Number,default:0}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:m}},p=f,g=(n("dc6f"),Object(u["a"])(p,a,i,!1,null,null,null));e["a"]=g.exports},"506c":function(t,e,n){"use strict";var a=n("65c2"),i=n("2ef0");const{__imgPath:o,__dataPath:r}=a,s=[],c=[];let l=!1;async function u(){if(c.length>0)return;if(l&&0===c.length)return await new Promise(t=>{s.push(t)});l=!0;const t=sessionStorage.getItem("jx3_emotion");if(t){const e=JSON.parse(t);c.push(...e.map(t=>t.items).reduce((t,e)=>t.concat(e),[])),c.push(...JSON.parse(t))}else{const t=await fetch(r+"emotion/output/catalog.json").then(t=>t.json());c.push(...t.map(t=>t.items).reduce((t,e)=>t.concat(e),[])),sessionStorage.setItem("jx3_emotion",JSON.stringify(t))}l=!1,s.forEach(t=>t())}class d{constructor(t){this.joke=String(t).trim()}async _renderHTML(t){if(!this.joke.includes("#"))return this.joke;await u();const e=Object(i["keyBy"])(c,"key");for(const n in e)if(this.joke.includes(n)){let a=e[n].filename;a.startsWith("http")||(a=`${o}emotion/output/${e[n].filename}`);let i="";const{maxWidth:r=60,maxHeight:s=60}=t||{};i+=`max-width: ${r}px;`,i+=`max-height: ${s}px;`,this.joke=this.joke.replaceAll(n,`<img src="${a}" alt="${n}" title="${n}" style="${i}" />`)}return this.joke}}e["a"]=d},"59b6":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("uc",{staticClass:"m-dashboard-frame m-dashboard-skin",attrs:{icon:"el-icon-bell",title:"我的消息","tab-list":t.tabList,"msg-change-count":t.msgChangeCount}},[e("div",{staticClass:"m-dashboard m-dashboard-work m-dashboard-msg"},[e("div",{staticClass:"m-dashboard-msg-header"},[e("el-input",{staticClass:"m-dashboard-work-search",attrs:{placeholder:"请输入搜索内容"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.changePage(1)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[e("template",{slot:"prepend"},[t._v("关键词")]),e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.changePage(1)}},slot:"append"})],2),e("el-button",{staticClass:"u-read-all",attrs:{type:"primary"},on:{click:function(e){return t.read(null)}}},[e("i",{staticClass:"el-icon el-icon-check"}),e("span",{domProps:{textContent:t._s("全部设为已读")}})])],1),t.data.length?e("ul",{staticClass:"m-dashboard-box-list"},t._l(t.data,(function(n,a){return e("li",{key:a,class:{on:1==n.read}},[e("div",{staticClass:"u-primary"},[e("span",{staticClass:"u-content"},[1==n.read?e("span",{staticClass:"u-label u-hasChecked"},[t._v("已读")]):e("span",{staticClass:"u-label u-hasNotChecked"},[t._v("未读")]),e("span",{domProps:{innerHTML:t._s(n.content)}}),"comments"===n.ext_type&&n.ext_type_id>0?e("span",{staticClass:"u-msg-detail",on:{click:function(e){return t.handleDetail(n.ext_type_id)}}},[e("i",{staticClass:"el-icon-view"}),e("span",[t._v("详情")])]):t._e(),t.hasLink(n)?e("a",{staticClass:"u-msg-link",attrs:{href:t.msgLink(n),target:"_blank"},on:{click:function(e){return t.read(n)}}},[e("i",{staticClass:"el-icon-link"}),t._v(" 查看 ")]):t._e()]),e("time",{staticClass:"u-time"},[e("i",{staticClass:"el-icon-phone-outline"}),t._v(" "+t._s(t.dateFormat(~~n.created))+" ")])]),e("el-button-group",{staticClass:"u-action"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-check",title:"设为已读",disabled:1==n.read},on:{click:function(e){return t.read(n)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete",title:"删除"},on:{click:function(e){return t.del(n)}}})],1)],1)})),0):e("el-alert",{staticClass:"m-dashboard-box-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),t.paginationShow?e("el-pagination",{staticClass:"m-dashboard-box-pages",attrs:{background:"","hide-on-single-page":!0,"current-page":t.page,"page-size":t.limit,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.changePage,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e}}}):t._e()],1),t.visible?e("CommentDetail",{attrs:{visible:t.visible,id:t.id},on:{close:t.close}}):t._e()],1)},i=[],o=(n("99af"),n("caad"),n("a15b"),n("14d9"),n("e9c4"),n("a9e3"),n("ac1f"),n("5319"),n("2ca0"),n("5c97")),r=n("c944"),s=n("e4f1"),c=n("85e4"),l=n("927b"),u=n("e762"),d=n("48c0"),m=function(){var t,e,n=this,a=n._self._c;return a("el-dialog",{staticClass:"m-comment-detail-dialog",attrs:{visible:n.show,title:n.title,"before-close":n.close},on:{"update:visible":function(t){n.show=t}}},[a("el-descriptions",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"m-msg-comment-detail",attrs:{direction:"vertical",column:2,border:""}},[a("el-descriptions-item",{attrs:{label:"评论内容",span:2}},[a("div",{domProps:{innerHTML:n._s(n.renderContent||"-")}})]),n.attachments.length?a("el-descriptions-item",{attrs:{label:"评论附件",span:2}},n._l(n.attachments,(function(t,e){return a("el-image",{key:e,attrs:{src:n.resolveImagePath(t),"preview-src-list":[t]}})})),1):n._e(),a("el-descriptions-item",{attrs:{label:"评论人"}},[n.data.userId?a("div",{staticClass:"m-user"},[a("a",{staticClass:"u-name",attrs:{href:n.authorLink(n.data.userId),target:"_blank"}},[a("img",{staticClass:"u-avatar",attrs:{src:n.showAvatar(null===(t=n.data.user_info)||void 0===t?void 0:t.avatar),alt:""}}),n._v(" "+n._s(null===(e=n.data.user_info)||void 0===e?void 0:e.display_name)+" ")])]):a("span",[n._v("-")])]),a("el-descriptions-item",{attrs:{label:"评论时间"}},[n._v(" "+n._s(n.formatDate(n.data.commentDate))+" ")])],1)],1)},h=[],f=n("c14f"),p=n("1da1"),g=(n("b64b"),n("d3b7"),n("61c5")),b=n("85e4"),v=b.authorLink,y=b.resolveImagePath,C=b.showAvatar,_={name:"MsgCommentDetail",emits:["close"],props:["visible","id"],data:function(){return{loading:!1,data:{},attachments:[],renderContent:""}},computed:{title:function(){return"消息详情"}},watch:{visible:{handler:function(t){this.show=t},immediate:!0},id:{immediate:!0,handler:function(t){var e=this;this.loading=!0,Object(r["a"])(t).then((function(t){e.data=t.data.data||{},e.getImages(e.data.attachments),e.formatContent(e.data.content)})).finally((function(){e.loading=!1}))}}},methods:{formatContent:function(t){var e=this;return Object(p["a"])(Object(f["a"])().m((function n(){return Object(f["a"])().w((function(n){while(1)switch(n.n){case 0:return n.n=1,Object(g["a"])(t);case 1:e.renderContent=n.v;case 2:return n.a(2)}}),n)})))()},getImages:function(t){try{this.attachments=JSON.parse(t)}catch(e){this.attachments=[]}},resolveImagePath:function(t){return y(t)+"?x-oss-process=style/comment_thumb"},showAvatar:C,authorLink:v,formatDate:function(t){return Object(s["c"])(t)},close:function(){this.show=!1,this.$emit("close")}}},x=_,k=(n("698e"),n("2877")),w=Object(k["a"])(x,m,h,!1,null,null,null),j=w.exports,A=["namespace"],O={team_member_list:"/team/my/org/{id}?tab=manage-member"},S={name:"msg",components:{uc:d["a"],CommentDetail:j},data:function(){return{keyword:"",type:"all",data:[],unread_total:0,total:1,page:1,limit:15,paginationShow:!0,tabList:o["c"],msgChangeCount:0,id:"",visible:!1}},methods:{close:function(){this.id="",this.visible=!1},handleDetail:function(t){this.id=t,this.visible=!0},changePage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$router.push({name:"msg",query:{page:e}}),this.page=e,this.paginationShow=!1,Object(r["d"])({content:this.keyword,index:e,pageSize:this.limit}).then((function(e){t.unread_total=e.data.data.unread_count,t.total=e.data.data.page.total,t.data=e.data.data.list||[],t.paginationShow=!0})).catch((function(e){t.$message.error(e.message),t.paginationShow=!0}))},read:function(t){var e=this;this.msgChangeCount=0,t?Object(r["f"])(t.ID).then((function(n){0===n.data.code?(t.read||(e.msgChangeCount=-1),t.read=1):e.$notify.error({title:n.data.message})})):Object(r["e"])().then((function(t){0===t.data.code?(e.changePage(e.page),e.msgChangeCount=1,l["a"].emit("refresh")):e.$notify.error({title:t.data.message})}))},del:function(t){var e=this;Object(r["g"])(t.ID).then((function(n){0===n.data.code?t.deleted=Math.round(new Date/1e3):e.$notify.error({title:n.data.message})}))},dateFormat:function(t){return Object(s["c"])(new Date(1e3*t))},hasLink:function(t){return!A.includes(t.source_type)&&(!!t.redirect||!(!t.source_id||!t.source_type))},msgLink:function(t){var e=t.source_id,n=t.source_type,a=t.type,i=t.subtype,o=t.redirect;t.user_id;if(o){if(o.startsWith("http")||o.startsWith("/"))return o;var r;if(O[o]){var s=O[o];return s.replace("{id}",e)}return"/"+(null===o||void 0===o||null===(r=o.split("_"))||void 0===r?void 0:r.join("/"))}if("birthday"==n)return"/author/birthday?code="+u["a"].encode(e);if("callback"==n){var l=encodeURIComponent(u["a"].encode(JSON.stringify(t)));return"/dashboard/callback/".concat(a,"/").concat(i,"?info=").concat(l)}return Object(c["getLink"])(n,e)}},mounted:function(){this.changePage(Number(this.$route.query.page||1))}},$=S,P=(n("23a2"),Object(k["a"])($,a,i,!1,null,"09f0f9e4",null));e["default"]=P.exports},"5c97":function(t){t.exports=JSON.parse('{"e":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"medal","icon":"el-icon-medal","label":"勋章"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"}],"d":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"notice","icon":"el-icon-message","label":"通知中心"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"},{"name":"auth","icon":"el-icon-s-check","label":"账号认证"}],"b":[{"name":"mall","icon":"el-icon-shopping-bag-1","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-2","label":"系统订单"}],"c":[{"name":"msg","icon":"el-icon-message","label":"通知"},{"name":"letter","icon":"el-icon-chat-dot-square","label":"私信"}],"a":[{"name":"certification","icon":"el-icon-medal","label":"电子证书"},{"name":"holidayCard","icon":"el-icon-sugar","label":"节日贺卡"},{"name":"birthdayCard","icon":"el-icon-present","label":"生日贺卡"}]}')},"61c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n("c14f"),i=n("1da1"),o=n("506c");function r(t){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(Object(a["a"])().m((function t(e){var n;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:return n=new o["a"](e),t.n=1,n._renderHTML();case 1:return t.a(2,t.v)}}),t)}))),s.apply(this,arguments)}},"698e":function(t,e,n){"use strict";n("6e4e")},"6e4e":function(t,e,n){},c944:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return c}));var a=n("41cb");function i(t){return Object(a["$next"])().get("/api/next2/userdata/messages",{params:t})}function o(t){return Object(a["$next"])().put("/api/next2/userdata/messages/read/".concat(t))}function r(){return Object(a["$next"])().put("/api/next2/userdata/messages/read")}function s(t){return Object(a["$next"])().delete("/api/next2/userdata/messages/".concat(t))}function c(){return Object(a["$next"])({mute:!0}).get("/api/next2/userdata/messages/unread_total")}function l(){return Object(a["$next"])({mute:!0}).get("/api/letter/unread/count")}function u(t){return Object(a["$next"])().get("/api/next2/comment/item/".concat(t))}},dc6f:function(t,e,n){"use strict";n("39dd")},e2f5:function(t,e,n){},e762:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return M}));const a="3.7.8",i=a,o="function"===typeof t,r="function"===typeof TextDecoder?new TextDecoder:void 0,s="function"===typeof TextEncoder?new TextEncoder:void 0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=Array.prototype.slice.call(c),u=(t=>{let e={};return t.forEach((t,n)=>e[t]=n),e})(l),d=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,m=String.fromCharCode.bind(String),h="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),f=t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_"),p=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),g=t=>{let e,n,a,i,o="";const r=t.length%3;for(let s=0;s<t.length;){if((n=t.charCodeAt(s++))>255||(a=t.charCodeAt(s++))>255||(i=t.charCodeAt(s++))>255)throw new TypeError("invalid character found");e=n<<16|a<<8|i,o+=l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}return r?o.slice(0,r-3)+"===".substring(r):o},b="function"===typeof btoa?t=>btoa(t):o?e=>t.from(e,"binary").toString("base64"):g,v=o?e=>t.from(e).toString("base64"):t=>{const e=4096;let n=[];for(let a=0,i=t.length;a<i;a+=e)n.push(m.apply(null,t.subarray(a,a+e)));return b(n.join(""))},y=(t,e=!1)=>e?f(v(t)):v(t),C=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?m(192|e>>>6)+m(128|63&e):m(224|e>>>12&15)+m(128|e>>>6&63)+m(128|63&e)}e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return m(240|e>>>18&7)+m(128|e>>>12&63)+m(128|e>>>6&63)+m(128|63&e)},_=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,x=t=>t.replace(_,C),k=o?e=>t.from(e,"utf8").toString("base64"):s?t=>v(s.encode(t)):t=>b(x(t)),w=(t,e=!1)=>e?f(k(t)):k(t),j=t=>w(t,!0),A=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,O=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return m(55296+(n>>>10))+m(56320+(1023&n));case 3:return m((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return m((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},S=t=>t.replace(A,O),$=t=>{if(t=t.replace(/\s+/g,""),!d.test(t))throw new TypeError("malformed base64.");let e,n,a;t+="==".slice(2-(3&t.length));let i=[];for(let o=0;o<t.length;)e=u[t.charAt(o++)]<<18|u[t.charAt(o++)]<<12|(n=u[t.charAt(o++)])<<6|(a=u[t.charAt(o++)]),64===n?i.push(m(e>>16&255)):64===a?i.push(m(e>>16&255,e>>8&255)):i.push(m(e>>16&255,e>>8&255,255&e));return i.join("")},P="function"===typeof atob?t=>atob(p(t)):o?e=>t.from(e,"base64").toString("binary"):$,D=o?e=>h(t.from(e,"base64")):t=>h(P(t).split("").map(t=>t.charCodeAt(0))),L=t=>D(F(t)),B=o?e=>t.from(e,"base64").toString("utf8"):r?t=>r.decode(D(t)):t=>S(P(t)),F=t=>p(t.replace(/[-_]/g,t=>"-"==t?"+":"/")),I=t=>B(F(t)),N=t=>{if("string"!==typeof t)return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},U=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),z=function(){const t=(t,e)=>Object.defineProperty(String.prototype,t,U(e));t("fromBase64",(function(){return I(this)})),t("toBase64",(function(t){return w(this,t)})),t("toBase64URI",(function(){return w(this,!0)})),t("toBase64URL",(function(){return w(this,!0)})),t("toUint8Array",(function(){return L(this)}))},T=function(){const t=(t,e)=>Object.defineProperty(Uint8Array.prototype,t,U(e));t("toBase64",(function(t){return y(this,t)})),t("toBase64URI",(function(){return y(this,!0)})),t("toBase64URL",(function(){return y(this,!0)}))},E=()=>{z(),T()},M={version:a,VERSION:i,atob:P,atobPolyfill:$,btoa:b,btoaPolyfill:g,fromBase64:I,toBase64:w,encode:w,encodeURI:j,encodeURL:j,utob:x,btou:S,decode:I,isValid:N,fromUint8Array:y,toUint8Array:L,extendString:z,extendUint8Array:T,extendBuiltins:E}}).call(this,n("b639").Buffer)}}]);