(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16018f81"],{"0803":function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"j",(function(){return a})),n.d(e,"g",(function(){return i})),n.d(e,"h",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"l",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return m})),n.d(e,"i",(function(){return f})),n.d(e,"k",(function(){return d})),n.d(e,"e",(function(){return p})),n.d(e,"m",(function(){return b})),n.d(e,"b",(function(){return h}));n("99af");var o=n("41cb");function r(t){return Object(o["$team"])().get("/api/team/my-game-roles",{params:t})}function a(t){return Object(o["$team"])().get("/api/team/role-unbind/"+t)}function i(){return Object(o["$team"])().get("/api/team/role-bind-token")}function u(t,e){return Object(o["$team"])().put("/api/team/role-update-note/".concat(t),{note:e})}function c(t){return Object(o["$team"])().post("/api/team/custom-role",t)}function s(t,e){return Object(o["$team"])().put("/api/team/custom-role/".concat(t),e)}function l(t){return Object(o["$team"])().get("/api/team/custom-role/".concat(t))}function m(t){return Object(o["$team"])().delete("/api/team/custom-role/".concat(t))}function f(t){return Object(o["$team"])().put("/api/team/role-priority/".concat(t,"/top"))}function d(t){return Object(o["$team"])().put("/api/team/role-priority/".concat(t,"/untop"))}function p(t){return Object(o["$team"])().get("/api/team/relation/role/".concat(t,"/teams"))}function b(t,e){return Object(o["$team"])().put("/api/team/my-game-roles/".concat(t,"/change-visible/").concat(e))}function h(t,e){return Object(o["$team"])().put("/api/team/my-game-roles/".concat(t,"/set-default/").concat(e))}},1619:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return l}));var o=n("fb5f"),r=n("33a5"),a=n("65c2"),i=n("e4f1");n.d(e,"g",(function(){return i["c"]}));var u=n("85e4");function c(t){var e;return(null===(e=o["bodyMap"][t])||void 0===e?void 0:e.label)||"未知"}function s(t){var e=t||0;return a["__imgPath"]+"image/school/"+e+".png"}function l(t){var e=t||0;return e&&r[e]||"未知"}n.d(e,"b",(function(){return u["getThumbnail"]})),n.d(e,"a",(function(){return u["authorLink"]})),n.d(e,"c",(function(){return u["showAvatar"]}))},"1b97":function(t,e,n){"use strict";n("b0c0");var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-role-form"},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px","label-position":t.position}},[e("el-form-item",{attrs:{label:"角色名"}},[e("el-input",{attrs:{placeholder:"请输入角色名称","show-word-limit":"",minlength:2,maxlength:20},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"服务器"}},[e("el-select",{attrs:{placeholder:"请选择服务器",filterable:""},on:{change:t.setDefaultServer},model:{value:t.form.server,callback:function(e){t.$set(t.form,"server",e)},expression:"form.server"}},t._l(t.servers,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("el-form-item",{attrs:{label:"门派"}},[e("el-radio-group",{attrs:{size:"medium"},model:{value:t.form.mount,callback:function(e){t.$set(t.form,"mount",e)},expression:"form.mount"}},t._l(t.school_map,(function(n,o){return e("el-radio",{key:o,attrs:{label:o,border:""}},[e("img",{staticClass:"u-icon-school",attrs:{src:t._f("showSchoolIcon")(o)}}),t._v(" "+t._s(n)+" ")])})),1)],1),e("el-form-item",{attrs:{label:"体型"}},[e("el-select",{attrs:{placeholder:"请选择体型"},model:{value:t.form.body_type,callback:function(e){t.$set(t.form,"body_type",e)},expression:"form.body_type"}},t._l(t.body_map,(function(t,n){return e("el-option",{key:n,attrs:{label:t.label,value:n}})})),1)],1),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{attrs:{placeholder:"请输入备注信息","show-word-limit":"",minlength:2,maxlength:20},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1),e("el-form-item",[e("el-button",{staticClass:"u-btn",attrs:{type:"primary",disabled:t.building},on:{click:t.submit}},[t._v(t._s(t.btn_txt))])],1)],1)],1)},r=[],a=n("9756"),i=n("33a5"),u=n("fb5f"),c=n("1619"),s={props:["data","btn_txt","processing"],data:function(){return{position:window.innerWidth<768?"top":"left",form:this.data||{name:"",server:"",mount:"0",body_type:"1",note:""},building:this.processing||!1,servers:a,body_map:u["bodyMap"],school_map:i}},model:{prop:"data",event:"update"},watch:{data:function(t){this.form=t},form:{deep:!0,handler:function(t){this.$emit("update",t)}},processing:function(t){this.building=t}},computed:{},methods:{submit:function(){this.form.name?this.$emit("submit"):this.$alert("角色名不能为空","提醒",{confirmButtonText:"确定"})},setDefaultServer:function(t){localStorage&&localStorage.setItem("team_role_default_server",t)}},filters:{showSchoolIcon:c["e"]},mounted:function(){},components:{}},l=s,m=(n("cf66"),n("2877")),f=Object(m["a"])(l,o,r,!1,null,null,null);e["a"]=f.exports},"33a5":function(t){t.exports=JSON.parse('{"0":"江湖","1":"天策","2":"万花","3":"纯阳","4":"七秀","5":"少林","6":"藏剑","7":"丐帮","8":"明教","9":"五毒","10":"唐门","18":"苍云","19":"长歌","20":"霸刀","21":"蓬莱","22":"凌雪","23":"衍天","24":"药宗","26":"刀宗","29":"万灵","38":"段氏","39":"无相"}')},"61d2":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"v-role-add"},[e("h2",{staticClass:"u-title"},[e("i",{staticClass:"el-icon-setting"}),t._v(" 编辑角色 "),e("el-button",{staticClass:"u-back",attrs:{slot:"reference",size:"mini",plain:"",icon:"el-icon-arrow-left"},on:{click:t.goBack},slot:"reference"},[t._v("返回")])],1),e("roleform",{attrs:{data:t.form,btn_txt:"更新",processing:t.processing},on:{submit:t.submit}})],1)},r=[],a=(n("14d9"),n("d3b7"),n("1b97")),i=n("c9d2"),u=n("0803"),c={name:"",props:[],data:function(){return{form:{ID:"",name:"",server:"",mount:"",body_type:"",note:"",custom:1,uid:""},processing:!1}},computed:{id:function(){return~~this.$route.params.id}},methods:{loadData:function(){var t=this;Object(u["d"])(this.id).then((function(e){var n=e.data.data.uid==i["a"].getInfo().uid||i["a"].isSuperAdmin();n?t.form=e.data.data:t.$message.error("没有操作权限")}))},submit:function(){var t=this;this.form.custom?(this.processing=!0,Object(u["l"])(this.id,this.form).then((function(e){t.$message({message:"更新成功",type:"success"}),t.$router.push("/role")})).finally((function(){t.processing=!1}))):this.$message.error("绑定角色不允许篡改")},goBack:function(){this.$router.push("/role")}},mounted:function(){this.loadData()},components:{roleform:a["a"]}},s=c,l=n("2877"),m=Object(l["a"])(s,o,r,!1,null,null,null);e["default"]=m.exports},"83e9":function(t,e,n){},9756:function(t){t.exports=JSON.parse('["缘起稻香","天宝盛世","剑啸江湖","蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","眉间雪","山海相逢","共結來緣","傲血戰意","巔峰再起","江海雲夢"]')},cf66:function(t,e,n){"use strict";n("83e9")},fb5f:function(t){t.exports=JSON.parse('{"bodyMap":{"1":{"label":"成男","value":"m2"},"2":{"label":"成女","value":"f2"},"5":{"label":"正太","value":"m1"},"6":{"label":"萝莉","value":"f1"}},"bodyFiles":{"LittleBoy":5,"LittleGirl":6,"StandardFemale":2,"StandardMale":1},"majorMap":{"1":"std","2":"origin"},"faceSubtype":{"0":"写意","1":"写实"}}')}}]);