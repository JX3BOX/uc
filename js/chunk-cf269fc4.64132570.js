(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf269fc4"],{"0ccb":function(t,e,n){"use strict";var a=n("e330"),r=n("50c4"),i=n("577e"),o=n("1148"),c=n("1d80"),s=a(o),u=a("".slice),d=Math.ceil,f=function(t){return function(e,n,a){var o,f,p=i(c(e)),m=r(n),l=p.length,g=void 0===a?" ":i(a);return m<=l||""===g?p:(o=m-l,f=s(g,d(o/g.length)),f.length>o&&(f=u(f,0,o)),t?p+f:f+p)}};t.exports={start:f(!1),end:f(!0)}},"305d":function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"g",(function(){return s})),n.d(e,"i",(function(){return u})),n.d(e,"h",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return m})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return g}));var a=n("41cb"),r=n("bc3a"),i=n.n(r),o=n("65c2");function c(t){return Object(a["$cms"])().get("/api/cms/posts",{params:t})}function s(t){return Object(a["$cms"])().get("/api/cms/user/".concat(t,"/info"),{params:{nocache:1}})}function u(t){return Object(a["$cms"])().get("/api/cms/app/pz",{params:t})}function d(t){return Object(a["$cms"])().get("/api/cms/post/jokes",{params:t})}function f(t){return Object(a["$cms"])().get("/api/cms/post/emotions",{params:t})}function p(t){return Object(a["$cms"])().get("/api/cms/user/decoration",{params:t})}function m(){var t=o["__cdn"]+"design/decoration/index.json?".concat(Math.random());return i.a.get(t)}function l(t){return Object(a["$cms"])().get("/api/cms/dbm/pkg",{params:t})}function g(t){return Object(a["$team"])().get("/api/team/team-certification-record/item/".concat(t))}},"4a06":function(t,e,n){},"4d90":function(t,e,n){"use strict";var a=n("23e7"),r=n("0ccb").start,i=n("9a0c");a({target:"String",proto:!0,forced:i},{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"6cc8":function(t){t.exports=JSON.parse('{"101":"天策","102":"万花","103":"纯阳","104":"七秀","105":"少林","106":"藏剑","107":"丐帮","108":"明教","109":"五毒","110":"唐门","118":"苍云","119":"长歌","120":"霸刀","121":"蓬莱","122":"凌雪","123":"衍天","124":"药宗","126":"刀宗","129":"万灵"}')},"735d":function(t,e,n){t.exports=n.p+"img/bg.75886ea8.png"},"74f6":function(t,e,n){"use strict";n("4a06")},8559:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("AppLayout",[e("div",{staticClass:"m-main"},[e("el-image",{staticClass:"u-img",attrs:{fit:"contain",src:t.treasureImg,"preview-src-list":[t.treasureImg]}}),e("button",{staticClass:"u-btn m-hide el-button el-button--primary",on:{click:t.print}},[t._v("打印证书")]),e("canvas",{ref:"canvas",attrs:{id:"canvas"}})],1)])},r=[],i=(n("14d9"),n("d3b7"),n("ac1f"),n("25f0"),n("4d90"),n("5319"),n("65c2"),n("c6d4")),o=n("6cc8"),c=n("305d"),s={name:"Author",components:{AppLayout:i["a"]},props:[],data:function(){return{drawCtx:{},treasureImg:"",treasureInfo:!1,contentData:{},tianTuanCertificateCode:o}},computed:{id:function(){return this.$route.params.id}},watch:{id:{immediate:!0,handler:function(t){t?this.load():this.$router.push({name:"index"})}}},methods:{load:function(){var t=this;this.id&&Object(c["a"])(this.id).then((function(e){t.contentData=e.data.data,t.draw()}))},draw:function(){var t=this,e=document.getElementById("canvas"),a=e.getContext("2d");this.drawCtx=a,this.$refs.canvas.width=1520,this.$refs.canvas.height=1060;var r=new Image;r.setAttribute("crossOrigin","anonymous"),r.src=n("735d"),r.onload=function(){t.drawImg(r,0,0,1520,1060),t.drawText(a,{type:"text",content:t.contentData.team_certificate.team_name,style:{textAlign:"center",fontSize:36,left:712,top:479,color:"#756538"}}),t.drawText(a,{type:"text",content:t.tianTuanCertificateCode[t.contentData.team_certificate.sort_no],style:{textAlign:"center",fontSize:36,left:981,top:545,color:"#756538"}}),t.drawText(a,{type:"text",content:t.contentData.team_certificate.teammate,key:"team",style:{textAlign:"left",fontSize:17,left:262,top:640,color:"#756538",width:996,height:27}}),t.drawText(a,{type:"text",content:"剑网3魔盒门派天团赛事组",style:{textAlign:"right",fontSize:28,left:1257,top:810,color:"#000000"}}),t.drawText(a,{type:"text",content:t.formatTimeString("yyyy年MM月dd日",t.contentData.team_certificate.time),style:{textAlign:"right",fontSize:28,left:1257,top:850,color:"#000000"}}),t.canvasExport()}},loadDrawImage:function(t){var e=new Image;return e.setAttribute("crossOrigin","anonymous"),e.src=n("d25a")(t),new Promise((function(t,n){e.onload=function(){t(e)}}))},drawImg:function(t,e,n,a,r){this.drawCtx.drawImage(t,e,n,a,r)},drawText:function(t,e){var n=e.style;t.font="".concat(n.fontSize,"px Arial"),t.textAlign=n.textAlign,t.fillStyle=n.color,"team"!=e.key?t.fillText(e.content,n.left,n.top):this.drawWrappedText(t,e.content,n)},drawWrappedText:function(t,e,n){for(var a=e.split(";"),r="",i=0;i<a.length;i++){var o=a[i].split(",")[0],c=r+o,s=t.measureText(c),u=s.width;u>n.width&&i>0?(t.fillText(r,n.left,n.top),r=o+="，",n.top+=n.height):(c+="，",r=c)}t.fillText(r,n.left,n.top)},canvasExport:function(){var t=this;clearTimeout(this.exportImgTime);var e=document.getElementById("canvas");this.exportImgTime=setTimeout((function(){t.treasureImg=e.toDataURL("image/png")}),100)},formatTimeString:function(t,e){var n=new Date(e),a=n.getFullYear(),r=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),o=n.getHours().toString().padStart(2,"0"),c=n.getMinutes().toString().padStart(2,"0"),s=n.getSeconds().toString().padStart(2,"0");return t=t.replace(/yyyy/,a).replace(/MM/,r).replace(/dd/,i).replace(/hh/,o).replace(/mm/,c).replace(/ss/,s),t},print:function(){window.print()}}},u=s,d=(n("74f6"),n("2877")),f=Object(d["a"])(u,a,r,!1,null,"1521ffa5",null);e["default"]=f.exports},"9a0c":function(t,e,n){"use strict";var a=n("b5db");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(a)},c6d4:function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",[e("Header"),t._t("default")],2)},r=[],i={name:"AppLayout",components:{},props:[],data:function(){return{}},computed:{},created:function(){},methods:{}},o=i,c=n("2877"),s=Object(c["a"])(o,a,r,!1,null,null,null);e["a"]=s.exports},d25a:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="d25a"}}]);