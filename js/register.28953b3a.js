(function(e){function t(t){for(var s,n,r=t[0],c=t[1],o=t[2],d=0,p=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(p.length)p.shift()();return l.push.apply(l,o||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],s=!0,r=1;r<a.length;r++){var c=a[r];0!==i[c]&&(s=!1)}s&&(l.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},i={register:0},l=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://cdn.jx3box.com/static/uc/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var o=0;o<r.length;o++)t(r[o]);var u=c;l.push([5,"chunk-vendors","chunk-common"]),a()})({5:function(e,t,a){e.exports=a("e5d1")},"9bb9":function(e,t,a){"use strict";a("fd4d")},e5d1:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),i=a("5c96"),l=a.n(i),n=(a("6b30"),a("c5b4"),a("0af6")),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"m-card m-register",attrs:{id:"app"}},[t("el-card",{staticClass:"box-card"},[t("CardHeader"),t("Msg"),null==e.success?t("main",{staticClass:"m-main"},[t("form",{ref:"registerForm",staticClass:"m-form"},[t("div",{staticClass:"u-email"},[t("el-input",{staticClass:"u-text u-email",attrs:{placeholder:"邮箱地址",minlength:"3",maxlength:"50",type:"email"},on:{change:e.checkEmail},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-message"})])],2),t("i",{directives:[{name:"show",rawName:"v-show",value:1==e.email_available,expression:"email_available == true"}],staticClass:"el-icon-success u-ok"}),t("div",{staticClass:"u-tip"},[t("el-alert",{directives:[{name:"show",rawName:"v-show",value:0==e.email_validate,expression:"email_validate == false"}],attrs:{title:e.email_validate_tip,type:"error","show-icon":"",closable:!1}}),t("el-alert",{directives:[{name:"show",rawName:"v-show",value:0==e.email_available,expression:"email_available == false"}],attrs:{title:e.email_available_tip,type:"error","show-icon":"",closable:!1}})],1)],1),t("div",{staticClass:"u-code"},[t("el-input",{staticClass:"u-text",attrs:{placeholder:"验证码"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-postcard"})])],2),t("el-button",{staticClass:"u-code-btn",attrs:{size:"mini",type:"primary",disabled:e.code_disabled},on:{click:e.getCode}},[e._v(e._s(e.code_text))])],1),t("div",{staticClass:"u-pass"},[t("el-input",{staticClass:"u-text",attrs:{placeholder:"输入密码","show-password":""},on:{input:e.checkPass},model:{value:e.pass,callback:function(t){e.pass=t},expression:"pass"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-lock"})])],2),t("div",{staticClass:"u-tip"},[t("el-alert",{directives:[{name:"show",rawName:"v-show",value:0==e.pass_validate,expression:"pass_validate == false"}],attrs:{title:e.pass_validate_tip,type:"error","show-icon":"",closable:!1}})],1)],1),t("div",{staticClass:"u-invite"},[t("el-input",{staticClass:"u-text",attrs:{placeholder:"邀请码（非必填）"},model:{value:e.invite,callback:function(t){e.invite=t},expression:"invite"}},[t("template",{slot:"prepend"},[t("i",{staticClass:"el-icon-present"})])],2)],1),t("div",{staticClass:"u-terms"},[t("el-checkbox",{staticClass:"u-checkbox",model:{value:e.agreement,callback:function(t){e.agreement=t},expression:"agreement"}},[e._v(" 我已阅读并同意 "),t("a",{attrs:{href:"/about/license",target:"_blank"}},[e._v("《用户协议》")]),e._v("、"),t("a",{attrs:{href:"/about/privacy",target:"_blank"}},[e._v("《隐私政策》")]),e._v("、"),t("a",{attrs:{href:"/about/treaty",target:"_blank"}},[e._v("《创作公约》")])])],1)]),t("el-button",{staticClass:"u-submit u-button",attrs:{type:"primary",disabled:!e.ready},on:{click:e.submit}},[e._v(" 注册 ")]),t("Union",{attrs:{mode:"register",includes:["qq","wechat","weibo"]}}),t("footer",{staticClass:"m-footer"},[t("p",{staticClass:"u-login"},[e._v(" 已有账号? "),t("a",{attrs:{href:e.login_url}},[e._v("登录 »")])]),t("p",{staticClass:"u-resetpwd"},[t("a",{attrs:{href:"/account/password_reset"}},[e._v("忘记密码?")])])])],1):e._e(),1==e.success?t("main",{staticClass:"m-main"},[t("el-alert",{attrs:{title:"注册成功",type:"success",description:"恭喜，您现在已经是「魔盒」的一员啦！","show-icon":"",closable:!1}}),t("a",{staticClass:"u-skip el-button u-button el-button--primary",attrs:{href:e.login_url}},[e._v("立即登录")])],1):e._e(),0==e.success?t("main",{staticClass:"m-main"},[t("el-alert",{attrs:{title:"注册失败",type:"error",description:e.failtips,"show-icon":"",closable:!1}}),t("el-button",{staticClass:"u-button u-submit",attrs:{type:"primary"},on:{click:e.reset}},[e._v("返回")])],1):e._e()],1),t("Bottom")],1)},c=[],o=(a("d3b7"),a("ac1f"),a("3ca3"),a("841c"),a("ddb0"),a("9861"),a("88a7"),a("271a"),a("5494"),a("c781")),u=a("d174"),d=a("01ea"),p=a("71e5"),m=a("39c6"),v=a("9945"),h=v.validator,f={name:"Register",data:function(){return{email:"",email_validate:null,email_validate_tip:"必须为有效的Email,长度限3-50个字符",email_available:null,email_available_tip:"邮箱地址已被使用",pass:"",pass_validate:null,pass_validate_tip:"密码有效长度为6-50个字符",invite:"",success:null,failtips:"请求异常,请重试",homepage:d["c"],redirect:"",agreement:!1,code:"",code_text:"发送验证码",interval:0}},computed:{ready:function(){return this.email_validate&&this.email_available&&this.pass_validate&&this.agreement},login_url:function(){return"/account/login?redirect="+this.redirect},code_disabled:function(){return!this.email||!this.email_available||this.interval>0}},methods:{checkEmail:function(){var e=this;if(""==this.email)return this.email_validate=null,void(this.email_available=null);var t=h(this.email,{isEmail:!0,len:[3,50]});this.email_validate=t,t?Object(u["a"])(this.email).then((function(t){e.email_available=!t.data.data.isExist})):this.email_available=null},checkPass:function(){""!=this.pass?this.pass_validate=h(this.pass,{len:[6,50]}):this.pass_validate=null},submit:function(){var e=this;this.ready&&Object(u["d"])({email:this.email,password:this.pass,invitation:this.invite,code:this.code}).then((function(t){t.data.code?(e.success=!1,e.failtips=t.data.msg):e.success=!0})).catch((function(t){e.success=!1,e.failtips="网络请求异常,请稍后重试"}))},reset:function(){this.success=null,this.agreement=!1},checkDirect:function(){var e=new URLSearchParams(document.location.search),t=e.get("redirect");this.redirect=t||this.homepage},getCode:function(){var e=this;Object(u["c"])({email:this.email}).then((function(t){if(t.data.code){var a="";return a=99999==t.data.code?"抱歉,暂不支持该邮件服务商,请更换邮箱服务商":t.data.msg,void e.$message({message:a,type:"error"})}e.$message({message:"验证码已发送至您的邮箱",type:"success"}),e.interval=60,e.code_text=e.interval+"s";var s=setInterval((function(){e.interval--,e.code_text=e.interval+"s",e.interval<=0&&(clearInterval(s),e.code_text="发送验证码")}),1e3)}))}},filters:{},mounted:function(){this.checkDirect()},components:{CardHeader:o["a"],Msg:p["a"],Union:m["a"]}},b=f,_=(a("9bb9"),a("2877")),g=Object(_["a"])(b,r,c,!1,null,null,null),y=g.exports;s["default"].config.productionTip=!1,s["default"].use(l.a),s["default"].component("Bottom",n["a"]),new s["default"]({render:function(e){return e(y)}}).$mount("#app")},fd4d:function(e,t,a){}});