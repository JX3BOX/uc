(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2550255b"],{1546:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"e",(function(){return c})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return a})),i.d(e,"d",(function(){return n}));var s=i("41cb");function o(t){return Object(s["$cms"])().post("/api/cms/contract-author/log",t)}function r(){return Object(s["$cms"])().get("/api/cms/contract-author/log/mine")}function n(){return Object(s["$cms"])().get("/api/cms/contract-author/log/last")}function c(t){return Object(s["$cms"])().get("/api/cms/user/is_super_author/"+t)}function a(t){return Object(s["$cms"])().post("/api/cms/system/seasun/filter",t)}},d4b0:function(t,e,i){"use strict";i.r(e);i("a4d3"),i("e01a");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-dashboard m-cooperation"},[e("h2",{staticClass:"u-title"},[e("span",{staticClass:"u-title-text"},[e("i",{staticClass:"el-icon-reading"}),t._v(" 签约中心 "),t.isSuperAuthor?e("el-tag",{staticClass:"u-sign",attrs:{size:"small",type:"success"}},[t._v("签约时长："+t._s(t.signDuration)+t._s(t.signDurationType))]):t._e()],1),t.isSuperAuthor?e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-unlock"},on:{click:t.openPage}},[t._v(" 敏感词测试 ")]):t._e()],1),e("div",{staticClass:"m-cooperation-ac m-block",domProps:{innerHTML:t._s(t.data)}}),e("div",{staticClass:"m-cooperation-form m-block"},[e("h3",[t._v("【认证说明】")]),t._m(0),e("hr"),t.isSuperAuthor?e("el-alert",{attrs:{title:"签约成功！",type:"success",description:"签约为每赛季审核一次，过期后如不满足条件的将会被取消资格。 本次签约时间：".concat(t.signAt),"show-icon":"",closable:!1}}):t._e(),t.isSuperAuthor||t.checked?t._e():e("el-alert",{attrs:{title:"等待审核！",type:"warning",description:"签约申请提交成功，请耐心等待审核！","show-icon":"",closable:!1}}),t.isSuperAuthor||2!=t.checked?t._e():e("el-alert",{attrs:{title:"申请被驳回",type:"error",description:t.checkedRemark||"请填写有效的联系方式与作品，不符合要求的作品将不会受理。","show-icon":"",closable:!1}}),e("h3",[t._v("【认证信息】")]),e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px","label-position":t.position,disabled:t.isSuperAuthor||!t.checked}},[e("el-form-item",{staticClass:"u-item",attrs:{label:"昵称",prop:"nickname"}},[e("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),e("el-form-item",{staticClass:"u-item",attrs:{label:"QQ",prop:"qq"}},[e("el-input",{attrs:{placeholder:"请输入联系QQ"},model:{value:t.form.qq,callback:function(e){t.$set(t.form,"qq",e)},expression:"form.qq"}})],1),e("el-form-item",{staticClass:"u-item",attrs:{label:"电话",prop:"phone"}},[e("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),e("el-form-item",{staticClass:"u-item",attrs:{label:"社交平台",prop:"weibo"}},[e("el-input",{attrs:{placeholder:"请输入微博/B站地址"},model:{value:t.form.weibo,callback:function(e){t.$set(t.form,"weibo",e)},expression:"form.weibo"}})],1),e("el-form-item",{staticClass:"u-item",attrs:{label:"自述",prop:"description"}},[e("el-input",{attrs:{type:"textarea",rows:8,maxlength:800,placeholder:"详述自己的一些作品","show-word-limit":""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),e("el-form-item",{staticClass:"u-btns",attrs:{label:""}},[e("el-button",{staticClass:"u-submit",attrs:{type:"primary",icon:"el-icon-s-promotion",disabled:t.isSuperAuthor||t.processing},on:{click:function(e){return t.submitForm("form")}}},[t._v("提交签约申请")])],1)],1)],1)])},o=[function(){var t=this,e=t._self._c;return e("div",[e("p",[t._v("1、以下所有项目请务必填写真实有效，否则将不会处理，多次提交被拒后将不再接受申请。")]),e("p",[t._v("2、自述部分请填写魔盒内发布的有效作品链接（不少于3篇），站外链接将不会作为参考依据。")]),e("p",[t._v(" 3、当成功接受申请后，请加入Q群"),e("a",{attrs:{href:"https://jq.qq.com/?_wv=1027&k=3Hgmu6jg"}},[t._v("140129951")]),t._v("，不定期发放奖励或其它通知。 ")])])}],r=(i("14d9"),i("d3b7"),i("c9d2")),n=i("1546"),c=i("cc9a"),a=i("2ef0"),l=i("5a0c"),u=i.n(l),p={name:"cooperation",props:[],data:function(){return{position:window.innerWidth<768?"top":"left",form:{nickname:"",qq:"",phone:"",weibo:"",description:""},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],qq:[{required:!0,message:"请输入QQ号码",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],description:[{required:!0,message:"请认真填写，否则将申请将不会被通过",trigger:"blur"}]},user:r["a"],isSuperAuthor:!1,checked:-1,checkedRemark:"",logs:[],last:{},processing:!1,data:""}},computed:{log:function(){return this.logs&&this.logs[0]},signDuration:function(){if(!this.last||void 0===this.last["checked_at"])return 0;var t=u()(1e3*this.last["checked_at"]),e=u()(),i=e.diff(t,"year");return 1===this.last["checked"]&&i<1?e.diff(t,"day"):i},signDurationType:function(){return this.signDuration<1?"天":"年"},signAt:function(){return this.last["checked_at"]?u()(1e3*this.last["checked_at"]).format("YYYY-MM-DD HH:mm:ss"):""}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var i=Object(a["pick"])(e.form,["nickname","qq","phone","weibo","description"]);e.processing=!0,Object(n["a"])(i).then((function(t){e.checked=0,e.$message.success("提交申请成功，请等待管理审核。")})).catch((function(t){e.$message.error(t.message)})).finally((function(){e.processing=!1}))}}))},checkSuperUser:function(){var t,e,i,s,o=this;(null===(t=this.user)||void 0===t||null===(e=t.profile)||void 0===e?void 0:e.uid)&&Object(n["e"])(null===(i=this.user)||void 0===i||null===(s=i.profile)||void 0===s?void 0:s.uid).then((function(t){o.isSuperAuthor=t.data.data}))},loadContractAuthorLogs:function(){var t=this;Object(n["c"])().then((function(e){t.logs=e.data.data.list,t.logs&&t.logs.length&&(t.checked=t.logs[0]["checked"],t.checkedRemark=t.logs[0]["check_remark"],t.form=t.logs[0])}))},loadAc:function(){var t=this;Object(c["b"])("sign-ac").then((function(e){t.data=e}))},init:function(){this.loadContractAuthorLogs(),this.checkSuperUser(),this.loadAc(),this.loadLastLog()},openPage:function(){this.$router.push({name:"filter"})},loadLastLog:function(){var t=this;Object(n["d"])().then((function(e){t.last=e.data.data}))}},mounted:function(){this.init()}},m=p,d=(i("fc65"),i("2877")),h=Object(d["a"])(m,s,o,!1,null,null,null);e["default"]=h.exports},ec7b:function(t,e,i){},fc65:function(t,e,i){"use strict";i("ec7b")}}]);