(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c689de50"],{"39dd":function(t,e,n){},"48c0":function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-dashboard-profile m-profile"},[e("h2",{staticClass:"u-title"},[e("i",{class:t.icon}),t._v(" "+t._s(t.title)+" "),t._t("header")],2),e("tabs",{attrs:{tabs:t.tabList,"msg-change-count":t.msgChangeCount}}),t._t("default")],2)},i=[],c=(n("a9e3"),n("b0c0"),function(){var t=this,e=t._self._c;return e("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabs,(function(n){return e("el-tab-pane",{key:n.name,attrs:{name:n.name}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"u-tab-icon",class:n.icon}),t._v(" "+t._s(n.label)+" "),t.showCount?e("span",{staticClass:"u-count",class:t.count[t.countMap[n.name]]?"is-orange":""},[t._v("("+t._s(t.count[t.countMap[n.name]]||0)+")")]):t._e()])])})),1)}),o=[],s=(n("caad"),n("14d9"),n("c944")),r={name:"",props:{tabs:{type:Array,default:function(){return[]}},msgChangeCount:{type:Number,default:0}},data:function(){return{active:"",countMap:{msg:"message",letter:"letter"},count:{message:0,letter:0}}},watch:{$route:function(){this.active=this.routeName},msgChangeCount:{immediate:!0,handler:function(t){t>0&&(this.count.message=0),t<0&&this.count.message>0&&(this.count.message+=t)}}},computed:{showCount:function(){return["msg","letter"].includes(this.routeName)},routeName:function(){return this.$route.name}},methods:{changeTab:function(){this.$router.push({name:this.active})},loadCount:function(){var t=this;Object(s["b"])().then((function(e){var n,a=(null===(n=e.data)||void 0===n?void 0:n.data)||{};t.count.letter=a.letter||0})),Object(s["c"])().then((function(e){var n;t.count.message=(null===(n=e.data.data)||void 0===n?void 0:n.unread_count)||0}))}},mounted:function(){this.active=this.routeName,this.showCount&&this.loadCount()},components:{}},u=r,l=n("2877"),d=Object(l["a"])(u,c,o,!1,null,null,null),m=d.exports,f=n("5c97"),p={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return f["d"]}},msgChangeCount:{type:Number,default:0}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:m}},b=p,v=(n("dc6f"),Object(l["a"])(b,a,i,!1,null,null,null));e["a"]=v.exports},"4ec9":function(t,e,n){"use strict";n("6f48")},"5c97":function(t){t.exports=JSON.parse('{"e":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"},{"name":"medal","icon":"el-icon-medal","label":"勋章"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"}],"d":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"notice","icon":"el-icon-message","label":"通知中心"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"},{"name":"auth","icon":"el-icon-s-check","label":"账号认证"}],"b":[{"name":"mall","icon":"el-icon-shopping-bag-1","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-2","label":"系统订单"}],"c":[{"name":"msg","icon":"el-icon-message","label":"通知"},{"name":"letter","icon":"el-icon-chat-dot-square","label":"私信"}],"a":[{"name":"certification","icon":"el-icon-medal","label":"电子证书"},{"name":"holidayCard","icon":"el-icon-sugar","label":"节日贺卡"},{"name":"birthdayCard","icon":"el-icon-present","label":"生日贺卡"}]}')},"5fe2":function(t,e,n){},"6f48":function(t,e,n){"use strict";var a=n("6d61"),i=n("6566");a("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},7045:function(t,e,n){"use strict";n("5fe2")},"7f7d":function(t,e,n){"use strict";n.r(e);n("b0c0");var a=function(){var t=this,e=t._self._c;return e("uc",{staticClass:"m-dashboard-theme m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[e("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[e("div",{staticClass:"m-theme-box"},[e("div",{staticClass:"m-theme-left"},[e("div",{staticClass:"u-top"},[t.previewUrl?e("img",{staticClass:"u-img",attrs:{src:t.previewUrl,fit:"contain"}}):e("div",{staticClass:"u-no-preview"},[t._v(" 暂 无"),e("br"),t._v(" 预 览 ")])]),e("div",{staticClass:"u-bottom"},t._l(t.themeType,(function(n,a){return e("div",{key:a,staticClass:"u-type-box"},[t.isStatus(n)?e("img",{staticClass:"u-img",attrs:{src:t.getActiveImg(n),fit:"contain"},on:{click:function(e){return t.preview(n)}}}):n.statue?e("div",{staticClass:"u-no-select"},[t._v(" 暂 无"),e("br"),t._v(" 设 置 ")]):e("div",{staticClass:"u-no-select"},[t._v(" 敬 请"),e("br"),t._v(" 期 待 ")]),e("div",{staticClass:"u-title"},[t._v(t._s(n.name))])])})),0)]),e("div",{staticClass:"m-theme-right"},[e("div",{staticClass:"u-theme"},t._l(t.decoration,(function(n,a){return e("div",{key:a+n.val,staticClass:"u-decoration-list"},[e("div",{staticClass:"u-title"},[e("span",{staticClass:"u-name"},[e("i",{staticClass:"el-icon-collection-tag"}),t._v(" "+t._s(n.name))]),e("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=skin&search=".concat(n.name),target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),e("div",{staticClass:"u-decoration-item"},t._l(n.list,(function(n,i){return e("div",{key:"c"+i,staticClass:"u-picbox",attrs:{title:n.name}},[e("div",{staticClass:"u-pic",class:n.isHave?n.using?"select":"":"noHave",on:{click:function(e){return t.setStatus(a,i,n)}}},[e("el-image",{attrs:{src:t._f("showDecoration")(n),fit:"contain"}})],1),e("div",{staticClass:"u-decoration-name"},[t._v(t._s(n.text))])])})),0)])})),0)])]),e("div",{staticClass:"u-btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.decorationSubmit}},[t._v("确认")]),e("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},i=[],c=n("ade3"),o=(n("99af"),n("4de4"),n("7db0"),n("d81d"),n("14d9"),n("4e82"),n("e9f5"),n("910d"),n("f665"),n("7d54"),n("ab43"),n("a732"),n("e9c4"),n("4ec9"),n("b64b"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("48c0")),s=n("f6be"),r=n("c9d2"),u=n("65c2"),l=n("2ef0"),d=n("5c97"),m=function(t){return function(e,n){return e[t]-n[t]}},f=function(t,e,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=new Map,o=[],s=Object(l["cloneDeep"])(a),r=t.filter((function(t){return!c.has(t[e])&&c.set(t[e],1)}));return s.forEach((function(t,e){if(t.val=n,-1===i.indexOf(n)){var a=r.find((function(e){return e.type==t.type}));a&&(t.isHave=1,t.using=a.using)}o.push(t)})),o},p={name:"theme",props:[],data:function(){return{tabList:d["e"],uid:r["a"].getInfo().uid,themeType:[{name:"个人名片",type:"atcard",statue:1},{name:"主页风格",type:"homebg",statue:1},{name:"侧栏主题",type:"sidebar",statue:1},{name:"首页日历",type:"calendar",statue:1},{name:"评论皮肤",type:"comment",statue:1}],previewUrl:"",decoration:[],decorationJson:[],originalActivateName:null,back:{}}},computed:{},methods:{reset:function(){var t=Object(l["cloneDeep"])(this.back);this.previewUrl="",this.decoration=t.decoration,this.originalActivateName=t.originalActivateName},loadDecoration:function(){var t=this;Object(s["c"])().then((function(e){sessionStorage.setItem("decoration_json",JSON.stringify(e.data)),t.decorationJson=e.data,Object(s["b"])().then((function(e){var n=["atcard","homebg","sidebar","calendar","comment"],a=e.data.data.filter((function(t){return""!=t.type&&-1!=n.indexOf(t.type)}));t.decoration=t.formattingData(a,"val"),t.decoration=t.sortData(t.decoration,t.decorationJson),t.back.decoration=Object(l["cloneDeep"])(t.decoration),t.back.originalActivateName=Object(l["cloneDeep"])(t.originalActivateName)}))}))},formattingData:function(t,e){var n=this,a={},i=[],o=[],s=[{type:"atcard",text:"个人名片",sort:1,isHave:0,using:0},{type:"homebg",text:"主页风格",sort:2,isHave:0,using:0},{type:"sidebar",text:"侧栏主题",sort:3,isHave:0,using:0},{type:"calendar",text:"首页日历",sort:4,isHave:0,using:0},{type:"comment",text:"评论皮肤",sort:5,isHave:0,using:0}];t.forEach((function(t,i){var c=s.find((function(e){return e.type==t.type}));c&&(t.sort=c.sort,a[t[e]]?a[t[e]].push(t):a[t[e]]=[t],t.using&&(n.originalActivateName=t[e]))}));var r=Object(l["cloneDeep"])(this.decorationJson);return Object.keys(r).forEach((function(t,e){if(!a[t]&&1==r[t].status){o.push(t);var n=Object(l["cloneDeep"])(s),i=[];n.forEach((function(e){e.val=t,i.push(e)})),a[t]=i}})),Object.keys(a).forEach((function(t,n){var u;i.push(Object(c["a"])(Object(c["a"])(Object(c["a"])({},e,t),"name",null===(u=r[t])||void 0===u?void 0:u.desc),"list",f(a[t],"type",t,s,o).sort(m("sort"))))})),i},sortData:function(t){var e=t.filter((function(t){return t.list.some((function(t){return t.isHave}))})),n=t.filter((function(t){return!t.list.some((function(t){return t.isHave}))}));return e.reverse().concat(n.reverse())},setStatus:function(t,e,n){var a=this;if(n.isHave){var i=n.type,c=n.val;this.decoration.forEach((function(t,e){var n=t.list;n.forEach((function(t,n){t.val!=c&&t.type==i&&1==t.using&&(a.decoration[e].list[n].using=0)}))})),1==n.using?n.using=0:n.using=1}},isStatus:function(t){var e=t.type,n=!1,a=Object(l["flatten"])(this.decoration.map((function(t){return t.list})));return a.forEach((function(t){t.type==e&&1==t.using&&(n=!0)})),!!n},preview:function(t){this.previewUrl=this.getActiveImg(t)},getActiveImg:function(t){var e=t.type,n=void 0,a=Object(l["flatten"])(this.decoration.map((function(t){return t.list})));a.forEach((function(t){t.type==e&&1==t.using&&(n=t.val)}));var i="https://cdn.jx3box.com/static/dashboard/img/no.5fe91973.svg";return n?u["__cdn"]+"design/decoration/images/".concat(n,"/").concat(e,"_preview.png"):i},decorationSubmit:function(){var t=this,e=[],n="",a=Object(l["flatten"])(this.decoration.map((function(t){return t.list}))),i=a.map((function(t){return 1==t.using&&e.push(t.type),{val:t.val,using:t.using,type:t.type}}));Object(s["j"])(i).then((function(a){var i={name:n,type:e};n||(i.name=!1),localStorage.setItem("decoration_all",JSON.stringify(i)),sessionStorage.removeItem("decoration_me"+t.uid),sessionStorage.removeItem("decoration_sidebar"+t.uid),sessionStorage.removeItem("decoration_calendar"),sessionStorage.removeItem("decoration_atcard"+t.uid),t.$message({message:"主题更新成功",type:"success"})}))}},mounted:function(){this.loadDecoration()},filters:{showDecoration:function(t){return u["__cdn"]+"design/decoration/images/".concat(t.val,"/").concat(t.type,"_preview.png")}},components:{uc:o["a"]}},b=p,v=(n("7045"),n("2877")),g=Object(v["a"])(b,a,i,!1,null,null,null);e["default"]=g.exports},a732:function(t,e,n){"use strict";var a=n("23e7"),i=n("c65b"),c=n("2266"),o=n("59ed"),s=n("825a"),r=n("46c4"),u=n("2a62"),l=n("f99f"),d=l("some",TypeError);a({target:"Iterator",proto:!0,real:!0,forced:d},{some:function(t){s(this);try{o(t)}catch(a){u(this,"throw",a)}if(d)return i(d,this,t);var e=r(this),n=0;return c(e,(function(e,a){if(t(e,n++))return a()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},c944:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return o})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return r}));var a=n("41cb");function i(t){return Object(a["$next"])().get("/api/next2/userdata/messages",{params:t})}function c(t){return Object(a["$next"])().put("/api/next2/userdata/messages/read/".concat(t))}function o(){return Object(a["$next"])().put("/api/next2/userdata/messages/read")}function s(t){return Object(a["$next"])().delete("/api/next2/userdata/messages/".concat(t))}function r(){return Object(a["$next"])({mute:!0}).get("/api/next2/userdata/messages/unread_total")}function u(){return Object(a["$next"])({mute:!0}).get("/api/letter/unread/count")}function l(t){return Object(a["$next"])().get("/api/next2/comment/item/".concat(t))}},dc6f:function(t,e,n){"use strict";n("39dd")},f6be:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"j",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"l",(function(){return m})),n.d(e,"e",(function(){return f})),n.d(e,"g",(function(){return p})),n.d(e,"k",(function(){return b})),n.d(e,"a",(function(){return v})),n.d(e,"h",(function(){return g})),n.d(e,"f",(function(){return h}));n("99af");var a=n("41cb"),i=n("bc3a"),c=n.n(i),o=n("65c2");function s(t){return Object(a["$cms"])().get("/api/cms/user/decoration",{params:t})}function r(t){return Object(a["$cms"])().post("/api/cms/user/decoration",t)}function u(){var t=o["__cdn"]+"design/decoration/index.json?".concat(Date.now());return c.a.get(t)}function l(){return c.a.get("".concat(o["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function d(t,e){return Object(a["$cms"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(e,"/for/avatar"))}function m(t){return Object(a["$cms"])().put("/api/cms/user/my/avatar-frame",t)}function f(){return Object(a["$cms"])().get("/api/cms/user/config/honor")}function p(t){return Object(a["$next"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function b(t){return Object(a["$cms"])().put("/api/cms/user/honor/use/".concat(t))}function v(){return Object(a["$cms"])().delete("/api/cms/user/honor/use")}function g(t){return Object(a["$next"])({mute:!0}).get("/api/next2/user/"+t+"/medals")}function h(t){return Object(a["$cms"])().get("/api/cms/config/medal",{params:t})}}}]);