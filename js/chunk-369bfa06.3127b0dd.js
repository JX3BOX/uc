(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-369bfa06"],{"01ea":function(t,e,s){"use strict";s.d(e,"k",(function(){return o})),s.d(e,"h",(function(){return r})),s.d(e,"j",(function(){return c})),s.d(e,"g",(function(){return u})),s.d(e,"q",(function(){return l})),s.d(e,"c",(function(){return d})),s.d(e,"b",(function(){return p})),s.d(e,"m",(function(){return _})),s.d(e,"e",(function(){return f})),s.d(e,"f",(function(){return h})),s.d(e,"l",(function(){return b})),s.d(e,"r",(function(){return m})),s.d(e,"d",(function(){return g})),s.d(e,"i",(function(){return v})),s.d(e,"n",(function(){return y})),s.d(e,"o",(function(){return k})),s.d(e,"p",(function(){return C})),s.d(e,"a",(function(){return w})),s.d(e,"t",(function(){return j}));var a=s("5530"),n=s("65c2"),i=Object(a["a"])(Object(a["a"])({},n),{},{__dataPath:"https://data.jx3box.com/",__imgPath:"https://img.jx3box.com/",__iconPath:"https://icon.jx3box.com/"}),o=i.__imgPath,r=i.__dataPath,c=i.__iconPath,u=i.__cms,l=(i.__down,i.__node,i.__ossMirror,i.__ossRoot,i.__visibleMap),d=(i.default_avatar,i.__Root),p=i.__OriginRoot,_=(i.__Github,i.__Preview,i.__server),f=(i.__sso,i.__spider,i.__spider2,i.__next,i.__pay,i.__team,i.__lua,i.__dbm,i.__helperUrl,i.__os,i.__jx3,i.__cdn),h=(i.__staticPath,i.__clients),b=i.__postType,m=i.__wikiType,g=i.__appType,v=i.__gameType,y=(i.__sourceType,i.__userGroup),k=i.__userLevel,C=i.__userLevelColor,w=i.__Links,j=i.feedback;e["s"]=i},3066:function(t,e,s){"use strict";s.r(e);s("4de4"),s("e9f5"),s("910d"),s("d3b7"),s("ac1f"),s("841c");var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-dashboard-work m-dashboard-cms"},[e("div",{staticClass:"m-dashboard-work-header"},[e("h2",{staticClass:"u-title"},[t._v(t._s(t.typeLabel))]),e("a",{staticClass:"u-publish el-button el-button--primary el-button--small",attrs:{href:t.publishLink}},[e("i",{staticClass:"el-icon-document"}),t._v(" 发布作品 ")])]),e("el-input",{staticClass:"m-dashboard-work-search",attrs:{placeholder:"请输入搜索内容"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("关键词")]),e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e("div",{staticClass:"m-dashboard-work-filter"},[e("clientBy",{staticClass:"u-client",attrs:{showWujie:t.showWujie},on:{filter:t.filter}}),e("orderBy",{staticClass:"u-order",on:{filter:t.filter}})],1),e("div",{staticClass:"m-dashboard-box"},[t.data&&t.data.length?e("ul",{staticClass:"m-dashboard-box-list"},t._l(t.data,(function(a,n){return e("li",{key:n},[e("i",{staticClass:"u-icon"},["publish"==a.post_status?e("img",{attrs:{src:s("624f")}}):e("img",{attrs:{src:s("f581"),title:t._f("statusFormat")(a.post_status)}})]),e("a",{staticClass:"u-title",attrs:{target:"_blank",href:t.postLink(a.post_type,a.ID)}},[t._v(t._s(a.post_title||"无标题"))]),e("div",{staticClass:"u-desc"},[e("span",{staticClass:"u-desc-subitem"},[e("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(t._f("visibleFormat")(a.visible))+" ")]),e("time",{staticClass:"u-desc-subitem"},[e("i",{staticClass:"el-icon-finished"}),t._v(" 发布 : "+t._s(t._f("dateFormat")(a.post_date))+" ")]),e("time",{staticClass:"u-desc-subitem"},[e("i",{staticClass:"el-icon-refresh"}),t._v(" 更新 : "+t._s(t._f("dateFormat")(a.post_modified))+" ")])]),e("el-button-group",{staticClass:"u-action"},[e("el-button",{attrs:{size:"mini",icon:"el-icon-edit",title:"编辑"},on:{click:function(e){return t.edit(a.post_type,a.ID)}}}),e("el-button",{attrs:{size:"mini",icon:"el-icon-delete",title:"删除"},on:{click:function(e){return t.del(a.ID)}}})],1)],1)})),0):e("el-alert",{staticClass:"m-dashboard-box-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),e("el-pagination",{staticClass:"m-dashboard-box-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)],1)},n=[],i=(s("caad"),s("2532"),s("ccee")),o=s("85e4"),r=s("01ea"),c=s("fb92"),u=s("fa01"),l={name:"work",props:[],data:function(){return{loading:!1,data:[],total:1,page:1,per:10,search:"",order:"update",client:"std",types:Object.assign(r["l"],{joke:"剑三骚话"}),statusMap:u}},computed:{type:function(){return this.$route.params.type},typeLabel:function(){return this.types[this.type]},params:function(){return{type:this.type,page:this.page,per:this.per,title:this.search,order:this.order,client:this.client}},publishLink:function(){return"/publish/#/"+this.type},showWujie:function(){return["bps","pvp","bbs"].includes(this.type)}},watch:{type:{deep:!0,immediate:!0,handler:function(t){this.page=1}},params:{deep:!0,immediate:!0,handler:function(t){this.loadPosts()}}},methods:{loadPosts:function(){var t=this;this.loading=!0,Object(i["h"])(this.params).then((function(e){t.data=e.data.data.list,t.total=e.data.data.total})).finally((function(){t.loading=!1}))},edit:function(t,e){location.href="/publish/#/"+t+"/"+e},del:function(t){var e=this;this.$alert("确定要删除吗？","确认信息",{confirmButtonText:"确定",callback:function(s){"confirm"==s&&Object(i["a"])(t).then((function(t){e.$message({type:"success",message:"删除成功"}),location.reload()}))}})},draft:function(t,e){var s=this;Object(i["m"])(t,{publish_status:"draft"}).then((function(t){s.$message({type:"success",message:"操作成功"}),s.data[e].post_status="draft"}))},publish:function(t,e){var s=this;Object(i["m"])(t,{publish_status:"publish"}).then((function(t){s.$message({type:"success",message:"操作成功"}),s.data[e].post_status="publish"}))},postLink:function(t,e){return Object(o["getLink"])(t,e)},filter:function(t){this.page=1,this[t.type]=t.val},isSimpleType:function(t){return simpleTypes.includes(t)}},filters:{dateFormat:function(t){return Object(c["a"])(new Date(t))},typeFormat:function(t){return r["l"][t]},visibleFormat:function(t){return r["q"][~~t]},statusFormat:function(t){return u[t]}}},d=l,p=(s("3c18"),s("2877")),_=Object(p["a"])(d,a,n,!1,null,null,null);e["default"]=_.exports},"3c18":function(t,e,s){"use strict";s("6e44")},"624f":function(t,e,s){t.exports=s.p+"img/repo.e8c2e45e.svg"},"6e44":function(t,e,s){},f581:function(t,e,s){t.exports=s.p+"img/draft.37cf0833.svg"},fa01:function(t){t.exports=JSON.parse('{"publish":"公开","draft":"草稿","pending":"待审核","dustbin":"已删除"}')},fb92:function(t,e,s){"use strict";s("99af");function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.getFullYear(),i=t.getMonth()+1,o=t.getDate(),r=s?"".concat(a).concat(e).concat(n(i)).concat(e).concat(n(o)):"".concat(a).concat(e).concat(i).concat(e).concat(o);return r}function n(t){return t<10?"0"+t:t}e["a"]=a}}]);