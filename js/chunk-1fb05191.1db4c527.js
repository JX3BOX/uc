(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fb05191"],{"04ca":function(t,e,i){},"12c8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-mall-box"},[e("MallNav",{attrs:{list:t.list,isShowNav:t.isShowNav},on:{changeNav:function(e){t.isShowNav=!t.isShowNav}}}),t.selectItem?e("GoodDetail",{attrs:{good:t.selectItem||{},isShowNav:t.isShowNav}}):t._e(),e("div",{staticClass:"box-right"},[e("div",{staticClass:"cart"},[e("div",{staticClass:"cart-container"},[e("div",{staticClass:"cart-content"},[t._m(0),e("div",{staticClass:"cart-btn"},[e("div",{staticClass:"text"},[e("div",[t._v("当前购物车")]),e("div",[t._v("合计："+t._s(t.$store.getters["mallNew/checked_num"])+"件")])]),e("div",{staticClass:"btn",attrs:{id:"cartBtn"},on:{click:function(e){return t.$store.dispatch("mallNew/changeCartIsShow",!0)}}},[e("img",{staticClass:"cart-icon",attrs:{src:t.imgUrl+"cart.svg",alt:""}}),t._v(" 查看购物车 ")])]),e("div",{staticClass:"total"},[e("div",{staticClass:"total-item"},[e("div",{staticClass:"right"},[e("svg",{class:"total-icon",style:"fill: rgba(56, 56, 56, 1)",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10.392",height:"12",viewBox:"0 0 10.392 12",fill:"rgba(64, 128, 255, 1)","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M10.392 3v6l-5.196 3L0 9V3l5.196-3 5.196 3zm-5.196-.69l3.196 1.845v3.69L5.196 9.691 2 7.845v-3.69l3.196-1.846z"}})]),t._m(1)]),e("div",{staticClass:"left"},[t._v(t._s(t.$store.getters["mallNew/all_price_boxcoin"]))])]),e("div",{staticClass:"total-item"},[e("div",{staticClass:"right"},[e("svg",{class:"total-icon",style:"fill: rgba(56, 56, 56, 1)",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 10 12",fill:"#7478ed","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M10 5A5 5 0 100 5v5h3a2 2 0 104 0h3V5zM8 8V5a3 3 0 00-6 0v3h6z","fill-rule":"evenodd"}})]),t._m(2)]),e("div",{staticClass:"left"},[t._v(t._s(t.$store.getters["mallNew/all_price_points"]))])])]),e("div",{staticClass:"total-btn",on:{click:function(e){return t.$store.dispatch("mallNew/changeCartIsShow",!0)}}},[t._v("结算")])]),e("div",{staticClass:"arrow"})])]),e("Cart"),e("img",{staticClass:"girl",attrs:{src:t.imgUrl+"girl.png",alt:""}})],1),e("CartConfirm")],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"cart-text"},[t._v(" 欢迎光临魔盒积分商城！~"),e("br"),t._v("你可以"),e("span",{staticClass:"blue"},[t._v("单独兑换")]),t._v("或"),e("span",{staticClass:"orange"},[t._v("放入购物车")]),t._v("一并结算！ ")])},function(){var t=this,e=t._self._c;return e("div",[t._v("盒币"),e("span",{staticClass:"quilt-text"},[t._v("（=通宝）")])])},function(){var t=this,e=t._self._c;return e("div",[t._v("银铛"),e("span",{staticClass:"quilt-text"},[t._v("（=积分）")])])}],n=i("3835"),o=i("5530"),c=(i("7db0"),i("d81d"),i("e9f5"),i("f665"),i("7d54"),i("ab43"),i("a732"),i("4fadc"),i("d3b7"),i("159b"),i("015f")),r=i("65c2"),l=i("c9d2"),u=(i("b0c0"),i("9911"),function(){var t=this,e=t._self._c;return e("div",{class:{"is-hidden":!t.isShowNav,"m-mall-nav":!0}},[e("div",{staticClass:"left"},[t.showLottery?e("a",{staticClass:"image u-lottery-link",attrs:{href:t.lotteryLink,target:"_blank"}},[e("el-image",{attrs:{src:t.lottery,fit:t.cover}})],1):t._e(),e("div",{staticClass:"m-mall-types"},t._l(t.types,(function(a,s){return e("div",{key:s,staticClass:"u-item"},["system"!=a.key?e("div",{class:{"u-title":!0,active:t.query.category==a.key},on:{click:function(e){return t.itemLinkClick(a.key)}}},[e("i",{staticClass:"u-icon",class:a.icon}),t._v(" "+t._s(a.name)+" ")]):e("span",{staticClass:"u-title",class:t.query.category==a.key?"active":"",staticStyle:{cursor:"default"}},[e("i",{staticClass:"u-icon",class:a.icon}),t._v(" "+t._s(a.name))]),"system"!=a.key?e("div",{staticClass:"u-children-list"},t._l(a.sub_category,(function(s,n){return e("div",{key:n,class:{"u-child":!0,active:t.query.sub_category==s.key},on:{click:function(e){return t.childLinkClick(a.key,s.key)}}},[e("img",{attrs:{"svg-inline":"",src:i("3c497")("./icon_0".concat(t.query.sub_category!==s.key?"1":"2",".svg"))}}),t._v(" "+t._s(s.name)+" ")])})),0):e("div",{staticClass:"u-children-list"},t._l(a.sub_category,(function(a,s){return e("a",{key:s,staticClass:"u-child",class:t.query.sub_category==a.key||t.query.sub_category==a.key?"active":"",attrs:{href:a.link,target:a.target}},[e("img",{attrs:{"svg-inline":"",src:i("3c497")("./icon_0".concat(t.query.sub_category!==a.key?"1":"2",".svg"))}}),t._v(" "+t._s(a.name)+" ")])})),0)])})),0)]),e("div",{staticClass:"right"},[e("SearchBox"),e("div",{staticClass:"goods-list"},t._l(t.list,(function(t,i){return e("GoodItem",{key:i,attrs:{good:t}})})),1),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{layout:10==t.query.pageSize?"total,prev, pager, next":"prev, pager, next","pager-count":5,total:t.query.total,"page-size":t.query.pageSize,"current-page":t.query.pageIndex},on:{"update:pageSize":function(e){return t.$set(t.query,"pageSize",e)},"update:page-size":function(e){return t.$set(t.query,"pageSize",e)},"update:currentPage":function(e){return t.$set(t.query,"pageIndex",e)},"update:current-page":function(e){return t.$set(t.query,"pageIndex",e)},"current-change":t.handleCurrentChange}})],1)],1),t.isShowNav?e("div",{staticClass:"nav-button",on:{click:function(e){return t.$emit("changeNav")}}},[t._v(" 收起"),e("i",{staticClass:"el-icon-arrow-left"})]):t._e(),t.isShowNav?t._e():e("div",{staticClass:"nav-button",on:{click:function(e){return t.$emit("changeNav")}}},[t._v(" 展开"),e("i",{staticClass:"el-icon-arrow-right"})])])}),d=[],v=i("c14f"),m=i("1da1"),g=(i("99af"),i("6168")),h=i("305d"),f=i("6622"),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-bar"},[e("div",{staticClass:"select-box"},[e("div",{staticClass:"select-item"},[e("el-select",{attrs:{value:t.c_level,placeholder:"等级限制"},on:{change:function(e){return t.handleChange(e,"level")}}},t._l(t.level_options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"select-item"},[e("el-select",{attrs:{value:t.query.vip_limit,placeholder:"会员限制"},on:{change:function(e){return t.handleChange(e,"vip_limit")}}},t._l(t.member_options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),e("div",{staticClass:"search-input"},[e("el-input",{attrs:{value:t.query.title,placeholder:"搜索商品关键词"},on:{input:function(e){return t.handleChange(e,"title")}}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)])},_=[],y=(i("caad"),i("498a"),{name:"SearchBox",inject:["query","changeQuery"],data:function(){return{level:"",vip_limit:"",title:"",level_options:[{value:0,label:"全部"},{value:1,label:"lv.1"},{value:2,label:"lv.2"},{value:3,label:"lv.3"},{value:4,label:"lv.4"},{value:5,label:"lv.5"},{value:6,label:"lv.6"}],member_options:[{value:-1,label:"全部"},{value:1,label:"会员限制"},{value:0,label:"非会员限制"}]}},computed:{c_level:{get:function(){return null===this.query.level?"":0===this.query.level?"全部":"等级：lv."+this.query.level}}},methods:{handleChange:function(t,e){var i=t.trim(),a=["level","vip_limit","title"];a.includes(e)&&this.changeQuery(e,i)}}}),b=y,C=(i("63ce"),i("2877")),w=Object(C["a"])(b,p,_,!1,null,"2c119f6d",null),x=w.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"good-item",on:{click:function(e){return t.changeSelectItem(t.good)}}},[e("img",{staticClass:"good-item-img",attrs:{src:t.good.goods_images[0],alt:""}}),e("div",{staticClass:"right"},[e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[t._v(t._s(t.good.title))]),t.good.subtitle?e("div",{staticStyle:{width:"100%",display:"flex"}},[e("div",{staticClass:"sub-title"},[t._v(t._s(t.good.subtitle))])]):t._e(),e("div",{staticClass:"tags"},[e("div",{staticClass:"tag"},[t._v("lv."+t._s(t.getLevel(t.good.exp_limit)))]),1===t.good.vip_limit?e("div",{staticClass:"tag"},[t._v("会员专享")]):t._e()])]),e("div",{staticClass:"footer"},[e("button",{class:{button:!0,canBuy:t.good.canBuy.canBuy},attrs:{disabled:!t.good.canBuy.canBuy},on:{click:function(e){return e.stopPropagation(),t.buyGoods(t.good)}}},[t.good.canBuy.canBuy?e("div",{staticClass:"button-text canBuy"},[t.good.price_boxcoin?[e("img",{attrs:{src:t.imgUrl+"box_coin.svg",alt:""}}),t._v(t._s(t.good.price_boxcoin)+"盒币 ")]:t._e(),t.good.price_boxcoin&&t.good.price_points?[t._v(" + ")]:t._e(),t.good.price_points?[e("img",{attrs:{src:t.imgUrl+"point.svg",alt:""}}),t._v(t._s(t.good.price_points)+"积分 ")]:t._e()],2):e("div",{staticClass:"button-text"},[t._v("不满足兑换条件")])]),t.good.canBuy.canBuy?e("div",{staticClass:"icon",on:{click:function(e){return e.stopPropagation(),t.addCart.apply(null,arguments)}}},[e("img",{attrs:{src:t.imgUrl+"cart.svg",alt:""}})]):t._e()])]),e("BuyConfirm",{ref:"buyConfirm",attrs:{item:t.good}})],1)},B=[],S=i("2ef0"),$=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.isShow,width:"380px","show-close":!1,"custom-class":"m-buy-confirm"},on:{"update:visible":function(e){t.isShow=e}}},[e("div",{staticClass:"content"},[e("img",{staticStyle:{width:"120px",height:"120px"},attrs:{src:t.item.goods_images[0],alt:""}}),e("div",{staticClass:"text"},[t._v(" 确认使用"),e("span",{staticClass:"price"},[t._v(t._s(t.confirmText))]),t._v("兑换"),e("span",{staticClass:"title"},[t._v(t._s(t.item.title))]),t._v("嘛？ ")])]),e("div",{staticClass:"btn-box"},[e("el-button",{staticStyle:{width:"77px","font-size":"12px"},attrs:{round:"",size:"mini"},on:{click:function(e){t.isShow=!1}}},[t._v("取消")]),e("el-button",{staticStyle:{width:"77px","font-size":"12px"},attrs:{type:"primary",round:"",size:"mini"},on:{click:t.buyGoods}},[t._v("确定")])],1)])},j=[],O=(i("14d9"),{name:"BuyConfirm",props:{item:{type:Object,default:function(){}}},data:function(){return{isShow:!1}},computed:{confirmText:function(){return this.item.price_points&&this.item.price_boxcoin?"".concat(this.item.price_boxcoin,"盒币和").concat(this.item.price_points,"积分"):this.item.price_points?"".concat(this.item.price_points,"积分"):this.item.price_boxcoin?"".concat(this.item.price_boxcoin,"盒币"):""}},methods:{buyGoods:function(){var t=this;if(!l["a"].isLogin())return this.$message.error("请先登录"),void setTimeout((function(){l["a"].toLogin()}),1e3);this.isShow=!1;var e=this.item,i=e.category,a=e.is_virtual,s=e.id;if(a&&"virtual"==i)return this.$store.dispatch("mallNew/buyGoods",{id:s,count:1,addressId:0,remark:"虚拟商品购买"}).then((function(e){t.$confirm("购买成功，是否跳转至订单界面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e="".concat(t.root,"dashboard/mall");window.open(e)})).catch((function(){}))}));this.$router.push({name:"mall_order_new",params:{id:s}})}}}),N=O,q=(i("40bc"),Object(C["a"])(N,$,j,!1,null,"19451926",null)),I=q.exports,z={name:"GoodItem",inject:["changeSelectItem"],components:{BuyConfirm:I},data:function(){return{imgUrl:r["__cdn"]+"design/mall/"}},props:{good:{type:Object,required:!0}},methods:{getLevel:function(t){return l["a"].getLevel(t)},buyGoods:Object(S["throttle"])((function(){this.$refs.buyConfirm.isShow=!0}),2e3),addCart:Object(S["throttle"])((function(t){var e,i,a=this,s=(null===(e=this.$store.state.mall.cart)||void 0===e||null===(i=e.find((function(t){return t.goods_id===a.good.id})))||void 0===i?void 0:i.amount)||0;if(1+s>this.good.stock)return this.$message({type:"warning",message:"可兑换库存不足"});this.$store.dispatch("mallNew/addCart",{id:this.good.id,amount:1}).then((function(e){e&&a.fly(t)}))}),1e3),fly:function(t){var e="IMG"===t.target.tagName?t.target.parentElement:t.target,i=e.parentElement,a=e.getBoundingClientRect(),s=a.left,n=a.top,o=this.$store.state.mallNew.boundCart,c=o.left,r=o.top,l=e.cloneNode(!0);l.style.cssText="\n                position: fixed;\n                left: ".concat(s,"px;\n                top: ").concat(n,"px;\n                z-index: 1000;\n            "),i.appendChild(l),l.animate([{transform:"translate(".concat(c-s,"px, ").concat(r-n,"px)")}],{duration:500,easing:"ease-in-out",fill:"forwards"}),setTimeout((function(){i.removeChild(l)}),500)}}},L=z,D=(i("3e1a"),Object(C["a"])(L,k,B,!1,null,"11523852",null)),G=D.exports,M={name:"MallNav",components:{SearchBox:x,GoodItem:G},data:function(){return{isShow:!0,types:f,showLottery:!1,exitList:[]}},inject:["query","changeQuery"],props:{list:{type:Array,required:!0},isShowNav:{type:Boolean,required:!0}},computed:{lotteryLink:function(){return r["__Root"]+"vip/lottery"},lottery:function(){return r["__cdn"]+"design/event/lottery/lottery.png"}},mounted:function(){this.loadConfig(),this.getDecoration()},methods:{getDecoration:function(){var t=this;return Object(m["a"])(Object(v["a"])().m((function e(){var i,a,s,n,o,c,r;return Object(v["a"])().w((function(e){while(1)switch(e.n){case 0:if(null===(i=l["a"].profile)||void 0===i||!i.uid){e.n=3;break}return e.n=1,Object(h["c"])({user_id:l["a"].profile.uid});case 1:return n=e.v,e.n=2,Object(h["c"])({user_id:l["a"].profile.uid,type:"emotion"});case 2:o=e.v,c=(null===(a=n.data)||void 0===a?void 0:a.data)||[],r=(null===(s=o.data)||void 0===s?void 0:s.data)||[],t.exitList=c.concat(r);case 3:return e.a(2)}}),e)})))()},itemLinkClick:function(t){this.changeQuery(["category","sub_category"],[t,""])},childLinkClick:function(t,e){this.changeQuery(["category","sub_category"],[t,e])},handleCurrentChange:function(t){this.changeQuery("pageIndex",t,!0)},loadConfig:function(){var t=this;Object(g["b"])({key:"mall_lottery_pic"}).then((function(e){t.showLottery="0"!=(null===e||void 0===e?void 0:e.val)}))}}},E=M,T=(i("7ff3"),Object(C["a"])(E,u,d,!1,null,"112341d6",null)),U=T.exports,R=function(){var t=this,e=t._self._c;return e("div",{staticClass:"good-detail",class:{"without-nav":!t.isShowNav}},[e("div",{class:{"canBuy-text":!0,canBuy:t.good.canBuy.canBuy}},[t._v(" "+t._s(t.good.canBuy.canBuy?"— 当前商品 · 可兑换 —":"— 当前商品 · 不满足兑换条件 —")+" ")]),e("div",{staticClass:"title-card"},[e("div",{staticClass:"title"},[t._v(t._s(t.good.title))]),t.apply[t.goodInfo.category]?e("div",{staticClass:"apply"},[t._v("应用场景："+t._s(t.apply[t.goodInfo.category]))]):t._e()]),e("div",{staticClass:"card"},[t.goodInfo.img?e("div",{staticClass:"skeleton-container"},[e("Skeleton",{attrs:{category:t.goodInfo.category,img:t.goodInfo.img}})],1):e("img",{staticStyle:{width:"400px",height:"400px"},attrs:{src:t.good.goods_images[0]}})]),e("div",{staticClass:"buy-detail"},[e("div",{staticClass:"detail-card"},[e("div",{staticClass:"condition"},[e("div",{staticClass:"condition-item",class:{canBuy:t.good.canBuy.level}},[t._v(" 所需等级：lv."+t._s(t.good.canBuy.user_level)+" "),t.good.canBuy.level?e("i",{staticClass:"el-icon-circle-check"}):e("i",{staticClass:"el-icon-circle-close"})]),e("div",{staticClass:"condition-item",class:{canBuy:t.good.canBuy.vip_limit}},[t._v(" 会员专属 "),t.good.canBuy.vip_limit?e("i",{staticClass:"el-icon-circle-check"}):e("i",{staticClass:"el-icon-circle-close"})]),t.good.price_boxcoin?e("div",{staticClass:"condition-item",class:{canBuy:t.good.canBuy.box_coin}},[t._v(" 所需盒币："+t._s(t.good.price_boxcoin)+" "),t.good.canBuy.box_coin?e("i",{staticClass:"el-icon-circle-check"}):e("i",{staticClass:"el-icon-circle-close"})]):t._e(),t.good.price_points?e("div",{staticClass:"condition-item",class:{canBuy:t.good.canBuy.points}},[t._v(" 所需积分："+t._s(t.good.price_points)+" "),t.good.canBuy.points?e("i",{staticClass:"el-icon-circle-check"}):e("i",{staticClass:"el-icon-circle-close"})]):t._e()]),e("div",{staticClass:"buy-time",class:{canBuy:t.good.canBuy.buy_time}},[t._v(" 可兑换时间："+t._s(t.good.start_sell_time)+" ~ "+t._s(t.good.end_sell_time)+t._s(t.good.canBuy.buy_time?"":"(不在兑换期内)")+" ")]),e("div",{staticClass:"buttons"},[e("button",{staticClass:"button add-cart",attrs:{disabled:!t.good.canBuy.canBuy},on:{click:t.addCart}},[e("img",{attrs:{src:t.imgUrl+"cart-fill.svg",alt:""}}),t._v(" 加购 ")]),e("button",{staticClass:"button buy",attrs:{disabled:!t.good.canBuy.canBuy},on:{click:t.buyGoods}},[t.good.price_boxcoin?[e("img",{attrs:{src:t.imgUrl+"box_coin_fill.svg",alt:""}}),t._v(t._s(t.good.price_boxcoin)+"盒币 ")]:t._e(),t.good.price_boxcoin&&t.good.price_points?[t._v(" + ")]:t._e(),t.good.price_points?[e("img",{attrs:{src:t.imgUrl+"point.svg",alt:""}}),t._v(t._s(t.good.price_points)+"积分 ")]:t._e()],2),e("button",{staticClass:"button like",on:{click:function(e){return t.$refs.like.addLike()}}},[e("img",{attrs:{src:t.imgUrl+"like.svg",alt:""}}),e("Like",{ref:"like",staticClass:"like",attrs:{postId:t.id,postType:"mall"}})],1)])]),t.good.describe?e("div",{staticClass:"good-comment",domProps:{innerHTML:t._s(t.good.describe)}}):t._e()]),e("BuyConfirm",{ref:"buyConfirm",attrs:{item:t.good}})],1)},V=[],A=i("8339"),Q=i("4474"),H={name:"GoodDetail",components:{Skeleton:Q["a"],Like:A["a"],BuyConfirm:I},props:{good:{type:Object,required:!0},isShowNav:{type:Boolean,required:!0}},data:function(){return{imgUrl:r["__cdn"]+"design/mall/",apply:{palu:"魔盒论坛列表页",avatar:"头像框",emoticon:"表情包",comment:"评论皮肤",sidebr:"侧边栏主题",atcard:"个人名片",calendar:"首页日历",homebg:"主页风格"}}},computed:{id:function(){return this.good.id},goodInfo:function(){if(this.good&&"virtual"===this.good.category){if("skin"===this.good.sub_category)return{category:this.good.virtual_stock_item_details.category,img:"https://cdn.jx3box.com/design/decoration/images/".concat(this.good.remark,"/").concat(this.good.virtual_stock_item_details.category,".png")};if("palu"===this.good.sub_category)return{category:"palu",img:"https://cdn.jx3box.com/design/decoration/palu/".concat(this.good.remark,".png")}}return{category:this.good.sub_category}}},methods:{buyGoods:Object(S["throttle"])((function(){this.$refs.buyConfirm.isShow=!0}),2e3),addCart:Object(S["throttle"])((function(t){var e,i,a=this,s=(null===(e=this.$store.state.mall.cart)||void 0===e||null===(i=e.find((function(t){return t.goods_id===a.good.id})))||void 0===i?void 0:i.amount)||0;if(1+s>this.good.stock)return this.$message({type:"warning",message:"可兑换库存不足"});this.$store.dispatch("mallNew/addCart",{id:this.good.id,amount:1}).then((function(e){e&&a.fly(t)}))}),1e3),fly:function(t){var e="IMG"===t.target.tagName?t.target.parentElement:t.target,i=e.parentElement,a=e.getBoundingClientRect(),s=a.left,n=a.top,o=this.$store.state.mallNew.boundCart,c=o.left,r=o.top,l=e.cloneNode(!0);l.style.cssText="\n                position: fixed;\n                left: ".concat(s,"px;\n                top: ").concat(n,"px;\n                z-index: 1000;\n            "),i.appendChild(l),l.animate([{transform:"translate(".concat(c-s,"px, ").concat(r-n,"px) scale(0.3)")}],{duration:500,easing:"ease-in-out",fill:"forwards"}),setTimeout((function(){i.removeChild(l)}),500)}}},P=H,Y=(i("c8be"),Object(C["a"])(P,R,V,!1,null,"a7dae29c",null)),J=Y.exports,F=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cart",class:{show:t.show}},[e("div",{staticClass:"cart-title"},[t._v(" 购物车清单"),e("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$store.dispatch("mallNew/changeCartIsShow",!1)}}})]),e("div",{staticClass:"dashed"}),e("div",{staticClass:"cart-header"},[e("div",{staticClass:"u-check-all-box"},[e("div",{staticClass:"u-check-all",class:{checked:t.isAll},on:{click:t.allChange}},[e("i",{staticClass:"el-icon-check"})]),e("div",{staticClass:"box-text"},[t._v(" 全选 ("+t._s(t.$store.getters["mallNew/checked_num"])+"/"+t._s(t.$store.getters["mallNew/num"])+") ")])]),e("el-button",{attrs:{type:"info",plain:"",size:"mini"},on:{click:t.handleClear}},[t._v("清空")])],1),e("div",{staticClass:"m-cart-items"},t._l(t.list,(function(i){return e("div",{key:i.id,staticClass:"m-cart-item",class:{cannotBuy:0===i.can_buy}},[e("div",{staticClass:"top"},[e("div",{staticClass:"c-check",class:{checked:i.checked,cannotCheck:0===i.can_buy},on:{click:function(e){return t.itemChecked(i)}}},[e("i",{staticClass:"el-icon-check"})]),e("img",{staticClass:"c-img",attrs:{src:i.goods.goods_images[0],alt:""}}),e("div",{staticClass:"c-info"},[e("div",{staticClass:"c-name"},[t._v(t._s(i.goods.title))]),e("div",{staticClass:"c-goods-info"},["virtual"===i.goods.category&&"palu"===i.goods.sub_category?e("el-input-number",{attrs:{max:i.goods.stock,min:1},on:{change:function(e){return t.itemChange(i,e)}},model:{value:i.amount,callback:function(e){t.$set(i,"amount",e)},expression:"item.amount"}}):t._e(),i.goods.price_points?e("span",{staticStyle:{color:"rgba(116, 120, 237, 1)"}},[e("svg",{class:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 10 12",fill:"#7478ed","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M10 5A5 5 0 100 5v5h3a2 2 0 104 0h3V5zM8 8V5a3 3 0 00-6 0v3h6z","fill-rule":"evenodd"}})]),t._v(" "+t._s(i.goods.price_points)+" ")]):t._e(),i.goods.price_boxcoin?e("span",{staticStyle:{color:"rgba(42, 130, 228, 1)"}},[e("svg",{class:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10.392",height:"12",viewBox:"0 0 10.392 12",fill:"rgba(64, 128, 255, 1)","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M10.392 3v6l-5.196 3L0 9V3l5.196-3 5.196 3zm-5.196-.69l3.196 1.845v3.69L5.196 9.691 2 7.845v-3.69l3.196-1.846z"}})]),t._v(" "+t._s(i.goods.price_boxcoin)+" ")]):t._e()],1)]),e("div",{staticClass:"delete",on:{click:function(e){return t.$store.dispatch("mallNew/deleteCartGoods",i.id)}}},[e("i",{staticClass:"el-icon-close"})])]),0===i.can_buy?e("div",{staticClass:"bottom"},[t._v(t._s(i.cannot_buy_reason))]):t._e()])})),0),e("div",{staticClass:"user-info"},[e("div",{staticStyle:{"font-size":"12px",color:"rgba(56, 56, 56, 1)","text-align":"center",height:"18px","line-height":"18px"}},[t._v(" "+t._s(t.name)+" "+t._s(t.time)+" ")]),e("img",{staticClass:"icon",attrs:{src:"".concat(t.imgUrl,"bar-code.svg"),alt:"","svg-inline":""}})]),e("div",{staticClass:"dashed"}),e("div",{staticClass:"total-price"},[e("div",{staticStyle:{"font-size":"12px",color:"rgba(56, 56, 56, 1)"}},[t._v("合计：")]),e("div",{staticClass:"total"},[e("div",{staticClass:"total-item"},[e("div",{staticClass:"right"},[e("svg",{style:"fill: rgba(56, 56, 56, 1)",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10.392",height:"12",viewBox:"0 0 10.392 12",fill:"rgba(64, 128, 255, 1)","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M10.392 3v6l-5.196 3L0 9V3l5.196-3 5.196 3zm-5.196-.69l3.196 1.845v3.69L5.196 9.691 2 7.845v-3.69l3.196-1.846z"}})]),t._m(0)]),e("div",{staticClass:"left"},[t._v(t._s(t.$store.getters["mallNew/all_price_boxcoin"]))])]),e("div",{staticClass:"total-item"},[e("div",{staticClass:"right"},[e("svg",{style:"fill: rgba(56, 56, 56, 1)",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 10 12",fill:"#7478ed","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M10 5A5 5 0 100 5v5h3a2 2 0 104 0h3V5zM8 8V5a3 3 0 00-6 0v3h6z","fill-rule":"evenodd"}})]),t._m(1)]),e("div",{staticClass:"left"},[t._v(t._s(t.$store.getters["mallNew/all_price_points"]))])])]),e("div",{staticClass:"total-btn",on:{click:function(e){return t.$store.dispatch("mallNew/changeCartConfirmIsShow",!0)}}},[t._v("结算")])])])},W=[function(){var t=this,e=t._self._c;return e("div",[t._v("盒币"),e("span",[t._v("（=通宝）")])])},function(){var t=this,e=t._self._c;return e("div",[t._v("银铛"),e("span",[t._v("（=积分）")])])}],K=(i("d866"),i("0541"),i("c1df")),X=i.n(K),Z={name:"Cart",data:function(){return{imgUrl:r["__cdn"]+"design/mall/",list:[],name:localStorage.getItem("name"),time:X()().format("YYYY/MM/DD HH:mm")}},watch:{cart:{handler:function(t){this.list=t.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{checked:Object.hasOwn(t,"checked")?!!t.can_buy&&t.checked:!!t.can_buy})}))},deep:!0,immediate:!0},show:{handler:function(t){t&&(this.time=X()().format("YYYY/MM/DD HH:mm"))}}},computed:{show:function(){return this.$store.state.mallNew.cartIsShow},cart:function(){return this.$store.state.mallNew.cart},isAll:function(){return this.list.every((function(t){return t.checked}))}},mounted:function(){this.$store.commit("mallNew/toState",{cart:this.list})},methods:{allChange:function(){var t=this.isAll;this.list.forEach((function(e){e.checked=e.can_buy&&!t})),this.$store.commit("mallNew/toState",{cart:this.list})},handleClear:function(){this.$store.dispatch("mallNew/clearCart")},itemChecked:function(t){this.list.forEach((function(e){e.id===t.id&&(e.checked=!e.checked)})),this.$store.commit("mallNew/toState",{cart:this.list})},itemChange:Object(S["debounce"])((function(t,e){this.$store.dispatch("mallNew/updateGoodsNum",{shopping_item_id:t.id,amount:e})}),500)}},tt=Z,et=(i("85d5"),Object(C["a"])(tt,F,W,!1,null,"2fb6b2a2",null)),it=et.exports,at=i("41cb");i("bc3a");function st(t){return Object(at["$cms"])().get("/api/cms/user/decoration",{params:t})}var nt=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.$store.state.mallNew.cartConfirmIsShow,width:"412px","show-close":!1,"custom-class":"m-cart-confirm"},on:{"update:visible":function(e){return t.$set(t.$store.state.mallNew,"cartConfirmIsShow",e)}}},[e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[t._v("购物车结算")]),e("div",{staticClass:"text"},[t._v(" 确认使用"),e("span",{staticClass:"price boxcoin"},[t._v(t._s(t.$store.getters["mallNew/all_price_boxcoin"]||0)+"盒币")]),t._v("+"),e("span",{staticClass:"price points"},[t._v(t._s(t.$store.getters["mallNew/all_price_points"]||0)+"积分")]),t._v("兑换"),e("span",{staticClass:"prrice"},[t._v("勾选的"),e("span",{staticClass:"num"},[t._v(t._s(t.$store.getters["mallNew/checked_num"]||0))]),t._v("件商品")]),t._v("吗？ ")])]),e("div",{staticClass:"btn-box"},[e("el-button",{staticStyle:{width:"77px","font-size":"12px"},attrs:{round:"",size:"mini"},on:{click:function(e){return t.$store.dispatch("mallNew/changeCartConfirmIsShow",!1)}}},[t._v("再想想")]),e("el-button",{staticStyle:{width:"77px","font-size":"12px","background-color":"rgba(255, 163, 43, 1)",color:"#fff"},attrs:{round:"",size:"mini"},on:{click:t.buyGoods}},[t._v("确认")])],1)])},ot=[],ct={name:"CartConfirm",props:{item:{type:Object,default:function(){}}},methods:{buyGoods:function(){this.$store.dispatch("mallNew/changeCartConfirmIsShow",!1),this.$router.push({name:"mall_batch_order_new"})}}},rt=ct,lt=(i("f6b6e"),Object(C["a"])(rt,nt,ot,!1,null,"91f0e922",null)),ut=lt.exports,dt={name:"MallList",data:function(){return{imgUrl:r["__cdn"]+"design/mall/",goodsList:[],selectItem:null,query:{pageSize:10,pageIndex:1,level:null,vip_limit:null,title:"",category:"",sub_category:"",total:0},isShowNav:!0,myVirtualItems:[],id:this.$route.params.id}},watch:{list:{handler:function(t){var e=this;t.length>0&&(this.id?(this.selectItem=this.list.find((function(t){return t.id==e.id})),this.id=null):this.selectItem=t[0])}}},computed:{asset:function(){return this.$store.state.mallNew.asset},list:function(){var t,e=this;return null===(t=this.goodsList)||void 0===t?void 0:t.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{canBuy:e.checkCanBuy(t),isHave:e.isHaveGood(t)})}))}},provide:function(){return{query:this.query,changeQuery:this.changeQuery,changeSelectItem:this.changeSelectItem}},mounted:function(){this.getBoundCart(),window.addEventListener("resize",this.getBoundCart)},created:function(){var t=this;this.loadDecoration(),this.handleResize(),window.addEventListener("resize",this.handleResize),Object.entries(this.$route.query).forEach((function(e){var i=Object(n["a"])(e,2),a=i[0],s=i[1];"search"===a&&(t.query.title=s),s&&(t.query[a]=s)})),this.loadData()},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize),window.removeEventListener("resize",this.getBoundCart)},methods:{buildQuery:function(){var t={};for(var e in this.query){var i,a;if(void 0!==this.query[e]&&""!==this.query[e]&&null!==this.query[e])if("level"===e&&0!=this.query.level)t.exp_limit=null===(i=r["__userLevel"][this.query.level])||void 0===i?void 0:i[0],t.exp_limit_max=(null===(a=r["__userLevel"][this.query.level])||void 0===a?void 0:a[1])-1||"";else t[e]=this.query[e]}return delete t.total,t},isHaveGood:function(t){return this.myVirtualItems.some((function(e){return"virtual"===t.category&&"palu"!==t.sub_category&&e.type===t.sub_category&&e.val===t.remark}))},loadDecoration:function(){var t=this;st().then((function(e){var i=e.data.data;t.myVirtualItems=i}))},loadData:function(){var t=this,e=this.buildQuery();Object(c["e"])(e).then((function(e){var i,a;t.goodsList=(null===(i=e.data.data)||void 0===i?void 0:i.list)||[],t.query.total=(null===(a=e.data.data.page)||void 0===a?void 0:a.total)||0,e.data.data.page&&(t.query.pageIndex=e.data.data.page.index,t.query.pageSize=e.data.data.page.pageSize)}))},changeQuery:function(t,e,i){var a=this;Array.isArray(t)?t.forEach((function(t,i){a.query[t]=e[i]})):this.query[t]=e,i||(this.query.pageIndex=1),this.loadData()},checkCanBuy:function(t){var e={canBuy:!0,vip_limit:!0,box_coin:!0,points:!0,level:!0,user_level:l["a"].getLevel(t.exp_limit),buy_time:!0},i=(new Date).getTime();return 1!==t.vip_limit||l["a"]._isPRO(this.asset)||(e.canBuy=!1,e.vip_limit=!1),this.asset.box_coin<t.price_boxcoin&&(e.canBuy=!1,e.box_coin=!1),this.asset.points<t.price_points&&(e.canBuy=!1,e.points=!1),this.asset.experience<t.exp_limit&&(e.canBuy=!1,e.level=!1),(i<new Date(t.start_sell_time).getTime()||i>new Date(t.end_sell_time).getTime())&&(e.canBuy=!1,e.buy_time=!1),e},getData:function(t){var e=this;Object(c["d"])(t.id).then((function(t){t.data.data.canBuy=e.checkCanBuy(t.data.data),t.data.data.isHave=e.isHaveGood(t.data.data),e.selectItem=t.data.data||{}}))},changeSelectItem:function(t){var e;t.id!==(null===(e=this.selectItem)||void 0===e?void 0:e.id)&&this.getData(t)},handleResize:function(){var t=window.innerWidth<1550?5:10;t!==this.query.pageSize&&(this.query.pageSize=t,this.loadData())},getBoundCart:Object(S["debounce"])((function(){var t=document.getElementById("cartBtn").getBoundingClientRect(),e=t.left,i=t.top;this.$store.dispatch("mallNew/setBoundCart",{left:e+10,top:i})}),500)},components:{MallNav:U,GoodDetail:J,Cart:it,CartConfirm:ut}},vt=dt,mt=(i("a8f4"),Object(C["a"])(vt,a,s,!1,null,null,null));e["default"]=mt.exports},"305d":function(t,e,i){"use strict";i.d(e,"e",(function(){return c})),i.d(e,"g",(function(){return r})),i.d(e,"i",(function(){return l})),i.d(e,"h",(function(){return u})),i.d(e,"f",(function(){return d})),i.d(e,"c",(function(){return v})),i.d(e,"d",(function(){return m})),i.d(e,"b",(function(){return g})),i.d(e,"a",(function(){return h}));var a=i("41cb"),s=i("bc3a"),n=i.n(s),o=i("65c2");function c(t){return Object(a["$cms"])().get("/api/cms/posts",{params:t})}function r(t){return Object(a["$cms"])().get("/api/cms/user/".concat(t,"/info"),{params:{nocache:1}})}function l(t){return Object(a["$cms"])().get("/api/cms/app/pz",{params:t})}function u(t){return Object(a["$cms"])().get("/api/cms/post/jokes",{params:t})}function d(t){return Object(a["$cms"])().get("/api/cms/post/emotions",{params:t})}function v(t){return Object(a["$cms"])().get("/api/cms/user/decoration",{params:t})}function m(){var t=o["__cdn"]+"design/decoration/index.json?".concat(Math.random());return n.a.get(t)}function g(t){return Object(a["$cms"])().get("/api/cms/dbm/pkg",{params:t})}function h(t){return Object(a["$team"])().get("/api/team/team-certification-record/item/".concat(t))}},3835:function(t,e,i){"use strict";function a(t){if(Array.isArray(t))return t}i.d(e,"a",(function(){return c}));i("a4d3"),i("e01a"),i("d28b"),i("14d9"),i("d3b7"),i("3ca3"),i("ddb0");function s(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,s,n,o,c=[],r=!0,l=!1;try{if(n=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;r=!1}else for(;!(r=(a=n.call(i)).done)&&(c.push(a.value),c.length!==e);r=!0);}catch(t){l=!0,s=t}finally{try{if(!r&&null!=i["return"]&&(o=i["return"](),Object(o)!==o))return}finally{if(l)throw s}}return c}}var n=i("06c5");i("d9e2");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return a(t)||s(t,e)||Object(n["a"])(t,e)||o()}},"3c497":function(t,e,i){var a={"./icon_01.svg":"9997","./icon_02.svg":"9ceb"};function s(t){var e=n(t);return i(e)}function n(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=n,t.exports=s,s.id="3c497"},"3e1a":function(t,e,i){"use strict";i("8b5c")},"40bc":function(t,e,i){"use strict";i("dbb3")},4539:function(t,e,i){},"498a":function(t,e,i){"use strict";var a=i("23e7"),s=i("58a8").trim,n=i("c8d2");a({target:"String",proto:!0,forced:n("trim")},{trim:function(){return s(this)}})},"4fadc":function(t,e,i){"use strict";var a=i("23e7"),s=i("6f53").entries;a({target:"Object",stat:!0},{entries:function(t){return s(t)}})},6168:function(t,e,i){"use strict";i.d(e,"c",(function(){return o})),i.d(e,"b",(function(){return c})),i.d(e,"a",(function(){return r}));var a=i("c14f"),s=i("1da1"),n=i("41cb");function o(t,e){return Object(n["$cms"])().post("/api/cms/user/my/meta?key=".concat(t),e)}function c(t){return Object(n["$cms"])().get("/api/cms/config",{params:t}).then((function(t){return t.data.data}))}function r(t){return l.apply(this,arguments)}function l(){return l=Object(s["a"])(Object(a["a"])().m((function t(e){var i,s,o;return Object(a["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Object(n["$cms"])().get("/api/cms/breadcrumb/".concat(e));case 1:return o=t.v,t.a(2,(null===o||void 0===o||null===(i=o.data)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.html)||"")}}),t)}))),l.apply(this,arguments)}},"63ce":function(t,e,i){"use strict";i("04ca")},6622:function(t){t.exports=JSON.parse('[{"name":"全部","key":"","icon":"el-icon-menu"},{"name":"实物","key":"entity","icon":"el-icon-s-goods","sub_category":[{"name":"定制纪念品","key":"jdt"},{"name":"其它","key":"other"}]},{"name":"虚拟","key":"virtual","icon":"el-icon-s-ticket","sub_category":[{"name":"主题装扮","key":"skin"},{"name":"魔卡","key":"palu"},{"name":"头像框","key":"avatar"},{"name":"表情包","key":"emotion"}]},{"name":"系统","key":"system","icon":"el-icon-s-finance","sub_category":[{"name":"专业版","key":"vip","link":"/vip/premium","target":"_blank"},{"name":"改名卡","key":"rename2","link":"/vip/rename","target":"_blank"},{"name":"铭牌","key":"namespace2","link":"/vip/namespace","target":"_blank"},{"name":"点月卡","key":"dianyueka","link":"https://charge.xoyo.com/pay?item=jx3&__from=jx3box","target":"_blank"}]}]')},"6f53":function(t,e,i){"use strict";var a=i("83ab"),s=i("d039"),n=i("e330"),o=i("e163"),c=i("df75"),r=i("fc6a"),l=i("d1e7").f,u=n(l),d=n([].push),v=a&&s((function(){var t=Object.create(null);return t[2]=2,!u(t,2)})),m=function(t){return function(e){var i,s=r(e),n=c(s),l=v&&null===o(s),m=n.length,g=0,h=[];while(m>g)i=n[g++],a&&!(l?i in s:u(s,i))||d(h,t?[i,s[i]]:s[i]);return h}};t.exports={entries:m(!0),values:m(!1)}},7486:function(t,e,i){},"7ff3":function(t,e,i){"use strict";i("e921")},8529:function(t,e,i){},"85d5":function(t,e,i){"use strict";i("8770")},8770:function(t,e,i){},"8b5c":function(t,e,i){},9997:function(t,e,i){t.exports=i.p+"img/icon_01.00399bff.svg"},"9ceb":function(t,e,i){t.exports=i.p+"img/icon_02.d9bfe3db.svg"},a732:function(t,e,i){"use strict";var a=i("23e7"),s=i("c65b"),n=i("2266"),o=i("59ed"),c=i("825a"),r=i("46c4"),l=i("2a62"),u=i("f99f"),d=u("some",TypeError);a({target:"Iterator",proto:!0,real:!0,forced:d},{some:function(t){c(this);try{o(t)}catch(a){l(this,"throw",a)}if(d)return s(d,this,t);var e=r(this),i=0;return n(e,(function(e,a){if(t(e,i++))return a()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},a8f4:function(t,e,i){"use strict";i("7486")},c8be:function(t,e,i){"use strict";i("4539")},c8d2:function(t,e,i){"use strict";var a=i("5e77").PROPER,s=i("d039"),n=i("5899"),o="​᠎";t.exports=function(t){return s((function(){return!!n[t]()||o[t]()!==o||a&&n[t].name!==t}))}},dbb3:function(t,e,i){},e921:function(t,e,i){},f6b6e:function(t,e,i){"use strict";i("8529")}}]);