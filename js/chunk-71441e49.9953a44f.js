(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71441e49"],{"00fd":function(t,e,n){var o=n("9e69"),i=Object.prototype,a=i.hasOwnProperty,r=i.toString,c=o?o.toStringTag:void 0;function s(t){var e=a.call(t,c),n=t[c];try{t[c]=void 0;var o=!0}catch(s){}var i=r.call(t);return o&&(e?t[c]=n:delete t[c]),i}t.exports=s},"03dd":function(t,e,n){var o=n("eac5"),i=n("57a5"),a=Object.prototype,r=a.hasOwnProperty;function c(t){if(!o(t))return i(t);var e=[];for(var n in Object(t))r.call(t,n)&&"constructor"!=n&&e.push(n);return e}t.exports=c},"0644":function(t,e,n){var o=n("3818"),i=1,a=4;function r(t){return o(t,i|a)}t.exports=r},"07c7":function(t,e){function n(){return!1}t.exports=n},"087d":function(t,e){function n(t,e){var n=-1,o=e.length,i=t.length;while(++n<o)t[i+n]=e[n];return t}t.exports=n},"0b07":function(t,e,n){var o=n("34ac"),i=n("3698");function a(t,e){var n=i(t,e);return o(n)?n:void 0}t.exports=a},"0d24":function(t,e,n){(function(t){var o=n("2b3e"),i=n("07c7"),a=e&&!e.nodeType&&e,r=a&&"object"==typeof t&&t&&!t.nodeType&&t,c=r&&r.exports===a,s=c?o.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||i;t.exports=l}).call(this,n("62e4")(t))},"0f0f":function(t,e,n){var o=n("8eeb"),i=n("9934");function a(t,e){return t&&o(e,i(e),t)}t.exports=a},1041:function(t,e,n){var o=n("8eeb"),i=n("a029");function a(t,e){return o(t,i(t),e)}t.exports=a},1290:function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},1310:function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},1368:function(t,e,n){var o=n("da03"),i=function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function a(t){return!!i&&i in t}t.exports=a},"1a2d0":function(t,e,n){var o=n("42a2"),i=n("1310"),a="[object Map]";function r(t){return i(t)&&o(t)==a}t.exports=r},"1a8c":function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},"1bac":function(t,e,n){var o=n("7d1f"),i=n("a029"),a=n("9934");function r(t){return o(t,a,i)}t.exports=r},"1cec":function(t,e,n){var o=n("0b07"),i=n("2b3e"),a=o(i,"Promise");t.exports=a},"1efc":function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},"1fc8":function(t,e,n){var o=n("4245");function i(t,e){var n=o(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}t.exports=i},"240a":function(t,e,n){},2474:function(t,e,n){var o=n("2b3e"),i=o.Uint8Array;t.exports=i},2478:function(t,e,n){var o=n("4245");function i(t){return o(this,t).get(t)}t.exports=i},2524:function(t,e,n){var o=n("6044"),i="__lodash_hash_undefined__";function a(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=o&&void 0===e?i:e,this}t.exports=a},"253c":function(t,e,n){var o=n("3729"),i=n("1310"),a="[object Arguments]";function r(t){return i(t)&&o(t)==a}t.exports=r},"25bf":function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"f",(function(){return r})),n.d(e,"c",(function(){return u}));n("99af");var o=n("41cb");function i(t){return Object(o["$cms"])()({method:"GET",url:"/api/cms/post/collection/mine",params:t})}function a(t){return Object(o["$cms"])().post("/api/cms/post/collection",t)}function r(t,e){return Object(o["$cms"])().put("/api/cms/post/collection/".concat(t),e)}function c(t){return Object(o["$cms"])().delete("/api/cms/post/collection/".concat(t))}function s(t){return Object(o["$cms"])().post("/api/cms/post/".concat(t.post_type,"-").concat(t.post_id,"/append-to-collection/").concat(t.post_collection),{title:t.post_title})}function u(t){return Object(o["$cms"])()({method:"GET",url:"/api/cms/post/collection/".concat(t,"/raw")})}},2649:function(t,e,n){},"28c9":function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},"29f3":function(t,e){var n=Object.prototype,o=n.toString;function i(t){return o.call(t)}t.exports=i},"2b3e":function(t,e,n){var o=n("585a"),i="object"==typeof self&&self&&self.Object===Object&&self,a=o||i||Function("return this")();t.exports=a},"2d7c":function(t,e){function n(t,e){var n=-1,o=null==t?0:t.length,i=0,a=[];while(++n<o){var r=t[n];e(r,n,t)&&(a[i++]=r)}return a}t.exports=n},"2dcb":function(t,e,n){var o=n("91e9"),i=o(Object.getPrototypeOf,Object);t.exports=i},"2e06":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));n("99af");var o=n("41cb");function i(t,e){return Object(o["$next"])().get("/api/next2/userdata/commit-history/content-meta/".concat(t,"/commit/history"),{params:e})}function a(t,e){return Object(o["$next"])().get("/api/next2/userdata/commit-history/content-meta/".concat(t,"/commit/by-id/").concat(e))}},"2ee1":function(t,e,n){"use strict";n("2649")},"2fcc":function(t,e){function n(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}t.exports=n},"30c9":function(t,e,n){var o=n("9520"),i=n("b218");function a(t){return null!=t&&i(t.length)&&!o(t)}t.exports=a},"32b3":function(t,e,n){var o=n("872a"),i=n("9638"),a=Object.prototype,r=a.hasOwnProperty;function c(t,e,n){var a=t[e];r.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||o(t,e,n)}t.exports=c},"32f4":function(t,e,n){var o=n("2d7c"),i=n("d327"),a=Object.prototype,r=a.propertyIsEnumerable,c=Object.getOwnPropertySymbols,s=c?function(t){return null==t?[]:(t=Object(t),o(c(t),(function(e){return r.call(t,e)})))}:i;t.exports=s},"34ac":function(t,e,n){var o=n("9520"),i=n("1368"),a=n("1a8c"),r=n("dc57"),c=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,f=u.toString,p=l.hasOwnProperty,d=RegExp("^"+f.call(p).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(t){if(!a(t)||i(t))return!1;var e=o(t)?d:s;return e.test(r(t))}t.exports=h},"350e":function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-publish-authors"},[e("el-form-item",{attrs:{label:"@圈一下"}},[e("div",{staticClass:"u-list"},t._l(t.list,(function(n,o){return e("div",{key:o,staticClass:"u-item"},[e("img",{staticClass:"u-avatar",attrs:{src:t._f("showAvatar")(n.user_avatar)}}),e("span",{staticClass:"u-name"},[t._v(" "+t._s(n.display_name)+" ")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"移除",placement:"top"}},[e("i",{staticClass:"u-delete el-icon-delete",on:{click:function(e){return t.remove(n,o)}}})])],1)})),0)])],1)},i=[],a=(n("a15b"),n("a434"),n("e9c4"),n("b64b"),n("80f3")),r=n("85e4"),c={name:"publish_at_authors",data:function(){return{authorIds:[],list:[]}},mounted:function(){window.addEventListener("setItemEvent",this.handleSession)},beforeDestroy:function(){window.removeEventListener("setItemEvent",this.handleSession)},watch:{authorIds:{deep:!0,handler:function(t,e){t.length>e.length&&this.loadUsers()}}},methods:{handleSession:function(t){if("atAuthor"===t.key)try{var e=JSON.parse(t.newVal);this.authorIds=e}catch(t){console.log(t),this.authorIds=[]}},loadUsers:function(){var t=this;Object(a["c"])(this.authorIds).then((function(e){t.list=e.data.data}))},remove:function(t,e){var n=this.authorIds.split(",");n.splice(e,1),this.list.splice(e,1),n.length?sessionStorage.setItem("atAuthor",JSON.stringify(n.join(","))):sessionStorage.removeItem("atAuthor")}},filters:{showAvatar:function(t){return Object(r["showAvatar"])(t)}}},s=c,u=(n("2ee1"),n("2877")),l=Object(u["a"])(s,o,i,!1,null,"0bfa4bf3",null);e["a"]=l.exports},3698:function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},3729:function(t,e,n){var o=n("9e69"),i=n("00fd"),a=n("29f3"),r="[object Null]",c="[object Undefined]",s=o?o.toStringTag:void 0;function u(t){return null==t?void 0===t?c:r:s&&s in Object(t)?i(t):a(t)}t.exports=u},3818:function(t,e,n){var o=n("7e64"),i=n("8057"),a=n("32b3"),r=n("5b01"),c=n("0f0f"),s=n("e5383"),u=n("4359"),l=n("54eb"),f=n("1041"),p=n("a994"),d=n("1bac"),h=n("42a2"),b=n("c87c"),v=n("c2b6"),m=n("fa21"),_=n("6747"),y=n("0d24"),g=n("cc45"),x=n("1a8c"),j=n("d7ee"),w=n("ec69"),O=n("9934"),C=1,k=2,A=4,I="[object Arguments]",$="[object Array]",S="[object Boolean]",z="[object Date]",P="[object Error]",E="[object Function]",U="[object GeneratorFunction]",T="[object Map]",D="[object Number]",N="[object Object]",F="[object RegExp]",B="[object Set]",L="[object String]",M="[object Symbol]",R="[object WeakMap]",q="[object ArrayBuffer]",J="[object DataView]",V="[object Float32Array]",W="[object Float64Array]",G="[object Int8Array]",Z="[object Int16Array]",H="[object Int32Array]",K="[object Uint8Array]",Q="[object Uint8ClampedArray]",X="[object Uint16Array]",Y="[object Uint32Array]",tt={};function et(t,e,n,$,S,z){var P,T=e&C,D=e&k,F=e&A;if(n&&(P=S?n(t,$,S,z):n(t)),void 0!==P)return P;if(!x(t))return t;var B=_(t);if(B){if(P=b(t),!T)return u(t,P)}else{var L=h(t),M=L==E||L==U;if(y(t))return s(t,T);if(L==N||L==I||M&&!S){if(P=D||M?{}:m(t),!T)return D?f(t,c(P,t)):l(t,r(P,t))}else{if(!tt[L])return S?t:{};P=v(t,L,T)}}z||(z=new o);var R=z.get(t);if(R)return R;z.set(t,P),j(t)?t.forEach((function(o){P.add(et(o,e,n,o,t,z))})):g(t)&&t.forEach((function(o,i){P.set(i,et(o,e,n,i,t,z))}));var q=F?D?d:p:D?O:w,J=B?void 0:q(t);return i(J||t,(function(o,i){J&&(i=o,o=t[i]),a(P,i,et(o,e,n,i,t,z))})),P}tt[I]=tt[$]=tt[q]=tt[J]=tt[S]=tt[z]=tt[V]=tt[W]=tt[G]=tt[Z]=tt[H]=tt[T]=tt[D]=tt[N]=tt[F]=tt[B]=tt[L]=tt[M]=tt[K]=tt[Q]=tt[X]=tt[Y]=!0,tt[P]=tt[E]=tt[R]=!1,t.exports=et},"39ff":function(t,e,n){var o=n("0b07"),i=n("2b3e"),a=o(i,"WeakMap");t.exports=a},"3b4a":function(t,e,n){var o=n("0b07"),i=function(){try{var t=o(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},"3c49":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n("c14f"),i=n("1da1"),a=(n("b64b"),n("99af"),n("41cb"));function r(t){var e=t.sendUserId,n=t.accessUserId,o=t.postId,i=t.postType;return Object(a["$pay"])({mute:!0}).get("/api/horn/".concat(e,"/to/user/article/").concat(i,"/").concat(o),{params:{accessUserId:n}})}var c=n("c9d2"),s={data:function(){return{isSuperAuthor:!1}},computed:{userInfo:function(){return c["a"].getInfo()}},mounted:function(){var t=this;return Object(i["a"])(Object(o["a"])().m((function e(){return Object(o["a"])().w((function(e){while(1)switch(e.n){case 0:return e.n=1,c["a"].isSuperAuthor();case 1:t.isSuperAuthor=e.v;case 2:return e.a(2)}}),e)})))()},methods:{atUser:function(){var t=Object(i["a"])(Object(o["a"])().m((function t(e){var n,i;return Object(o["a"])().w((function(t){while(1)switch(t.n){case 0:if(t.p=0,n=sessionStorage.getItem("atAuthor"),!n){t.n=2;break}return t.n=1,r({sendUserId:this.userInfo.uid,accessUserId:JSON.parse(n),postId:e||this.id,postType:this.post_type||this.post.post_type});case 1:sessionStorage.removeItem("atAuthor");case 2:t.n=4;break;case 3:t.p=3,i=t.v,console.log(i);case 4:return t.a(2)}}),t,this,[[0,3]])})));function e(e){return t.apply(this,arguments)}return e}()}}},"41c3":function(t,e,n){var o=n("1a8c"),i=n("eac5"),a=n("ec8c"),r=Object.prototype,c=r.hasOwnProperty;function s(t){if(!o(t))return a(t);var e=i(t),n=[];for(var r in t)("constructor"!=r||!e&&c.call(t,r))&&n.push(r);return n}t.exports=s},4245:function(t,e,n){var o=n("1290");function i(t,e){var n=t.__data__;return o(e)?n["string"==typeof e?"string":"hash"]:n.map}t.exports=i},"42a2":function(t,e,n){var o=n("b5a7"),i=n("79bc"),a=n("1cec"),r=n("c869"),c=n("39ff"),s=n("3729"),u=n("dc57"),l="[object Map]",f="[object Object]",p="[object Promise]",d="[object Set]",h="[object WeakMap]",b="[object DataView]",v=u(o),m=u(i),_=u(a),y=u(r),g=u(c),x=s;(o&&x(new o(new ArrayBuffer(1)))!=b||i&&x(new i)!=l||a&&x(a.resolve())!=p||r&&x(new r)!=d||c&&x(new c)!=h)&&(x=function(t){var e=s(t),n=e==f?t.constructor:void 0,o=n?u(n):"";if(o)switch(o){case v:return b;case m:return l;case _:return p;case y:return d;case g:return h}return e}),t.exports=x},4359:function(t,e){function n(t,e){var n=-1,o=t.length;e||(e=Array(o));while(++n<o)e[n]=t[n];return e}t.exports=n},"49f4":function(t,e,n){var o=n("6044");function i(){this.__data__=o?o(null):{},this.size=0}t.exports=i},"50d8":function(t,e){function n(t,e){var n=-1,o=Array(t);while(++n<t)o[n]=e(n);return o}t.exports=n},"54eb":function(t,e,n){var o=n("8eeb"),i=n("32f4");function a(t,e){return o(t,i(t),e)}t.exports=a},"55a3":function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},"57a5":function(t,e,n){var o=n("91e9"),i=o(Object.keys,Object);t.exports=i},"585a":function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("c8ba"))},"5b01":function(t,e,n){var o=n("8eeb"),i=n("ec69");function a(t,e){return t&&o(e,i(e),t)}t.exports=a},"5d89":function(t,e,n){var o=n("f8af");function i(t,e){var n=e?o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}t.exports=i},"5e2e":function(t,e,n){var o=n("28c9"),i=n("69d5"),a=n("b4c0"),r=n("fba5"),c=n("67ca");function s(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var o=t[e];this.set(o[0],o[1])}}s.prototype.clear=o,s.prototype["delete"]=i,s.prototype.get=a,s.prototype.has=r,s.prototype.set=c,t.exports=s},"5f01":function(t){t.exports=JSON.parse('{"讨论":"讨论","文章":"文章"}')},6044:function(t,e,n){var o=n("0b07"),i=o(Object,"create");t.exports=i},"60ef":function(t,e,n){"use strict";n("944c")},"6374a":function(t,e,n){},6747:function(t,e){var n=Array.isArray;t.exports=n},"67ca":function(t,e,n){var o=n("cb5a");function i(t,e){var n=this.__data__,i=o(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}t.exports=i},"69d5":function(t,e,n){var o=n("cb5a"),i=Array.prototype,a=i.splice;function r(t){var e=this.__data__,n=o(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():a.call(e,n,1),--this.size,!0}t.exports=r},"6f6c":function(t,e){var n=/\w*$/;function o(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}t.exports=o},"6fcd":function(t,e,n){var o=n("50d8"),i=n("d370"),a=n("6747"),r=n("0d24"),c=n("c0983"),s=n("73ac"),u=Object.prototype,l=u.hasOwnProperty;function f(t,e){var n=a(t),u=!n&&i(t),f=!n&&!u&&r(t),p=!n&&!u&&!f&&s(t),d=n||u||f||p,h=d?o(t.length,String):[],b=h.length;for(var v in t)!e&&!l.call(t,v)||d&&("length"==v||f&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,b))||h.push(v);return h}t.exports=f},"73ac":function(t,e,n){var o=n("743f"),i=n("b047"),a=n("99d3"),r=a&&a.isTypedArray,c=r?i(r):o;t.exports=c},"743f":function(t,e,n){var o=n("3729"),i=n("b218"),a=n("1310"),r="[object Arguments]",c="[object Array]",s="[object Boolean]",u="[object Date]",l="[object Error]",f="[object Function]",p="[object Map]",d="[object Number]",h="[object Object]",b="[object RegExp]",v="[object Set]",m="[object String]",_="[object WeakMap]",y="[object ArrayBuffer]",g="[object DataView]",x="[object Float32Array]",j="[object Float64Array]",w="[object Int8Array]",O="[object Int16Array]",C="[object Int32Array]",k="[object Uint8Array]",A="[object Uint8ClampedArray]",I="[object Uint16Array]",$="[object Uint32Array]",S={};function z(t){return a(t)&&i(t.length)&&!!S[o(t)]}S[x]=S[j]=S[w]=S[O]=S[C]=S[k]=S[A]=S[I]=S[$]=!0,S[r]=S[c]=S[y]=S[s]=S[g]=S[u]=S[l]=S[f]=S[p]=S[d]=S[h]=S[b]=S[v]=S[m]=S[_]=!1,t.exports=z},7530:function(t,e,n){var o=n("1a8c"),i=Object.create,a=function(){function t(){}return function(e){if(!o(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=a},"79bc":function(t,e,n){var o=n("0b07"),i=n("2b3e"),a=o(i,"Map");t.exports=a},"7a48":function(t,e,n){var o=n("6044"),i=Object.prototype,a=i.hasOwnProperty;function r(t){var e=this.__data__;return o?void 0!==e[t]:a.call(e,t)}t.exports=r},"7b83":function(t,e,n){var o=n("7c64"),i=n("93ed6"),a=n("2478"),r=n("a524"),c=n("1fc8");function s(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var o=t[e];this.set(o[0],o[1])}}s.prototype.clear=o,s.prototype["delete"]=i,s.prototype.get=a,s.prototype.has=r,s.prototype.set=c,t.exports=s},"7bef":function(t,e,n){"use strict";n("240a")},"7c64":function(t,e,n){var o=n("e24b"),i=n("5e2e"),a=n("79bc");function r(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}t.exports=r},"7d1f":function(t,e,n){var o=n("087d"),i=n("6747");function a(t,e,n){var a=e(t);return i(t)?a:o(a,n(t))}t.exports=a},"7e64":function(t,e,n){var o=n("5e2e"),i=n("efb66"),a=n("2fcc"),r=n("802a"),c=n("55a3"),s=n("d02c");function u(t){var e=this.__data__=new o(t);this.size=e.size}u.prototype.clear=i,u.prototype["delete"]=a,u.prototype.get=r,u.prototype.has=c,u.prototype.set=s,t.exports=u},"800a":function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-publish-title"},[t.hideDiv?t._e():e("el-divider",{attrs:{"content-position":"left"}},[t._v("标题")]),e("el-input",{attrs:{maxlength:50,minlength:2,"show-word-limit":"",required:"",placeholder:t.placeholder||"请填写标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._t("default")],2)},i=[],a={name:"publish_title",props:["data","hideDiv","placeholder"],data:function(){return{title:this.data}},model:{prop:"data",event:"update"},watch:{data:function(t){this.title=t},title:{deep:!0,handler:function(t){this.$emit("update",t)}}},computed:{},methods:{},mounted:function(){},components:{}},r=a,c=n("2877"),s=Object(c["a"])(r,o,i,!1,null,null,null);e["a"]=s.exports},"802a":function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},8057:function(t,e){function n(t,e){var n=-1,o=null==t?0:t.length;while(++n<o)if(!1===e(t[n],n,t))break;return t}t.exports=n},"872a":function(t,e,n){var o=n("3b4a");function i(t,e,n){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}t.exports=i},"872b":function(t,e,n){"use strict";n("8e8f")},"8e8f":function(t,e,n){},"8eeb":function(t,e,n){var o=n("32b3"),i=n("872a");function a(t,e,n,a){var r=!n;n||(n={});var c=-1,s=e.length;while(++c<s){var u=e[c],l=a?a(n[u],t[u],u,n,t):void 0;void 0===l&&(l=t[u]),r?i(n,u,l):o(n,u,l)}return n}t.exports=a},"902f":function(t,e,n){"use strict";n("6374a")},"91e9":function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},9394:function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-publish-collection-relation"},[e("h5",{staticClass:"u-schema"},[e("a",{staticClass:"u-add el-button el-button--primary el-button--mini",attrs:{href:"/publish/#/collection",target:"_blank"}},[t._v("+ 创建小册")]),t._t("default"),t._m(0)],2),e("el-select",{staticClass:"u-collection",attrs:{remote:"","remote-method":t.remoteMethod,loading:t.loading,filterable:"",clearable:"",placeholder:"请选择一个小册（可选，非必填，可搜索）"},on:{"visible-change":t.visibleChange},model:{value:t.post_collection,callback:function(e){t.post_collection=e},expression:"post_collection"}},[t._l(t.collections,(function(t,n){return e("el-option",{key:n,attrs:{label:t.title,value:t.id}})})),e("div",{staticClass:"u-collection-null",attrs:{slot:"empty"},slot:"empty"},[e("div",[t._v(" 没有找到匹配结果， "),e("a",{attrs:{href:"/publish/#/collection",target:"_blank"}},[t._v("创建小册")])])])],2),t.isEmpty?e("div",{staticClass:"u-tip"},[e("i",{staticClass:"el-icon-info"}),t._v(" 当前没有任何小册， "),e("a",{attrs:{href:"/publish/#/collection",target:"_blank"}},[t._v("创建小册")])]):t._e()],1)},i=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"u-help u-icon-links",attrs:{href:"/tool/20891",target:"_blank"}},[e("i",{staticClass:"el-icon-question"}),t._v(" 小册帮助指南 ")])}],a=(n("a9e3"),n("ac1f"),n("841c"),n("25bf")),r=n("0644"),c=n.n(r),s={name:"publish_collection",props:["data"],data:function(){return{post_collection:"",collections:[],copyCollections:[],isInit:!0,loading:!1,search:""}},model:{prop:"data",event:"update"},computed:{isEmpty:function(){return!this.search&&!this.collections.length}},watch:{data:{immediate:!0,handler:function(t){this.post_collection=Number(t)||""}},post_collection:{handler:function(t){this.$emit("update",t)}}},methods:{loadCollections:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={keyword:e};Object(a["d"])(n).then((function(e){t.collections=e.data.data.list,t.isInit&&(t.copyCollections=c()(t.collections),t.isInit=!1)}))},remoteMethod:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.search=e,this.loading=!0,""!==e){var n={keyword:e};Object(a["d"])(n).then((function(e){t.collections=e.data.data.list,t.loading=!1}))}else this.collections=c()(this.copyCollections)},visibleChange:function(t){t&&(this.collections=c()(this.copyCollections))}},mounted:function(){this.loadCollections()},components:{}},u=s,l=(n("872b"),n("2877")),f=Object(l["a"])(u,o,i,!1,null,null,null);e["a"]=f.exports},"93ed6":function(t,e,n){var o=n("4245");function i(t){var e=o(this,t)["delete"](t);return this.size-=e?1:0,e}t.exports=i},"944c":function(t,e,n){},9520:function(t,e,n){var o=n("3729"),i=n("1a8c"),a="[object AsyncFunction]",r="[object Function]",c="[object GeneratorFunction]",s="[object Proxy]";function u(t){if(!i(t))return!1;var e=o(t);return e==r||e==c||e==a||e==s}t.exports=u},9638:function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},9934:function(t,e,n){var o=n("6fcd"),i=n("41c3"),a=n("30c9");function r(t){return a(t)?o(t,!0):i(t)}t.exports=r},"99d3":function(t,e,n){(function(t){var o=n("585a"),i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,r=a&&a.exports===i,c=r&&o.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||c&&c.binding&&c.binding("util")}catch(e){}}();t.exports=s}).call(this,n("62e4")(t))},"9e69":function(t,e,n){var o=n("2b3e"),i=o.Symbol;t.exports=i},a029:function(t,e,n){var o=n("087d"),i=n("2dcb"),a=n("32f4"),r=n("d327"),c=Object.getOwnPropertySymbols,s=c?function(t){var e=[];while(t)o(e,a(t)),t=i(t);return e}:r;t.exports=s},a2db:function(t,e,n){var o=n("9e69"),i=o?o.prototype:void 0,a=i?i.valueOf:void 0;function r(t){return a?Object(a.call(t)):{}}t.exports=r},a524:function(t,e,n){var o=n("4245");function i(t){return o(this,t).has(t)}t.exports=i},a8b8:function(t,e,n){"use strict";n.d(e,"l",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return u})),n.d(e,"j",(function(){return l})),n.d(e,"m",(function(){return r})),n.d(e,"h",(function(){return d})),n.d(e,"g",(function(){return h})),n.d(e,"c",(function(){return b})),n.d(e,"o",(function(){return v})),n.d(e,"e",(function(){return m})),n.d(e,"b",(function(){return _})),n.d(e,"k",(function(){return f})),n.d(e,"n",(function(){return c})),n.d(e,"i",(function(){return y}));n("99af");var o=n("41cb"),i="/api/next2";function a(t){return Object(o["$next"])().post("".concat(i,"/community/discussion/topic"),t)}function r(t,e){return Object(o["$next"])().put("".concat(i,"/community/discussion/my/topic/item/").concat(t),e)}function c(t,e){return Object(o["$next"])().put("".concat(i,"/community/discussion/manage/topic/item/").concat(t,"/update"),e)}function s(t){return Object(o["$next"])().get("".concat(i,"/community/discussion/my/topic/list"),{params:t})}function u(t){return Object(o["$next"])().delete("".concat(i,"/community/discussion/my/topic/item/").concat(t))}function l(t){return Object(o["$next"])().get("".concat(i,"/community/discussion/my/topic/item/").concat(t))}function f(t){return Object(o["$next"])().get("".concat(i,"/community/discussion/manage/topic/item/").concat(t))}function p(t){return Object(o["$next"])().get("".concat(i,"/community/discussion/topic/list"),{params:t})}function d(t){return Object(o["$next"])().get("".concat(i,"/community/discussion/my/reply/list"),{params:t})}function h(t){return Object(o["$next"])().get("".concat(i,"/community/discussion/my/reply/item/").concat(t))}function b(t){return Object(o["$next"])().delete("".concat(i,"/community/discussion/my/reply/item/").concat(t))}function v(t,e){return Object(o["$next"])().put("".concat(i,"/community/discussion/my/reply/item/").concat(t),e)}function m(t){return Object(o["$next"])().get("".concat(i,"/community/discussion/my/comment/list"),{params:t})}function _(t){return Object(o["$next"])().delete("".concat(i,"/community/discussion/my/comment/item/").concat(t))}function y(t,e){var n=t.id,a=t.category,r=t.subcategory,c=void 0===r?"default":r;return Object(o["$next"])().get("".concat(i,"/userdata/common-read-history/").concat(a,"/").concat(c,"/").concat(n),{params:e})}},a994:function(t,e,n){var o=n("7d1f"),i=n("32f4"),a=n("ec69");function r(t){return o(t,a,i)}t.exports=r},b047:function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},b218:function(t,e){var n=9007199254740991;function o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}t.exports=o},b4c0:function(t,e,n){var o=n("cb5a");function i(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]}t.exports=i},b5a7:function(t,e,n){var o=n("0b07"),i=n("2b3e"),a=o(i,"DataView");t.exports=a},bb78:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("b85c"),i=(n("ac1f"),n("00b4"),n("466d"),n("5319"),n("2ca0"),n("bdfe")),a=n("c9d2"),r={data:function(){return{hasRead:0,open_white_list:0,visible_for_self:0,from:"",is_illegal:!1}},mounted:function(){this.initExtend()},computed:{profile:function(){return this.$store.state.profile},level:function(){var t;return a["a"].getLevel(null===(t=this.profile)||void 0===t?void 0:t.experience)}},methods:{initExtend:function(){this.hasRead=~~localStorage.getItem("jx3box_has_read")||0},setHasRead:function(){localStorage.setItem("jx3box_has_read",this.hasRead)},loadCommentConfig:function(t,e){var n=this;Object(i["b"])(t,e).then((function(t){var e,o;n.open_white_list=(null===(e=t.data.data)||void 0===e?void 0:e.open_white_list)||0,n.visible_for_self=(null===(o=t.data.data)||void 0===o?void 0:o.visible_for_self)||0}))},setCommentConfig:function(t,e){Object(i["e"])(t,e,this.open_white_list?"open":"close"),Object(i["f"])(t,e,this.visible_for_self?"open":"close")},removeBase64Img:function(t){return t.replace(/(&lt;|<)img[^>]*?src="data:image[^>]*?(&gt;|>)/gi,"")},isExtraLink:function(t){if(!t)return!1;if(t.startsWith("/"))return!1;var e=/^https?:\/\/([^\/]+\.)?jx3box\.com/;return!e.test(t)},checkIllegal:function(t){if(this.level>2)this.is_illegal=!1;else{var e=0,n=/(?:https?:)?\/\/([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})(\/[a-zA-Z0-9._~:\/?#[\]@!$&'()*+,;=-]*)?/gm,i=t.match(n);if(i){var a,r=Object(o["a"])(i);try{for(r.s();!(a=r.n()).done;){var c=a.value;this.isExtraLink(c)&&e++}}catch(s){r.e(s)}finally{r.f()}}this.is_illegal=e>=5}}},created:function(){this.post.client=this.$store.state.client},watch:{$route:{immediate:!0,deep:!0,handler:function(){var t,e=null===(t=this.$route.query)||void 0===t?void 0:t.from;e&&(this.from=e),this.init()}},"$store.state.user_conf.editor_mode":{immediate:!0,handler:function(t){this.id||(this.post.post_mode=t||"tinymce")}},"post.post_content":{handler:function(t){this.checkIllegal(t)}},"post.content":{handler:function(t){this.checkIllegal(t)}}}}},bbc0:function(t,e,n){var o=n("6044"),i="__lodash_hash_undefined__",a=Object.prototype,r=a.hasOwnProperty;function c(t){var e=this.__data__;if(o){var n=e[t];return n===i?void 0:n}return r.call(e,t)?e[t]:void 0}t.exports=c},c0983:function(t,e){var n=9007199254740991,o=/^(?:0|[1-9]\d*)$/;function i(t,e){var i=typeof t;return e=null==e?n:e,!!e&&("number"==i||"symbol"!=i&&o.test(t))&&t>-1&&t%1==0&&t<e}t.exports=i},c2b6:function(t,e,n){var o=n("f8af"),i=n("5d89"),a=n("6f6c"),r=n("a2db"),c=n("c8fe"),s="[object Boolean]",u="[object Date]",l="[object Map]",f="[object Number]",p="[object RegExp]",d="[object Set]",h="[object String]",b="[object Symbol]",v="[object ArrayBuffer]",m="[object DataView]",_="[object Float32Array]",y="[object Float64Array]",g="[object Int8Array]",x="[object Int16Array]",j="[object Int32Array]",w="[object Uint8Array]",O="[object Uint8ClampedArray]",C="[object Uint16Array]",k="[object Uint32Array]";function A(t,e,n){var A=t.constructor;switch(e){case v:return o(t);case s:case u:return new A(+t);case m:return i(t,n);case _:case y:case g:case x:case j:case w:case O:case C:case k:return c(t,n);case l:return new A;case f:case h:return new A(t);case p:return a(t);case d:return new A;case b:return r(t)}}t.exports=A},c3fc:function(t,e,n){var o=n("42a2"),i=n("1310"),a="[object Set]";function r(t){return i(t)&&o(t)==a}t.exports=r},c59a:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-publish-box p-community"},[e("publish-header",{attrs:{name:"魔盒论坛"}},[e("div",{staticClass:"u-actions"},[e("publish-revision",{attrs:{enable:!0,post:t.post}}),t.id?e("publish-reading-history",{attrs:{"post-id":t.id,category:"communicate"}}):t._e()],1)]),e("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[e("publish-title",{model:{value:t.post.title,callback:function(e){t.$set(t.post,"title",e)},expression:"post.title"}}),e("div",{staticClass:"m-publish-info"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("信息")]),e("publish-category",{attrs:{options:t.tags},model:{value:t.post.category,callback:function(e){t.$set(t.post,"category",e)},expression:"post.category"}})],1),e("div",{staticClass:"m-publish-info m-publish-extraimg"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("魔卡 "),e("el-tooltip",{staticClass:"box-item",attrs:{effect:"dark",content:"使用魔卡让你的贴贴闪闪发光!",placement:"top"}},[e("i",{staticClass:"el-icon-question"})]),e("a",{staticClass:"u-buy el-button el-button--primary el-button--mini is-round",attrs:{href:"/vip/mall/list?category=virtual&sub_category=palu",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-full"}),t._v(" 兑换魔卡")])],1),t.skins.length?e("div",{staticClass:"u-imgs u-skin-imgs"},t._l(t.skins,(function(n,o){return e("div",{key:o,class:"u-imgs-item u-skin ".concat(t.post.decoration_id===n.id&&"active"),attrs:{title:"点击使用卡片皮肤，再次点击取消选择"},on:{click:function(e){return t.setSkin(n)}}},[e("el-image",{attrs:{src:n.url,fit:"fill"}}),e("div",{staticClass:"u-mark"},[e("i",{staticClass:"el-icon-check"}),t._v(" 已选择")]),e("div",{staticClass:"u-amount"},[t._v("数量 : "+t._s(n.amount))])],1)})),0):e("div",{staticClass:"u-null"},[t._v(" 你还没有任何魔卡，"),e("a",{attrs:{href:"/vip/mall/list?category=virtual&sub_category=palu",target:"_blank"}},[t._v("点击前往")]),t._v("使用积分兑换。 ")])],1),e("div",{staticClass:"m-publish-content"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("正文")]),e("Tinymce",{directives:[{name:"show",rawName:"v-show",value:"tinymce",expression:"'tinymce'"}],attrs:{attachmentEnable:!0,resourceEnable:!0},model:{value:t.post.content,callback:function(e){t.$set(t.post,"content",e)},expression:"post.content"}})],1),e("div",{staticClass:"m-publish-append"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("小册")]),e("publish-collection",{attrs:{defaultCollapse:t.post.collection_collapse},model:{value:t.post.collection_id,callback:function(e){t.$set(t.post,"collection_id",e)},expression:"post.collection_id"}})],1),e("div",{staticClass:"m-publish-extend"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("设置")]),e("el-form-item",{attrs:{label:"阅读权限"}},[e("el-radio-group",{model:{value:t.post.visible,callback:function(e){t.$set(t.post,"visible",e)},expression:"post.visible"}},[e("el-radio",{attrs:{label:0}},[t._v("公开")]),e("el-radio",{attrs:{label:1}},[t._v("仅自己可见")]),e("el-radio",{attrs:{label:2}},[t._v("仅亲友可见")]),e("el-radio",{attrs:{label:3}},[t._v("密码可见")]),e("el-radio",{attrs:{label:5}},[t._v("粉丝可见")])],1)],1),3==t.post.visible?e("el-form-item",{attrs:{label:"密码"}},[e("el-input",{attrs:{placeholder:"请输入密码"},model:{value:t.post.password,callback:function(e){t.$set(t.post,"password",e)},expression:"post.password"}})],1):t._e()],1),e("div",{staticClass:"m-publish-extend"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("临时")]),e("publish-at-authors")],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.extraImages.length,expression:"extraImages.length"}],staticClass:"m-publish-extraimg"},[e("el-divider",{attrs:{"content-position":"left"}},[t._v("附图")]),e("div",{staticClass:"u-imgs"},t._l(t.extraImages,(function(n,o){return e("div",{key:o,class:"u-imgs-item"},[e("el-image",{staticStyle:{width:"148px",height:"148px"},attrs:{src:n,fit:"cover","preview-src-list":[n]}}),e("div",{staticClass:"u-mark"},[t._v("封面")])],1)})),0)],1),e("div",{staticClass:"m-publish-doc"},[t.is_illegal?e("el-alert",{staticClass:"u-illegal-alert",attrs:{closable:!1,"show-icon":"",type:"error",title:"检测到您的内容存在不合规，将无法发布成功，并有禁言风险。"}}):t._e(),e("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.hasRead,callback:function(e){t.hasRead=e},expression:"hasRead"}},[t._v("我已阅读并了解"),e("a",{attrs:{href:"/notice/119",target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[t._v("《创作发布规范》")])])],1),e("div",{staticClass:"m-publish-buttons"},[[e("el-button",{attrs:{type:"primary",disabled:t.is_illegal||t.processing||!t.hasRead},on:{click:function(e){return t.publish("publish",!0)}}},[t._v("发    布")])]],2)],1)],1)},i=[],a=n("2909"),r=n("5530"),c=(n("4de4"),n("d81d"),n("14d9"),n("fb6a"),n("e9f5"),n("910d"),n("ab43"),n("d3b7"),n("ac1f"),n("6062"),n("1e70"),n("79a4"),n("c1a1"),n("8b00"),n("a4e7"),n("1e5a"),n("72c3"),n("3ca3"),n("466d"),n("5319"),n("ddb0"),n("65c2")),s=n("5f01"),u=n("a8b8"),l=n("221a"),f=n("ba82"),p=n("800a"),d=n("9394"),h=n("d2c4"),b=(n("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-category-list"},[e("span",{staticClass:"u-category"},[t._v("类别")]),e("el-radio-group",{on:{input:t.updateCategory},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},t._l(t.options,(function(n){return e("el-tooltip",{key:n.name,attrs:{effect:"dark",content:n.remark,placement:"top-start"}},[e("el-radio",{attrs:{border:"",label:n.name}},[t._v(t._s(n.name))])],1)})),1)],1)}),v=[],m=(n("a9e3"),{props:{options:{type:Array,required:!0},value:{type:[String,Number],default:""}},data:function(){return{category:this.value}},watch:{value:function(t){this.category=t},options:{deep:!0,immediate:!0,handler:function(){var t,e;this.value||(this.category=null===(t=this.options)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.name,this.$emit("update",this.category))}}},model:{prop:"value",event:"update"},methods:{updateCategory:function(t){this.$emit("update",t)}}}),_=m,y=(n("7bef"),n("2877")),g=Object(y["a"])(_,b,v,!1,null,null,null),x=g.exports,j=n("350e"),w=n("f9dd"),O=n("ccee"),C=n("bb78"),k=n("3c49"),A=n("1509"),I=n("25bf"),$={name:"community",mixins:[C["a"],k["a"]],components:{Tinymce:l["a"],"publish-header":f["a"],"publish-title":p["a"],"publish-collection":d["a"],"publish-revision":h["a"],"publish-category":x,"publish-at-authors":j["a"],"publish-reading-history":w["a"]},data:function(){return{skins:[],loading:!1,processing:!1,post:{id:"",client:"all",decoration_id:"",category:"",title:"",content:"",collection_id:"",visible:0,password:"",is_from_phone:0},currentDecorationId:"",community_types:s,tags:[],buckets:[],post_type:"community",extraImages:[]}},computed:{id:function(){return~~this.post.id||~~this.$route.params.id},data:function(){return Object(r["a"])(Object(r["a"])({},this.post),{},{category:this.post.category,collection_id:this.post.collection_id||void 0,decoration_id:this.post.decoration_id||void 0,extra_images:this.extraImages,introduction:this.getIntroduction(this.post.content)})}},mounted:function(){this.getTopicBucket();var t=this.$route.params.id;t&&(this.post.id=t,this.loadCommentConfig("community",t)),this.post.client="all",window.navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)&&!this.post.is_from_phone&&(this.post.is_from_phone=1)},methods:{goShopping:function(t){window.open("/vip/mall/list?category=virtual&sub_category=palu","_blank"),t.preventDefault(),t.stopPropagation()},setSkin:function(t){t.amount<=0&&t.id!=this.currentDecorationId?this.$message({message:"该皮肤已经被使用完了",type:"warning"}):this.post.decoration_id==t.id?this.post.decoration_id="":this.post.decoration_id=t.id},getDecoration:function(){var t=this;Object(A["b"])({type:"palu"}).then((function(e){var n=e.data.data||[],o=n.filter((function(e){return e.amount>0||e.id==t.currentDecorationId}));t.skins=o.map((function(t){return{val:t.val,id:t.id,amount:t.amount,url:c["__cdn"]+"design/decoration/palu/".concat(t.val,".png")}}))})).catch((function(){t.skins=[]}))},getIntroduction:function(t){var e=t.replace(/<[^>]*>|\n|&nbsp;| &nbsp;/g,"");return e.slice(0,200)},init:function(){var t=this;sessionStorage.removeItem("atAuthor");var e=this.$route.params.id;if(e){var n="admin"===this.from?u["k"]:u["j"];n(e).then((function(e){var n=e.data.data;t.currentDecorationId=n.decoration_id,t.post=Object(r["a"])(Object(r["a"])({},n),{},{title:n.title,content:n.content,collection_id:n.collection_id}),t.getDecoration()}))}else this.getDecoration()},publish:function(){var t=this;if(this.loading=!0,this.data.id){var e="admin"===this.from?u["n"]:u["m"];e(this.data.id,this.data).then((function(e){t.$message({message:"更新成功",type:"success"}),t.atUser(t.data.id)})).then((function(){t.afterPublish({id:t.data.id,collection_id:t.data.collection_id,title:t.data.title}).then((function(){setTimeout((function(){location.href="/community/".concat(t.post.id)}),500)}))})).finally((function(){t.loading=!1}))}else Object(u["l"])(this.data).then((function(e){var n=e.data.data;t.$message({message:"发布成功",type:"success"});var o=e.data.data.id;return t.atUser(o),n})).then((function(e){t.afterPublish(e).then((function(){setTimeout((function(){location.href="/community/".concat(e.id)}),500)}))})).finally((function(){t.loading=!1}))},getImgSrc:function(t){var e,n=/<img\s+(?![^>]*\bclass\b)[^>]*?src="([^"]*)"/g,o=[];while(null!==(e=n.exec(t)))o.push(e[1]);return o},getTopicBucket:function(){var t=this;Object(O["k"])({type:"community"}).then((function(e){var n=e.data.data;t.tags=Object(a["a"])(n)}))},afterPublish:function(t){return~~t.collection_id?Object(I["a"])({post_type:"community",post_id:t.id,post_collection:t.collection_id,post_title:t.title}):new Promise((function(t,e){t(!0)}))}},watch:{"post.content":{handler:function(t){var e=this.getImgSrc(t);this.extraImages=Object(a["a"])(new Set(e))},immediate:!0}}},S=$,z=(n("902f"),Object(y["a"])(S,o,i,!1,null,null,null));e["default"]=z.exports},c869:function(t,e,n){var o=n("0b07"),i=n("2b3e"),a=o(i,"Set");t.exports=a},c87c:function(t,e){var n=Object.prototype,o=n.hasOwnProperty;function i(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(n.index=t.index,n.input=t.input),n}t.exports=i},c8fe:function(t,e,n){var o=n("f8af");function i(t,e){var n=e?o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}t.exports=i},cb5a:function(t,e,n){var o=n("9638");function i(t,e){var n=t.length;while(n--)if(o(t[n][0],e))return n;return-1}t.exports=i},cc45:function(t,e,n){var o=n("1a2d0"),i=n("b047"),a=n("99d3"),r=a&&a.isMap,c=r?i(r):o;t.exports=c},d02c:function(t,e,n){var o=n("5e2e"),i=n("79bc"),a=n("7b83"),r=200;function c(t,e){var n=this.__data__;if(n instanceof o){var c=n.__data__;if(!i||c.length<r-1)return c.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(c)}return n.set(t,e),this.size=n.size,this}t.exports=c},d2c4:function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-revision"},[e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-folder"},on:{click:t.view}},[t._v("历史版本")]),e("el-drawer",{staticClass:"m-revision-drawer",attrs:{title:"历史版本",visible:t.show,"z-index":"2100","append-to-body":""},on:{"update:visible":function(e){t.show=e}}},[e("h3",{staticClass:"u-revision-title",attrs:{slot:"title"},slot:"title"},[t._v("历史版本")]),e("main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-revision-container"},[e("div",{staticClass:"m-revision-list"},[t.list.length?e("ul",{staticClass:"u-list"},t._l(t.list,(function(n,o){return e("li",{key:o,staticClass:"u-item",on:{click:function(e){return t.use(n)}}},[e("div",{staticClass:"u-version"},[e("span",[t._v(t._s(n.version))]),t._v(" - "),e("span",[t._v(t._s(n.created_at))])]),e("el-button",{staticClass:"u-compare",attrs:{size:"small",type:"text"}},[e("i",{staticClass:"el-icon-sort u-icon"}),t._v("使用")])],1)})),0):e("el-alert",{staticClass:"u-null",attrs:{title:"当前没有任何历史版本",type:"info","show-icon":""}}),e("el-pagination",{attrs:{small:"",layout:"prev, pager, next",total:t.total,"current-page":t.index,"hide-on-single-page":""},on:{"update:currentPage":function(e){t.index=e},"update:current-page":function(e){t.index=e}}})],1)])])],1)},i=[],a=n("5530"),r=(n("99af"),n("d81d"),n("14d9"),n("b0c0"),n("e9f5"),n("ab43"),n("d3b7"),n("2e06")),c={name:"publish_revision",props:["post"],data:function(){return{show:!1,index:1,pageSize:10,total:0,list:[],loading:!1}},computed:{pageParams:function(){return{index:this.index,pageSize:this.pageSize}},db:function(){return this.$store.state.db},link_content_meta_id:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.link_content_meta_id)||0}},watch:{page:function(){this.load()}},methods:{view:function(){this.show=!0,this.load()},load:function(){var t=this,e=this.link_content_meta_id||~~this.$route.query.content_meta_id;e&&(this.loading=!0,Object(r["b"])(e,this.pageParams).then((function(e){var n,o,i,r,c,s=(null===(n=e.data)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.list)||[];s.length&&(t.list=s.map((function(t,e){return Object(a["a"])(Object(a["a"])({},t),{},{version:"v"+(s.length-e)})})),t.total=(null===(i=e.data)||void 0===i||null===(r=i.data)||void 0===r||null===(c=r.page)||void 0===c?void 0:c.total)||0)})).finally((function(){t.loading=!1})))},use:function(t){this.show=!1;var e=this.$route.name;this.$router.push("/".concat(e,"/").concat(this.postId,"?mode=revision&version_id=").concat(t.id,"&content_meta_id=").concat(t.link_content_meta_id))}}},s=c,u=(n("60ef"),n("2877")),l=Object(u["a"])(s,o,i,!1,null,null,null);e["a"]=l.exports},d327:function(t,e){function n(){return[]}t.exports=n},d370:function(t,e,n){var o=n("253c"),i=n("1310"),a=Object.prototype,r=a.hasOwnProperty,c=a.propertyIsEnumerable,s=o(function(){return arguments}())?o:function(t){return i(t)&&r.call(t,"callee")&&!c.call(t,"callee")};t.exports=s},d7ee:function(t,e,n){var o=n("c3fc"),i=n("b047"),a=n("99d3"),r=a&&a.isSet,c=r?i(r):o;t.exports=c},da03:function(t,e,n){var o=n("2b3e"),i=o["__core-js_shared__"];t.exports=i},dab2:function(t,e,n){"use strict";n("dfcf")},dc57:function(t,e){var n=Function.prototype,o=n.toString;function i(t){if(null!=t){try{return o.call(t)}catch(e){}try{return t+""}catch(e){}}return""}t.exports=i},dfcf:function(t,e,n){},e24b:function(t,e,n){var o=n("49f4"),i=n("1efc"),a=n("bbc0"),r=n("7a48"),c=n("2524");function s(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var o=t[e];this.set(o[0],o[1])}}s.prototype.clear=o,s.prototype["delete"]=i,s.prototype.get=a,s.prototype.has=r,s.prototype.set=c,t.exports=s},e5383:function(t,e,n){(function(t){var o=n("2b3e"),i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,r=a&&a.exports===i,c=r?o.Buffer:void 0,s=c?c.allocUnsafe:void 0;function u(t,e){if(e)return t.slice();var n=t.length,o=s?s(n):new t.constructor(n);return t.copy(o),o}t.exports=u}).call(this,n("62e4")(t))},eac5:function(t,e){var n=Object.prototype;function o(t){var e=t&&t.constructor,o="function"==typeof e&&e.prototype||n;return t===o}t.exports=o},ec69:function(t,e,n){var o=n("6fcd"),i=n("03dd"),a=n("30c9");function r(t){return a(t)?o(t):i(t)}t.exports=r},ec8c:function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},efb66:function(t,e,n){var o=n("5e2e");function i(){this.__data__=new o,this.size=0}t.exports=i},f8af:function(t,e,n){var o=n("2474");function i(t){var e=new t.constructor(t.byteLength);return new o(e).set(new o(t)),e}t.exports=i},f9dd:function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-reading-history"},[e("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-document"},on:{click:t.view}},[t._v("阅读记录")]),e("el-drawer",{staticClass:"m-history-drawer",attrs:{title:"阅读记录",visible:t.show,"z-index":"2100","append-to-body":""},on:{"update:visible":function(e){t.show=e}}},[e("h3",{staticClass:"u-history-title",attrs:{slot:"title"},slot:"title"},[t._v("阅读记录")]),e("main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-history-container"},[e("div",{staticClass:"m-history-list"},[t.data&&t.data.length?e("ul",{staticClass:"u-list"},[t._l(t.data,(function(n,o){return e("li",{key:o,staticClass:"m-history-item"},[e("span",{staticClass:"u-name"},[e("i",{staticClass:"u-icon el-icon-tickets"}),n.user_info?e("a",{staticClass:"u-creator",attrs:{href:t.authorLink(n.user_info.id),title:"创建人"}},[e("img",{staticClass:"u-avatar",attrs:{src:t.showAvatar(n.user_info.avatar)}}),t._v(" "+t._s(n.user_info.display_name)+" ")]):t._e(),e("em",{staticClass:"u-time"},[t._v(t._s(n.created_at)+" 访问了此帖")])])])})),e("el-pagination",{staticClass:"u-pagination",attrs:{background:"","hide-on-single-page":"",layout:"prev,pager,next,->,total",total:t.total,"page-size":t.per,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],2):e("el-alert",{staticClass:"u-null",attrs:{title:"当前没有任何阅读记录",type:"info","show-icon":""}})],1)])])],1)},i=[],a=(n("a9e3"),n("d3b7"),n("a8b8")),r=n("85e4"),c={name:"publish_reading_history",props:{postId:{type:[String,Number],default:0},category:{type:String,default:"posts"},subcategory:{type:String,default:"default"}},data:function(){return{show:!1,page:1,per:10,data:[],loading:!1}},computed:{params:function(){return{index:this.page,pageSize:this.per}}},methods:{view:function(){this.postId&&(this.show=!0,this.loadList())},showAvatar:r["showAvatar"],authorLink:r["authorLink"],loadList:function(){var t=this;this.loading=!0;var e={id:this.postId,category:this.category,subcategory:this.subcategory};Object(a["i"])(e,this.params).then((function(e){t.data=e.data.data.list||[],t.total=e.data.data.total||0})).finally((function(){t.loading=!1}))}}},s=c,u=(n("dab2"),n("2877")),l=Object(u["a"])(s,o,i,!1,null,null,null);e["a"]=l.exports},fa21:function(t,e,n){var o=n("7530"),i=n("2dcb"),a=n("eac5");function r(t){return"function"!=typeof t.constructor||a(t)?{}:o(i(t))}t.exports=r},fba5:function(t,e,n){var o=n("cb5a");function i(t){return o(this.__data__,t)>-1}t.exports=i}}]);