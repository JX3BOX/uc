(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5672b95d"],{"13d5":function(t,a,n){"use strict";var s=n("23e7"),e=n("d58f").left,i=n("a640"),o=n("1212"),r=n("9adc"),c=!r&&o>79&&o<83,u=c||!i("reduce");s({target:"Array",proto:!0,forced:u},{reduce:function(t){var a=arguments.length;return e(this,t,a,a>1?arguments[1]:void 0)}})},"4ae3":function(t,a,n){"use strict";n("4f60")},"4f60":function(t,a,n){},6077:function(t,a,n){"use strict";n.r(a);n("b0c0"),n("b64b");var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"m-credit m-tasks"},[t._m(0),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-tasks-list"},[t._l(t.list,(function(n,s){return a("taskItem",{key:s,attrs:{data:n},on:{update:t.checkFinish}})})),Object.keys(t.group).length?t._l(t.group,(function(n,s){return a("div",{key:s,staticClass:"u-item u-group",class:t.groupInfo[s].open?"open":"close"},[a("div",{staticClass:"u-parent u-item"},[a("img",{staticClass:"u-img",attrs:{src:t.groupInfo[s].img,alt:t.groupInfo[s].name}}),a("div",{staticClass:"u-box"},[a("a",{staticClass:"u-title",attrs:{href:t.groupInfo[s].url,target:"_blank"}},[t._v(t._s(t.groupInfo[s].name))]),a("el-button",{attrs:{size:"small",type:t.groupInfo[s].open?"primary":""},on:{click:function(a){t.groupInfo[s].open=!t.groupInfo[s].open}}},[t._v(t._s(t.groupInfo[s].open?"折叠":"展开")),a("i",{class:t.groupInfo[s].open?"el-icon-caret-top":"el-icon-caret-right"})])],1)]),t._l(n,(function(n,s){return a("taskItem",{key:s,attrs:{data:n},on:{update:t.checkFinish}})}))],2)})):t._e()],2)])},e=[function(){var t=this,a=t._self._c;return a("h2",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-coffee-cup"}),t._v(" 任务中心")])}],i=(n("4de4"),n("14d9"),n("13d5"),n("4e82"),n("e9f5"),n("910d"),n("9485"),n("d3b7"),n("ac1f"),n("5319"),n("41cb"));function o(t){return Object(i["$pay"])().get("/api/personal/task",{params:t})}function r(t){return Object(i["$pay"])().get("/api/personal/task/".concat(t,"/check-status"))}var c=n("01ea"),u=function(){var t=this,a=t._self._c;return t.data?a("div",{staticClass:"u-item"},[a("img",{staticClass:"u-img",attrs:{src:t.data.task.task_icon||t.defaultTaskIcon,alt:t.data.task.action_type_desc}}),a("div",{staticClass:"u-box"},[a("div",{staticClass:"u-info"},[a("a",{staticClass:"u-title",attrs:{href:t.data.task.task_url,target:"_blank"}},[t._v(t._s(t.data.task.action_type_desc))]),a("span",{staticClass:"u-desc"},[t._v(" "+t._s(t.data.task.task_detail)+" ∕ "),t._l(t.data.attr,(function(n,s){return a("span",{key:s,staticClass:"u-attr"},[t._v(" "+t._s(t.attr_name[n.name])+" +"+t._s(n.count)+" ")])}))],2)]),a("div",{staticClass:"u-btn"},[a("el-button",{attrs:{size:"small",type:t.data.hasFinish?"success":"warning",disabled:t.data.hasFinish,icon:t.data.hasFinish?"el-icon-check":""},on:{click:function(a){return t.checkFinish(t.data.task.id)}}},[t._v(t._s(t.data.hasFinish?"已完成":"领取奖励"))])],1)])]):t._e()},l=[],d={name:"tasks",props:["data"],data:function(){return{attr_name:{experience:"经验",points:"积分"}}},computed:{defaultTaskIcon:function(){return c["k"]+"image/common/jx3box_black.svg"}},methods:{checkFinish:function(t){this.$emit("update",t)}}},f=d,p=n("2877"),h=Object(p["a"])(f,u,l,!1,null,null,null),k=h.exports,_=n("cc9a"),g={name:"tasks",components:{taskItem:k},data:function(){return{loading:!1,list:[],group:{},groupInfo:{}}},methods:{loadTasks:function(){var t=this;this.loading=!0,o({is_limit_everyday:0,os_visible:1}).then((function(a){var n=a.data.data.list;t.list=n.filter((function(t){return""==t.task.task_group&&"task_account_bind_github"!=(null===t||void 0===t?void 0:t.task.action_type)})),t.group=n.sort((function(t,a){var n=parseInt(t.task.action_type.split("_").pop(),10),s=parseInt(a.task.action_type.split("_").pop(),10);return n-s})).reduce((function(t,a){return a.task.task_group&&(t[a.task.task_group]||(t[a.task.task_group]=[]),t[a.task.task_group].push(a)),t}),{})})).finally((function(){t.loading=!1}))},loadAc:function(){var t=this;Object(_["b"])("task_group_info").then((function(a){a=a.replace(/ /g,""),t.groupInfo=JSON.parse(a)}))},checkFinish:function(t){var a=this;r(t).then((function(t){t.data.data.hasFinish?(a.$notify({title:"成功",message:"完成任务，获得奖励",type:"success"}),location.reload()):a.$notify({title:"提示",message:"您没有完成任务",type:"warning"})}))}},mounted:function(){this.loadTasks(),this.loadAc()}},v=g,m=(n("4ae3"),Object(p["a"])(v,s,e,!1,null,null,null));a["default"]=m.exports},9485:function(t,a,n){"use strict";var s=n("23e7"),e=n("2266"),i=n("59ed"),o=n("825a"),r=n("46c4"),c=n("2a62"),u=n("f99f"),l=n("2ba4"),d=n("d039"),f=TypeError,p=d((function(){[].keys().reduce((function(){}),void 0)})),h=!p&&u("reduce",f);s({target:"Iterator",proto:!0,real:!0,forced:p||h},{reduce:function(t){o(this);try{i(t)}catch(d){c(this,"throw",d)}var a=arguments.length<2,n=a?void 0:arguments[1];if(h)return l(h,this,a?[t]:[t,n]);var s=r(this),u=0;if(e(s,(function(s){a?(a=!1,n=s):n=t(n,s,u),u++}),{IS_RECORD:!0}),a)throw new f("Reduce of empty iterator with no initial value");return n}})},d58f:function(t,a,n){"use strict";var s=n("59ed"),e=n("7b0b"),i=n("44ad"),o=n("07fa"),r=TypeError,c="Reduce of empty array with no initial value",u=function(t){return function(a,n,u,l){var d=e(a),f=i(d),p=o(d);if(s(n),0===p&&u<2)throw new r(c);var h=t?p-1:0,k=t?-1:1;if(u<2)while(1){if(h in f){l=f[h],h+=k;break}if(h+=k,t?h<0:p<=h)throw new r(c)}for(;t?h>=0:p>h;h+=k)h in f&&(l=n(l,f[h],h,d));return l}};t.exports={left:u(!1),right:u(!0)}}}]);