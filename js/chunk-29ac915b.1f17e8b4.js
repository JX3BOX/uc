(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29ac915b"],{"00a5":function(t,e,n){},"0803":function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"j",(function(){return a})),n.d(e,"g",(function(){return l})),n.d(e,"h",(function(){return s})),n.d(e,"a",(function(){return c})),n.d(e,"l",(function(){return r})),n.d(e,"d",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"i",(function(){return m})),n.d(e,"k",(function(){return f})),n.d(e,"e",(function(){return p})),n.d(e,"m",(function(){return h})),n.d(e,"b",(function(){return g}));n("99af");var i=n("41cb");function o(t){return Object(i["$team"])().get("/api/team/my-game-roles",{params:t})}function a(t){return Object(i["$team"])().get("/api/team/role-unbind/"+t)}function l(){return Object(i["$team"])().get("/api/team/role-bind-token")}function s(t,e){return Object(i["$team"])().put("/api/team/role-update-note/".concat(t),{note:e})}function c(t){return Object(i["$team"])().post("/api/team/custom-role",t)}function r(t,e){return Object(i["$team"])().put("/api/team/custom-role/".concat(t),e)}function u(t){return Object(i["$team"])().get("/api/team/custom-role/".concat(t))}function d(t){return Object(i["$team"])().delete("/api/team/custom-role/".concat(t))}function m(t){return Object(i["$team"])().put("/api/team/role-priority/".concat(t,"/top"))}function f(t){return Object(i["$team"])().put("/api/team/role-priority/".concat(t,"/untop"))}function p(t){return Object(i["$team"])().get("/api/team/relation/role/".concat(t,"/teams"))}function h(t,e){return Object(i["$team"])().put("/api/team/my-game-roles/".concat(t,"/change-visible/").concat(e))}function g(t,e){return Object(i["$team"])().put("/api/team/my-game-roles/".concat(t,"/set-default/").concat(e))}},1619:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return u}));var i=n("fb5f"),o=n("33a5"),a=n("65c2"),l=n("e4f1");n.d(e,"g",(function(){return l["c"]}));var s=n("85e4");function c(t){var e;return(null===(e=i["bodyMap"][t])||void 0===e?void 0:e.label)||"未知"}function r(t){var e=t||0;return a["__imgPath"]+"image/school/"+e+".png"}function u(t){var e=t||0;return e&&o[e]||"未知"}n.d(e,"b",(function(){return s["getThumbnail"]})),n.d(e,"a",(function(){return s["authorLink"]})),n.d(e,"c",(function(){return s["showAvatar"]}))},"33a5":function(t){t.exports=JSON.parse('{"0":"江湖","1":"天策","2":"万花","3":"纯阳","4":"七秀","5":"少林","6":"藏剑","7":"丐帮","8":"明教","9":"五毒","10":"唐门","18":"苍云","19":"长歌","20":"霸刀","21":"蓬莱","22":"凌雪","23":"衍天","24":"药宗","26":"刀宗","29":"万灵","38":"段氏"}')},"46d4":function(t){t.exports=JSON.parse('{"冰心诀":{"name":"冰心诀","id":10081,"force":5,"kungfuId":10,"school":4,"client":["all","std","origin"]},"云裳心经":{"name":"云裳心经","id":10080,"force":5,"kungfuId":9,"school":4,"client":["all","std","origin"]},"花间游":{"name":"花间游","id":10021,"force":2,"kungfuId":5,"school":2,"client":["all","std","origin"]},"离经易道":{"name":"离经易道","id":10028,"force":2,"kungfuId":7,"school":2,"client":["all","std","origin"]},"毒经":{"name":"毒经","id":10175,"force":6,"kungfuId":13,"school":9,"client":["all","std","origin"]},"补天诀":{"name":"补天诀","id":10176,"force":6,"kungfuId":14,"school":9,"client":["all","std","origin"]},"莫问":{"name":"莫问","id":10447,"force":22,"kungfuId":22,"school":19,"client":["all","std"]},"相知":{"name":"相知","id":10448,"force":22,"kungfuId":23,"school":19,"client":["all","std"]},"无方":{"name":"无方","id":10627,"force":212,"kungfuId":29,"school":24,"client":["all","std"]},"灵素":{"name":"灵素","id":10626,"force":212,"kungfuId":28,"school":24,"client":["all","std"]},"傲血战意":{"name":"傲血战意","id":10026,"force":3,"kungfuId":6,"school":1,"client":["all","std","origin"]},"铁牢律":{"name":"铁牢律","id":10062,"force":3,"kungfuId":8,"school":1,"client":["all","std","origin"]},"易筋经":{"name":"易筋经","id":10003,"force":1,"kungfuId":2,"school":5,"client":["all","std","origin"]},"洗髓经":{"name":"洗髓经","id":10002,"force":1,"kungfuId":1,"school":5,"client":["all","std","origin"]},"焚影圣诀":{"name":"焚影圣诀","id":10242,"force":10,"kungfuId":17,"school":8,"client":["all","std","origin"]},"明尊琉璃体":{"name":"明尊琉璃体","id":10243,"force":10,"kungfuId":18,"school":8,"client":["all","std","origin"]},"分山劲":{"name":"分山劲","id":10390,"force":21,"kungfuId":21,"school":18,"client":["all","std","origin"]},"铁骨衣":{"name":"铁骨衣","id":10389,"force":21,"kungfuId":20,"school":18,"client":["all","std","origin"]},"紫霞功":{"name":"紫霞功","id":10014,"force":4,"kungfuId":3,"school":3,"client":["all","std","origin"]},"太虚剑意":{"name":"太虚剑意","id":10015,"force":4,"kungfuId":4,"school":3,"client":["all","std","origin"]},"天罗诡道":{"name":"天罗诡道","id":10225,"force":7,"kungfuId":16,"school":10,"client":["all","std","origin"]},"惊羽诀":{"name":"惊羽诀","id":10224,"force":7,"kungfuId":15,"school":10,"client":["all","std","origin"]},"问水诀":{"name":"问水诀","id":10144,"force":8,"kungfuId":11,"school":6,"client":["all","std","origin"]},"山居剑意":{"name":"山居剑意","id":10145,"force":8,"kungfuId":11,"school":6,"client":["all","std","origin"]},"笑尘诀":{"name":"笑尘诀","id":10268,"force":9,"kungfuId":19,"school":7,"client":["all","std","origin"]},"北傲诀":{"name":"北傲诀","id":10464,"force":23,"kungfuId":24,"school":20,"client":["all","std"]},"凌海诀":{"name":"凌海诀","id":10533,"force":24,"kungfuId":25,"school":21,"client":["all","std"]},"隐龙诀":{"name":"隐龙诀","id":10585,"force":25,"kungfuId":26,"school":22,"client":["all","std"]},"太玄经":{"name":"太玄经","id":10615,"force":211,"kungfuId":27,"school":23,"client":["all","std"]},"孤锋诀":{"name":"孤锋诀","id":10698,"force":213,"kungfuId":30,"school":26,"client":["all","std"]},"山海心诀":{"name":"山海心诀","id":10756,"force":214,"kungfuId":32,"school":29,"client":["all","std"]},"周天功":{"name":"周天功","id":10786,"force":215,"kungfuId":33,"school":38,"client":["all","std"]},"通用":{"name":"通用","id":0,"force":0,"kungfuId":0,"school":0,"client":["all","std","origin"]}}')},"7c31":function(t,e,n){"use strict";n.r(e);n("b0c0");var i=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"v-role-list"},[e("h2",{staticClass:"u-title"},[e("i",{staticClass:"el-icon-coordinate"}),t._v(" 我的角色 "),e("div",{staticClass:"u-op"},[e("router-link",{staticClass:"el-button el-button--primary el-button--mini",attrs:{to:"/role/bind"}},[e("i",{staticClass:"el-icon-connection"}),t._v(" 绑定角色 ")]),e("router-link",{staticClass:"el-button el-button--primary el-button--mini",attrs:{to:"/role/sync"}},[e("i",{staticClass:"el-icon-refresh"}),t._v(" 同步数据 ")])],1)]),e("div",{staticClass:"m-role-list-filter"},[e("el-select",{attrs:{size:"small","popper-class":"m-school-pop"},model:{value:t.mount,callback:function(e){t.mount=e},expression:"mount"}},[e("el-option",{attrs:{label:"全部",value:""}}),t._l(t.school_id_map,(function(n,i){return e("el-option",{key:i,staticClass:"u-school",attrs:{value:i,label:n}},[e("img",{attrs:{width:"24",height:"24",src:t._f("showSchoolIcon")(i)}}),t._v(" "+t._s(n)+" ")])}))],2),e("el-input",{staticClass:"u-name",attrs:{placeholder:"请输入角色名称",size:"small"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[e("template",{slot:"prepend"},[e("i",{staticClass:"el-icon-search"}),t._v(" 查找 ")])],2)],1),t.data&&t.data.length?e("div",{staticClass:"m-team-rolelist"},[e("ul",{staticClass:"u-list"},t._l(t.data,(function(n){return e("li",{key:n.ID,staticClass:"u-item",class:{auth:!n.custom}},[e("router-link",{staticClass:"u-pic u-avatar",attrs:{to:"/role/"+n.ID}},[e("img",{attrs:{src:t.showAvatar(n.mount,n.body_type),alt:""}}),n.custom?t._e():e("i",{staticClass:"u-status",attrs:{title:"已认证"}},[e("svg",{attrs:{height:"512",viewBox:"0 0 511.375 511.375",width:"512",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M511.375 255.688l-57.89-64.273 9.064-86.046-84.651-17.92-43.18-75.012-79.03 35.321-10.667 207.93 10.667 207.929 79.031 35.321 43.179-75.011 84.651-17.921-9.064-86.046z",fill:"#0ed678"}}),e("path",{attrs:{d:"M176.656 12.437l-43.179 75.012-84.651 17.921 9.064 86.045L0 255.688l57.89 64.272-9.064 86.046 84.651 17.921 43.18 75.011 79.031-35.321V47.758z",fill:"#04eb84"}}),e("g",[e("path",{attrs:{d:"M362.878 199.702l-22.381-19.977-84.809 95.016-10.667 23.613 10.667 21.439z",fill:"#f7f0eb"}}),e("path",{attrs:{d:"M166.56 233.095l-21.212 21.213 89.185 89.186 21.155-23.701v-45.052l-22.393 25.088z",fill:"#fffbf5"}})])])])]),e("span",{staticClass:"u-title"},[e("router-link",{staticClass:"u-rolename",attrs:{to:"/role/"+n.ID}},[t._v(t._s(n.name))]),n.is_default_role?e("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v("默认")]):t._e(),e("span",{staticClass:"u-star",class:{on:n.priority},on:{click:function(e){return t.starRole(n)}}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:n.priority?"取消置顶":"置顶",placement:"top"}},[n.priority?e("i",{staticClass:"el-icon-star-on"}):e("i",{staticClass:"el-icon-star-off"})])],1)],1),e("span",{staticClass:"u-meta"},[e("span",{staticClass:"u-server"},[e("em",[t._v("服务器")]),t._v(" "+t._s(n.server)+" ")]),e("span",{staticClass:"u-mount"},[e("em",[t._v("门派")]),e("img",{staticClass:"u-icon",attrs:{src:t._f("showSchoolIcon")(n.mount)}}),t._v(" "+t._s(t._f("showSchoolName")(n.mount))+" ")]),e("span",{staticClass:"u-note"},[e("em",[t._v("备注")]),t._v(" "+t._s(n.note)+" "),e("span",{staticClass:"u-addnote",on:{click:function(e){return t.addNote(n)}}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"设置备注",placement:"top"}},[e("i",{staticClass:"el-icon-edit-outline"})])],1)])]),e("span",{staticClass:"u-time u-achievement"},[t._v("成就数据: "),n.sync_achievements?[e("i",{staticClass:"el-icon-success u-success"}),t._v("已同步")]:[e("i",{staticClass:"el-icon-warning-outline u-warning"}),t._v("未同步")]],2),e("div",{staticClass:"u-op"},[e("el-switch",{staticClass:"u-public",attrs:{"active-value":1,"inactive-value":0,"active-text":"公开"},on:{change:function(e){return t.onPublicChange(n)}},model:{value:n.is_public_visible,callback:function(e){t.$set(n,"is_public_visible",e)},expression:"item.is_public_visible"}}),e("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[e("el-button",{attrs:{type:"default",size:"small"}},[t._v(" 更多"),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:{item:n,command:"default"}}},[e("i",{staticClass:"el-icon-setting"}),t._v(" "+t._s(n.is_default_role?"取消默认":"设为默认")+" ")]),n.custom?[e("el-dropdown-item",{attrs:{command:{item:n,command:"edit"}}},[e("i",{staticClass:"el-icon-edit-outline"}),t._v(" 编辑 ")]),e("el-dropdown-item",{attrs:{command:{item:n,command:"delete"}}},[e("i",{staticClass:"el-icon-delete"}),t._v(" 删除 ")])]:e("el-dropdown-item",{attrs:{command:{item:n,command:"unbind"}}},[e("i",{staticClass:"el-icon-remove-outline"}),t._v(" 解绑 ")])],2)],1)],1)],1)})),0)]):[e("el-alert",{staticClass:"m-archive-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),e("div",{staticClass:"m-role-null"},[e("router-link",{staticClass:"el-button el-button--primary el-button--mini",attrs:{to:"/role/bind"}},[e("i",{staticClass:"el-icon-connection"}),t._v(" 绑定角色 ")]),e("router-link",{staticClass:"el-button el-button--primary el-button--mini",attrs:{to:"/role/add"}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 自定义角色 ")])],1)],e("el-dialog",{staticClass:"m-team-note-dialog",attrs:{title:"设置备注",visible:t.noteVisible,width:t.isPhone?"95%":"30%"},on:{"update:visible":function(e){t.noteVisible=e}}},[e("div",[e("el-input",{attrs:{placeholder:"请输入内容",maxlength:20,"show-word-limit":!0},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.noteVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirmNote}},[t._v("确 定")])],1)])],2)},o=[],a=(n("14d9"),n("4e82"),n("d3b7"),n("0803")),l=n("33a5"),s=n("65c2"),c=n("46d4"),r=n("1619"),u=function(t){return t.is_default_role?0:t.priority?1:t.custom?3:2},d={name:"ListRole",props:[],filters:{showSchoolIcon:r["e"],showSchoolName:r["f"],showTime:r["g"]},data:function(){return{data:[],loading:!1,noteVisible:!1,currentItem:"",note:"",mount:"",name:"",xfmap:c,school_id_map:l,isPhone:window.innerWidth<768}},computed:{params:function(){return{mount:this.mount,name:this.name,_no_page:1}}},methods:{unbind:function(t){var e=this;this.$confirm("在网站进行解绑游戏内需要小退方可生效","提示",{confirmButtonText:"确定解绑",cancelButtonText:"取消",callback:function(n){"confirm"==n&&Object(a["j"])(t).then((function(t){e.$notify({title:"解绑成功",message:"角色解绑成功",type:"success"}),e.loadData()}))}})},loadData:function(){var t=this;this.loading=!0,Object(a["f"])(this.params).then((function(e){t.data=e.data.data.list||[],t.data.sort((function(t,e){var n=u(t),i=u(e);return n!==i?n-i:t.name.localeCompare(e.name)}))})).finally((function(){t.loading=!1}))},showAvatar:function(t,e){return Object(r["b"])(s["__cdn"]+"design/avatar/xisai/"+t+"-"+e+".png")},go:function(t){this.$router.push(t)},addNote:function(t){this.noteVisible=!0,this.currentItem=t},confirmNote:function(){var t=this;Object(a["h"])(this.currentItem.ID,this.note).then((function(e){t.noteVisible=!1,t.currentItem.note=t.note,t.note="",t.$notify({title:"成功",message:"备注设置成功",type:"success"})}))},delRole:function(t){var e=this;this.$alert("确定删除该角色吗？","消息",{confirmButtonText:"确定",callback:function(n){"confirm"==n&&Object(a["c"])(t).then((function(t){e.$notify({title:"删除成功",message:"角色删除成功",type:"success"}),e.loadData()}))}})},starRole:function(t){var e=this;t.priority?Object(a["k"])(t.ID).then((function(n){t.priority=0,e.$notify({title:"取消星标成功",message:"角色取消星标成功",type:"success"})})):Object(a["i"])(t.ID).then((function(n){t.priority=Date.now(),e.$notify({title:"星标成功",message:"角色星标成功",type:"success"})}))},handleCommand:function(t){var e=this;"unbind"==t.command?this.unbind(t.item.ID):"edit"==t.command?this.$router.push("/role/edit/"+t.item.ID):"delete"==t.command?this.delRole(t.item.ID):"default"==t.command&&Object(a["b"])(t.item.ID,~~!t.item.is_default_role).then((function(n){e.$message({title:"成功",message:~~!t.item.is_default_role?"设置成功":"取消成功",type:"success"}),e.loadData()}))},onPublicChange:function(t){var e=this;Object(a["m"])(t.ID,t.is_public_visible).then((function(t){e.$notify({title:"成功",message:"设置成功",type:"success"})}))},teamStatus:function(t){return{0:"待审核",1:"已通过"}[t]}},created:function(){},watch:{params:{immediate:!0,handler:function(t){this.loadData()}}},components:{}},m=d,f=(n("8093"),n("2877")),p=Object(f["a"])(m,i,o,!1,null,null,null);e["default"]=p.exports},8093:function(t,e,n){"use strict";n("00a5")},fb5f:function(t){t.exports=JSON.parse('{"bodyMap":{"1":{"label":"成男","value":"m2"},"2":{"label":"成女","value":"f2"},"5":{"label":"正太","value":"m1"},"6":{"label":"萝莉","value":"f1"}},"bodyFiles":{"LittleBoy":5,"LittleGirl":6,"StandardFemale":2,"StandardMale":1},"majorMap":{"1":"std","2":"origin"},"faceSubtype":{"0":"写意","1":"写实"}}')}}]);