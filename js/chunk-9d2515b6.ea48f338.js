(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d2515b6"],{"3bcf":function(t,i,o){},"62dc":function(t,i,o){"use strict";o("eabd")},add8:function(t,i,o){"use strict";o.r(i);var s=function(){var t,i,o,s,e,n,a,c,l,d,r,u,g,v,m,_,p,f=this,h=f._self._c;return h("div",{staticClass:"good-detail"},[h("div",{class:{"canBuy-text":!0,canBuy:null===(t=f.good.canBuy)||void 0===t?void 0:t.canBuy}},[f._v(" "+f._s(null!==(i=f.good.canBuy)&&void 0!==i&&i.canBuy?"— 当前商品 · 可兑换 —":"— 当前商品 · 不满足兑换条件 —")+" ")]),h("div",{staticClass:"title-card"},[h("div",{staticClass:"title"},[f._v(f._s(f.good.title))]),f.apply[f.goodInfo.category]?h("div",{staticClass:"apply"},[f._v("应用场景："+f._s(f.apply[f.goodInfo.category]))]):f._e()]),h("div",{staticClass:"card"},[f.goodInfo.img?h("div",{staticClass:"skeleton-container"},[h("Skeleton",{attrs:{category:f.goodInfo.category,img:f.goodInfo.img}})],1):h("img",{staticStyle:{width:"90vw",height:"90vw"},attrs:{src:null===(o=f.good.goods_images)||void 0===o?void 0:o[0]}})]),h("div",{staticClass:"buy-detail"},[h("div",{staticClass:"detail-card"},[h("div",{staticClass:"condition"},[h("div",{staticClass:"condition-item",class:{canBuy:null===(s=f.good.canBuy)||void 0===s?void 0:s.level}},[f._v(" 所需等级：lv."+f._s(null===(e=f.good.canBuy)||void 0===e?void 0:e.user_level)+" "),null!==(n=f.good.canBuy)&&void 0!==n&&n.level?h("i",{staticClass:"el-icon-circle-check"}):h("i",{staticClass:"el-icon-circle-close"})]),h("div",{staticClass:"condition-item",class:{canBuy:null===(a=f.good.canBuy)||void 0===a?void 0:a.vip_limit}},[f._v(" 会员专属 "),null!==(c=f.good.canBuy)&&void 0!==c&&c.vip_limit?h("i",{staticClass:"el-icon-circle-check"}):h("i",{staticClass:"el-icon-circle-close"})]),f.good.price_boxcoin?h("div",{staticClass:"condition-item",class:{canBuy:null===(l=f.good.canBuy)||void 0===l?void 0:l.box_coin}},[f._v(" 所需盒币："+f._s(f.good.price_boxcoin)+" "),null!==(d=f.good.canBuy)&&void 0!==d&&d.box_coin?h("i",{staticClass:"el-icon-circle-check"}):h("i",{staticClass:"el-icon-circle-close"})]):f._e(),f.good.price_points?h("div",{staticClass:"condition-item",class:{canBuy:null===(r=f.good.canBuy)||void 0===r?void 0:r.points}},[f._v(" 所需积分："+f._s(f.good.price_points)+" "),null!==(u=f.good.canBuy)&&void 0!==u&&u.points?h("i",{staticClass:"el-icon-circle-check"}):h("i",{staticClass:"el-icon-circle-close"})]):f._e()]),h("div",{staticClass:"buy-time",class:{canBuy:null===(g=f.good.canBuy)||void 0===g?void 0:g.buy_time}},[f._v(" 可兑换时间："+f._s(f.good.start_sell_time)+" ~ "+f._s(f.good.end_sell_time)+f._s(null!==(v=f.good.canBuy)&&void 0!==v&&v.buy_time?"":"(不在兑换期内)")+" ")]),h("div",{staticClass:"buttons"},[h("button",{staticClass:"button add-cart",attrs:{disabled:!(null!==(m=f.good.canBuy)&&void 0!==m&&m.canBuy)},on:{click:f.addCart}},[h("img",{attrs:{src:f.imgUrl+"cart-fill.svg",alt:""}}),f._v(" 加购 ")]),h("button",{staticClass:"button buy",attrs:{disabled:!(null!==(_=f.good)&&void 0!==_&&null!==(p=_.canBuy)&&void 0!==p&&p.canBuy)},on:{click:f.buyGoods}},[f.good.price_boxcoin?[h("img",{attrs:{src:f.imgUrl+"box_coin_fill.svg",alt:""}}),f._v(f._s(f.good.price_boxcoin)+"盒币 ")]:f._e(),f.good.price_boxcoin&&f.good.price_points?[f._v(" + ")]:f._e(),f.good.price_points?[h("img",{attrs:{src:f.imgUrl+"point.svg",alt:""}}),f._v(f._s(f.good.price_points)+"积分 ")]:f._e()],2),h("button",{staticClass:"button like",on:{click:function(t){return f.$refs.like.addLike()}}},[h("img",{attrs:{src:f.imgUrl+"like.svg",alt:""}}),h("Like",{ref:"like",attrs:{postId:f.id,postType:"mall"}})],1)])]),f.good.describe?h("div",{staticClass:"good-comment",domProps:{innerHTML:f._s(f.good.describe)}}):f._e()]),h("BuyConfirm",{ref:"buyConfirm",attrs:{item:f.good}})],1)},e=[],n=(o("99af"),o("7db0"),o("e9f5"),o("f665"),o("d3b7"),o("015f")),a=o("c9d2"),c=o("4474"),l=o("8339"),d=o("2ef0"),r=o("65c2"),u=o("d09f"),g={name:"mall_detail_web",components:{Skeleton:c["a"],Like:l["a"],BuyConfirm:u["a"]},data:function(){return{imgUrl:r["__cdn"]+"design/mall/",id:this.$route.params.id,good:{},apply:{palu:"魔盒论坛列表页",avatar:"头像框",emoticon:"表情包",comment:"评论皮肤",sidebr:"侧边栏主题",atcard:"个人名片",calendar:"首页日历",homebg:"主页风格"}}},computed:{asset:function(){return this.$store.state.mallNew.asset},goodInfo:function(){if(this.good&&"virtual"===this.good.category){if("skin"===this.good.sub_category)return{category:this.good.virtual_stock_item_details.category,img:"https://cdn.jx3box.com/design/decoration/images/".concat(this.good.remark,"/").concat(this.good.virtual_stock_item_details.category,".png")};if("palu"===this.good.sub_category)return{category:"palu",img:"https://cdn.jx3box.com/design/decoration/palu/".concat(this.good.remark,".png")}}return{category:this.good.sub_category}}},watch:{asset:{immediate:!0,deep:!0,handler:function(t){var i=this;t.user_id&&this.id&&Object(n["d"])(this.id).then((function(t){var o,s=(null===(o=t.data)||void 0===o?void 0:o.data)||{};s.canBuy=i.checkCanBuy(s)||{},i.good=s}))}}},methods:{checkCanBuy:function(t){var i={canBuy:!0,vip_limit:!0,box_coin:!0,points:!0,level:!0,user_level:a["a"].getLevel(t.exp_limit),buy_time:!0};return 1!==t.vip_limit||a["a"]._isPRO(this.asset)||(i.canBuy=!1,i.vip_limit=!1),this.asset.box_coin<t.price_boxcoin&&(i.canBuy=!1,i.box_coin=!1),this.asset.points<t.price_points&&(i.canBuy=!1,i.points=!1),this.asset.experience<t.exp_limit&&(i.canBuy=!1,i.level=!1),0===t.on_selling&&(i.canBuy=!1,i.buy_time=!1),i},buyGoods:Object(d["throttle"])((function(){this.$refs.buyConfirm.isShow=!0}),2e3),addCart:Object(d["throttle"])((function(t){var i,o,s=this,e=(null===(i=this.$store.state.mall.cart)||void 0===i||null===(o=i.find((function(t){return t.goods_id===s.good.id})))||void 0===o?void 0:o.amount)||0;if(1+e>this.good.stock)return this.$message({type:"warning",message:"可兑换库存不足"});this.$store.dispatch("mallNew/addCart",{id:this.good.id,amount:1}).then((function(i){i&&s.fly(t)}))}),1e3),fly:function(t){var i="IMG"===t.target.tagName?t.target.parentElement:t.target,o=i.parentElement,s=i.getBoundingClientRect(),e=s.left,n=s.top,a=this.$store.state.mallNew.boundCart,c=a.left,l=a.top,d=i.cloneNode(!0);d.style.cssText="\n                position: fixed;\n                left: ".concat(e,"px;\n                top: ").concat(n,"px;\n                z-index: 1000;\n            "),o.appendChild(d),d.animate([{transform:"translate(".concat(c-e,"px, ").concat(l-n,"px) scale(0.5)")}],{duration:500,easing:"ease-in-out",fill:"forwards"}),setTimeout((function(){o.removeChild(d)}),500)}}},v=g,m=(o("eff2"),o("2877")),_=Object(m["a"])(v,s,e,!1,null,"7e9e7c42",null);i["default"]=_.exports},d09f:function(t,i,o){"use strict";var s=function(){var t,i,o=this,s=o._self._c;return s("el-dialog",{attrs:{visible:o.isShow,width:"85%","show-close":!1,"custom-class":"m-buy-confirm"},on:{"update:visible":function(t){o.isShow=t}}},[s("div",{staticClass:"content"},[s("img",{staticStyle:{width:"32vw",height:"32vw"},attrs:{src:null!==(t=o.item)&&void 0!==t&&null!==(i=t.goods_images)&&void 0!==i&&i[0]?o.item.goods_images[0]:"@/assets/img/publish/logo.svg"}}),s("div",{staticClass:"text"},[o._v(" 确认使用"),s("span",{staticClass:"price"},[o._v(o._s(o.confirmText))]),o._v("兑换"),s("span",{staticClass:"title"},[o._v(o._s(o.item.title))]),o._v("嘛？ ")])]),s("div",{staticClass:"btn-box"},[s("el-button",{staticStyle:{width:"20.5333vw","font-size":"3.2vw"},attrs:{round:"",size:"mini"},on:{click:function(t){t.stopPropagation(),o.isShow=!1}}},[o._v("取消")]),s("el-button",{staticStyle:{width:"20.5333vw","font-size":"3.2vw"},attrs:{type:"primary",round:"",size:"mini"},on:{click:function(t){return t.stopPropagation(),o.buyGoods.apply(null,arguments)}}},[o._v("确定")])],1)])},e=[],n=(o("99af"),o("14d9"),o("c9d2")),a=o("65c2"),c={name:"BuyConfirm",props:{item:{type:Object,default:function(){}}},data:function(){return{isShow:!1}},computed:{confirmText:function(){return this.item.price_points&&this.item.price_boxcoin?"".concat(this.item.price_boxcoin,"盒币和").concat(this.item.price_points,"积分"):this.item.price_points?"".concat(this.item.price_points,"积分"):this.item.price_boxcoin?"".concat(this.item.price_boxcoin,"盒币"):""}},methods:{buyGoods:function(){var t=this;if(!n["a"].isLogin())return this.$message.error("请先登录"),void setTimeout((function(){n["a"].toLogin()}),1e3);this.isShow=!1;var i=this.item,o=i.category,s=i.is_virtual,e=i.id;if(s&&"virtual"==o)return this.$store.dispatch("mallNew/buyGoods",{id:e,count:1,addressId:0,remark:"虚拟商品购买"}).then((function(i){t.$confirm("购买成功，是否跳转至订单界面?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t="".concat(a["__Root"],"dashboard/mall");window.open(t)})).catch((function(){}))}));this.$router.push({name:"mall_order_new",params:{id:e}})}}},l=c,d=(o("62dc"),o("2877")),r=Object(d["a"])(l,s,e,!1,null,"73b0e202",null);i["a"]=r.exports},eabd:function(t,i,o){},eff2:function(t,i,o){"use strict";o("3bcf")}}]);