(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29b0c85d"],{"1da7":function(t,e,n){t.exports=n.p+"img/check.01c8d73f.svg"},"39ab":function(t,e,n){"use strict";n.r(e);n("caad"),n("2532");var a=function(){var t=this,e=t._self._c;return e("uc",{staticClass:"m-dashboard-emotion m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮",tabList:t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[e("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[e("div",{staticClass:"m-emotion-content-preview"},[e("div",{staticClass:"m-title"},[e("span",[t._v("表情包内容展示")]),e("span",{staticClass:"u-tip"},[t._v("点击表情包可以预览其中的表情")])]),t.previewEmotion?e("div",{staticClass:"m-emotion-content-list"},t._l(t.previewEmotion.items,(function(n,a){return e("div",{key:a,staticClass:"m-emotion-content-item"},[e("img",{staticClass:"u-img",attrs:{src:t.itemImgSrc(n),alt:""}}),e("span",{staticClass:"u-name"},[t._v(t._s(t.getNameByKey(n.key)))])])})),0):t._e()]),e("el-divider",{attrs:{"content-position":"left"}},[t._v("已获得")]),e("div",{staticClass:"m-emotion-list"},t._l(t.ownedEmotions,(function(a,o){return e("div",{key:o,staticClass:"m-emotion-item",class:{"is-select":t.selectedKeys.includes(a.group_name)},on:{click:function(e){return t.toggleEmotionSelected(a)}}},[t.selectedKeys.includes(a.group_name)?e("img",{staticClass:"u-check",attrs:{src:n("1da7"),alt:""}}):t._e(),e("img",{staticClass:"u-img",attrs:{src:a.cover,alt:""}}),e("span",{staticClass:"u-name"},[t._v(t._s(a.group_name))])])})),0),e("div",{staticClass:"m-actions"},[e("el-button",{attrs:{icon:"el-icon-circle-check",type:"primary",loading:t.loading},on:{click:t.onSave}},[t._v("确定激活("+t._s(t.selectedKeys.length)+"/5)")]),e("div",{staticClass:"u-tip"},[t._v("自定义表情包最多只能同时激活五个。挑选完毕后，需点击按钮方可实装。")])],1),e("el-divider",{attrs:{"content-position":"left"}},[t._v("未获得")]),e("div",{staticClass:"m-emotion-list"},t._l(t.unownedEmotions,(function(n,a){return e("div",{key:a,staticClass:"m-emotion-item is-not-owned",on:{click:function(e){return t.toggleEmotionSelected(n)}}},[e("img",{staticClass:"u-img",attrs:{src:n.cover,alt:""}}),e("span",{staticClass:"u-name"},[t._v(t._s(n.group_name))]),e("span",{staticClass:"u-go-buy",on:{click:function(e){return e.stopPropagation(),t.goBuy(n.group_name)}}},[t._v("前往兑换")])])})),0)],1)},o=[],i=n("5530"),c=(n("4de4"),n("7db0"),n("d81d"),n("14d9"),n("e9f5"),n("910d"),n("f665"),n("ab43"),n("1236"),n("e9c4"),n("b64b"),n("d3b7"),n("ac1f"),n("5319"),n("2ca0"),n("48c0")),s=n("f6be"),r=n("01ea"),u=n("5c97"),l={name:"emotion",props:[],data:function(){return{tabList:u["e"],emotions:[],active:[],loading:!1,allEmotions:[],ownedEmotionKeys:[],selectedKeys:[],previewKey:""}},computed:{ownedEmotions:function(){var t=this;return this.emotions.filter((function(e){return t.ownedEmotionKeys.includes(e.group_name)})).map((function(e){var n;return Object(i["a"])(Object(i["a"])({},e),{},{cover:t.itemImgSrc((null===(n=e.items)||void 0===n?void 0:n[0])||{})})}))},unownedEmotions:function(){var t=this;return this.emotions.filter((function(e){return!t.ownedEmotionKeys.includes(e.group_name)&&"默认"!==e.group_name})).map((function(e){var n;return Object(i["a"])(Object(i["a"])({},e),{},{cover:t.itemImgSrc((null===(n=e.items)||void 0===n?void 0:n[0])||{})})}))},previewEmotion:function(){var t=this;return this.emotions.find((function(e){return e.group_name===t.previewKey}))||null}},methods:{goBuy:function(t){window.open("/vip/mall?category=virtual&search=".concat(t),"_blank")},getNameByKey:function(t){return t?t.replace(/^\#\w+/,""):""},loadDecoration:function(){var t=this;Object(s["b"])({type:"emotion"}).then((function(e){t.ownedEmotionKeys=e.data.data.map((function(t){return t.val})),t.selectedKeys=e.data.data.filter((function(t){return t.using})).map((function(t){return t.val}))}))},getEmotion:function(){var t=this;try{var e=JSON.parse(sessionStorage.getItem("jx3_emotion"));if(e)return void(this.emotions=e);Object(s["d"])().then((function(e){t.emotions=e.data,sessionStorage.setItem("jx3_emotion",JSON.stringify(e.data))}))}catch(n){this.allEmotions=[]}},toggleEmotionSelected:function(t){var e=t.group_name;if(this.previewKey=e,this.ownedEmotionKeys.includes(e))if(this.selectedKeys.includes(e))this.selectedKeys=this.selectedKeys.filter((function(t){return t!==e}));else{if(this.selectedKeys.length>=5)return void this.$message.error("最多只能选择五个表情包");this.selectedKeys.push(e)}},itemImgSrc:function(t){var e=t.filename;return null!==e&&void 0!==e&&e.startsWith("http")?e:r["k"]+"emotion/output/"+e},onSave:function(){var t=this;this.loading=!0;var e=this.ownedEmotionKeys.map((function(e){return{type:"emotion",val:e,using:t.selectedKeys.includes(e)}}));Object(s["j"])(e).then((function(e){t.$message.success("保存成功"),t.loading=!1}))}},mounted:function(){this.getEmotion(),this.loadDecoration()},components:{uc:c["a"]}},m=l,d=(n("7f7e"),n("2877")),f=Object(d["a"])(m,a,o,!1,null,null,null);e["default"]=f.exports},"39dd":function(t,e,n){},"48c0":function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-dashboard-profile m-profile"},[e("h2",{staticClass:"u-title"},[e("i",{class:t.icon}),t._v(" "+t._s(t.title)+" "),t._t("header")],2),e("tabs",{attrs:{tabs:t.tabList,"msg-change-count":t.msgChangeCount}}),t._t("default")],2)},o=[],i=(n("a9e3"),n("b0c0"),function(){var t=this,e=t._self._c;return e("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabs,(function(n){return e("el-tab-pane",{key:n.name,attrs:{name:n.name}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"u-tab-icon",class:n.icon}),t._v(" "+t._s(n.label)+" "),t.showCount?e("span",{staticClass:"u-count",class:t.count[t.countMap[n.name]]?"is-orange":""},[t._v("("+t._s(t.count[t.countMap[n.name]]||0)+")")]):t._e()])])})),1)}),c=[],s=(n("caad"),n("14d9"),n("c944")),r={name:"",props:{tabs:{type:Array,default:function(){return[]}},msgChangeCount:{type:Number,default:0}},data:function(){return{active:"",countMap:{msg:"message",letter:"letter"},count:{message:0,letter:0}}},watch:{$route:function(){this.active=this.routeName},msgChangeCount:{immediate:!0,handler:function(t){t>0&&(this.count.message=0),t<0&&this.count.message>0&&(this.count.message+=t)}}},computed:{showCount:function(){return["msg","letter"].includes(this.routeName)},routeName:function(){return this.$route.name}},methods:{changeTab:function(){this.$router.push({name:this.active})},loadCount:function(){var t=this;Object(s["b"])().then((function(e){var n,a=(null===(n=e.data)||void 0===n?void 0:n.data)||{};t.count.letter=a.letter||0})),Object(s["c"])().then((function(e){var n;t.count.message=(null===(n=e.data.data)||void 0===n?void 0:n.unread_count)||0}))}},mounted:function(){this.active=this.routeName,this.showCount&&this.loadCount()},components:{}},u=r,l=n("2877"),m=Object(l["a"])(u,i,c,!1,null,null,null),d=m.exports,f=n("5c97"),p={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return f["d"]}},msgChangeCount:{type:Number,default:0}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:d}},g=p,b=(n("dc6f"),Object(l["a"])(g,a,o,!1,null,null,null));e["a"]=b.exports},"5c97":function(t){t.exports=JSON.parse('{"e":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"medal","icon":"el-icon-medal","label":"勋章"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"}],"d":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"notice","icon":"el-icon-message","label":"通知中心"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"},{"name":"auth","icon":"el-icon-s-check","label":"账号认证"}],"b":[{"name":"mall","icon":"el-icon-shopping-bag-1","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-2","label":"系统订单"}],"c":[{"name":"msg","icon":"el-icon-message","label":"通知"},{"name":"letter","icon":"el-icon-chat-dot-square","label":"私信"}],"a":[{"name":"certification","icon":"el-icon-medal","label":"电子证书"},{"name":"holidayCard","icon":"el-icon-sugar","label":"节日贺卡"},{"name":"birthdayCard","icon":"el-icon-present","label":"生日贺卡"}]}')},"7f7e":function(t,e,n){"use strict";n("ca57")},c944:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"f",(function(){return i})),n.d(e,"e",(function(){return c})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return r}));var a=n("41cb");function o(t){return Object(a["$next"])().get("/api/next2/userdata/messages",{params:t})}function i(t){return Object(a["$next"])().put("/api/next2/userdata/messages/read/".concat(t))}function c(){return Object(a["$next"])().put("/api/next2/userdata/messages/read")}function s(t){return Object(a["$next"])().delete("/api/next2/userdata/messages/".concat(t))}function r(){return Object(a["$next"])({mute:!0}).get("/api/next2/userdata/messages/unread_total")}function u(){return Object(a["$next"])({mute:!0}).get("/api/letter/unread/count")}function l(t){return Object(a["$next"])().get("/api/next2/comment/item/".concat(t))}},ca57:function(t,e,n){},dc6f:function(t,e,n){"use strict";n("39dd")},f6be:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"j",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return l})),n.d(e,"i",(function(){return m})),n.d(e,"m",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"g",(function(){return p})),n.d(e,"k",(function(){return g})),n.d(e,"a",(function(){return b})),n.d(e,"h",(function(){return h})),n.d(e,"f",(function(){return v})),n.d(e,"l",(function(){return y}));n("99af");var a=n("41cb"),o=n("bc3a"),i=n.n(o),c=n("01ea");function s(t){return Object(a["$cms"])().get("/api/cms/user/decoration",{params:t})}function r(t){return Object(a["$cms"])().post("/api/cms/user/decoration",t)}function u(){var t=c["e"]+"design/decoration/index.json";return i.a.get(t)}function l(){return i.a.get("".concat(c["h"],"emotion/output/catalog.json"))}function m(t,e){return Object(a["$cms"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(e,"/for/avatar"))}function d(t){return Object(a["$cms"])().put("/api/cms/user/my/avatar-frame",t)}function f(t){return Object(a["$cms"])().get("/api/cms/user/config/honor",{params:t})}function p(t){return Object(a["$next"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function g(t){return Object(a["$cms"])().put("/api/cms/user/honor/use/".concat(t))}function b(){return Object(a["$cms"])().delete("/api/cms/user/honor/use")}function h(t,e){return Object(a["$next"])({mute:!0}).get("/api/next2/user/"+t+"/medals",{params:e})}function v(t){return Object(a["$cms"])().get("/api/cms/config/medal",{params:t})}function y(t,e,n){return Object(a["$next"])().put("/api/next2/user/".concat(t,"/medals/").concat(e,"/wear/").concat(n))}}}]);