(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37b2a10b"],{1922:function(t,i,s){},"1efd":function(t,i,s){},2121:function(t,i,s){},"315c":function(t,i,s){},"3fb4":function(t,i,s){"use strict";s("2121")},4293:function(t,i,s){"use strict";s("315c")},6168:function(t,i,s){"use strict";s.d(i,"c",(function(){return o})),s.d(i,"b",(function(){return c})),s.d(i,"a",(function(){return r}));var e=s("c14f"),a=s("1da1"),n=s("41cb");function o(t,i){return Object(n["$cms"])().post("/api/cms/user/my/meta?key=".concat(t),i)}function c(t){return Object(n["$cms"])().get("/api/cms/config",{params:t}).then((function(t){return t.data.data}))}function r(t){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(Object(e["a"])().m((function t(i){var s,a,o;return Object(e["a"])().w((function(t){while(1)switch(t.n){case 0:return t.n=1,Object(n["$cms"])().get("/api/cms/breadcrumb/".concat(i));case 1:return o=t.v,t.a(2,(null===o||void 0===o||null===(s=o.data)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.html)||"")}}),t)}))),l.apply(this,arguments)}},"618b":function(t,i,s){},"81d5":function(t,i,s){"use strict";var e=s("7b0b"),a=s("23cb"),n=s("07fa");t.exports=function(t){var i=e(this),s=n(i),o=arguments.length,c=a(o>1?arguments[1]:void 0,s),r=o>2?arguments[2]:void 0,l=void 0===r?s:a(r,s);while(l>c)i[c++]=t;return i}},bed4:function(t,i,s){},cb29:function(t,i,s){"use strict";var e=s("23e7"),a=s("81d5"),n=s("44d2");e({target:"Array",proto:!0},{fill:a}),n("fill")},cc69:function(t,i,s){},d8c8:function(t,i,s){"use strict";s.r(i);s("99af"),s("b0c0"),s("a9e3"),s("b680");var e=function(){var t=this,i=t._self._c;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],class:t.theme,attrs:{id:"app"}},[i("Header"),i("div",{staticClass:"p-event-blindbox"},[t.isVideo?i("div",{staticClass:"m-video"},[i("video",{staticClass:"u-video",attrs:{autoplay:"",muted:"",loop:"",poster:"".concat(t.themeImg,"bg.jpg"),preload:"metadata"},domProps:{muted:!0}},[i("source",{attrs:{src:"https://cdn.jx3box.com/design/event/lottery/".concat(t.theme,"/bg.mp4"),type:"video/mp4"}})])]):i("el-image",{staticClass:"m-bg",attrs:{src:"".concat(t.themeImg,"bg.jpg"),fit:"cover"}}),i("div",{staticClass:"p-event-content"},[i("div",{staticClass:"m-content"},[i("div",{staticClass:"m-left"},[i("div",{staticClass:"logo"},[i("img",{attrs:{src:"".concat(t.themeImg,"logo.svg?123"),alt:"魔盒盲盒"}}),i("el-tooltip",{attrs:{effect:"light",placement:"right-start"}},[i("img",{staticClass:"u-info",attrs:{src:"".concat(t.__imgRoot,"desc.svg"),alt:"活动说明"}}),i("div",{staticClass:"m-blindbox-info",attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.info)+" ")])])],1),i("div",{staticClass:"m-box",class:{active:t.allActive}},[t._l(t.boxList,(function(s,e){return i("div",{key:e,class:["u-box","u-box-".concat(e+1),{active:s===t.active}],on:{click:function(i){return t.change(s)}}},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.showBox(e),expression:"showBox(index)"}],key:t.replay+"box"+e,staticClass:"u-img",attrs:{src:"".concat(t.themeImg).concat("weiqi"===t.theme&&e<5?"boxBlack":"box",".svg?123"),alt:"奖品"}})])})),t.isLogin?t._e():i("div",{staticClass:"m-mark",on:{click:t.toLogin}}),i("div",{staticClass:"u-mark",class:{active:t.mark||!t.activeList.length}})],2)]),i("div",{staticClass:"m-right"},[i("div",{staticClass:"m-point"},[t._v(t._s(t.points))]),i("div",{staticClass:"m-prize box"},[i("div",{staticClass:"m-title"},[i("div",{staticStyle:{display:"flex"}},[i("img",{staticClass:"u-prize",attrs:{src:"".concat(t.__imgRoot,"prize.png"),alt:"奖品一览"}}),i("div",{staticClass:"u-preview",on:{click:function(i){t.preview=!0}}},[t._v("速览")])]),i("el-dialog",{attrs:{title:"奖品速览",visible:t.preview,width:"80%","before-close":function(){return t.preview=!1},"append-to-body":!0,"custom-class":"m-preview-dialog"},on:{"update:visible":function(i){t.preview=i}}},[i("div",{staticClass:"m-preview"},t._l(t.previewList,(function(s,e){return i("a",{key:e,staticClass:"m-preview-item",attrs:{href:t.aLink(s),target:"_blank","data-index":e}},[i("div",{staticClass:"u-prize"},[i("img",{attrs:{src:s.img}}),i("div",{staticClass:"u-prize-name"},[t._v(t._s(s.name))]),"积分（积分）"!==s.name?i("span",{staticClass:"u-prize-count"},[t._v("剩余量 "),i("b",[t._v(t._s(s.prize_count-s.be_won_count))]),i("el-progress",{attrs:{percentage:Number(((s.prize_count-s.be_won_count)/s.prize_count*100).toFixed(1))}})],1):i("span",[t._v("不限量")])])])})),0)]),i("el-tooltip",{attrs:{effect:"light",placement:"right-start"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.odds,expression:"odds"}],staticClass:"u-odds"},[t._v("+ 概率公式")]),i("div",{staticClass:"m-blindbox-info",attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.odds)+" ")])])],1),i("div",{staticClass:"m-scroll"},[i("div",{ref:"scroll",staticClass:"m-scroll-box"},[t._l(t.prizeList,(function(s,e){return i("a",{key:e,staticClass:"u-item",attrs:{href:t.aLink(s),target:"_blank","data-index":e}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:s.name,placement:"top"}},[i("div",{staticClass:"u-prize"},[i("img",{attrs:{src:s.img}}),s.prize_count?i("div",{staticClass:"u-count"},[i("span",[t._v("【总数量】"+t._s(s.prize_count))]),i("span",[t._v("【已抽出】"+t._s(s.be_won_count))])]):t._e()])])],1)})),t._l(t.prizeList,(function(s,e){return i("a",{key:"v"+e,staticClass:"u-item",attrs:{href:t.aLink(s),target:"_blank","data-index":e}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:s.name,placement:"top"}},[i("div",{staticClass:"u-prize"},[i("img",{attrs:{src:s.img}}),s.prize_count?i("div",{staticClass:"u-count"},[i("span",[t._v("【总数量】"+t._s(s.prize_count))]),i("span",[t._v("【已抽出】"+t._s(s.be_won_count))])]):t._e()])])],1)}))],2)]),t.gift_off?i("div",{staticClass:"u-git-tips"},[t._v("~ * "+t._s(t.gift_off)+" * ~")]):t._e()]),t.draw.length?i("div",{staticClass:"m-lottery"},[t.isLogin?t._e():i("div",{staticClass:"m-mark",on:{click:t.toLogin}}),"weiqi"!==t.theme?i("img",{staticClass:"u-img refresh",attrs:{src:"".concat(t.themeImg,"refresh.svg"),alt:"刷新盲盒"},on:{click:t.refreshBox}}):t._e(),"weiqi"===t.theme?i("div",{staticClass:"u-img refresh",on:{click:t.refreshBox}}):t._e(),i("div",{staticClass:"m-random u-img",class:{disabled:!t.activeList.length||t.points<t.draw[0][1]||t.isDrawing},on:{click:t.openBox}},[i("span",{staticClass:"u-price"},[t._v(t._s(t.draw[0][1]))])]),i("div",{staticClass:"m-open u-img",class:{disabled:t.points<t.draw[1][1]||t.isDrawing},on:{click:function(i){return t.openBox("all")}}},[i("span",{staticClass:"u-price u-discount"},[t._v(" x "+t._s(t.draw[1][1]))]),i("span",{staticClass:"u-price"},[t._v(" x "+t._s(10*t.draw[0][1]))])]),i("div",{staticClass:"m-history box",class:t.history?"history":"close"},[i("div",{staticClass:"m-title",on:{click:t.openHistory}},[i("img",{staticClass:"u-history",attrs:{src:"".concat(t.__imgRoot,"history.png"),alt:"开盒记录"}}),i("img",{staticClass:"u-close",attrs:{src:"".concat(t.__imgRoot,"close.png"),width:"42px",alt:"关闭"},on:{click:function(i){return i.stopPropagation(),t.closeHistory.apply(null,arguments)}}})]),t.isLogin?t._e():i("div",{staticClass:"m-mark",on:{click:t.toLogin}}),i("History",{attrs:{id:t.ID,show:t.history},on:{update:t.showPrizes}})],1)]):t._e()])])]),i("div",{staticClass:"m-goods",class:{active:t.hasPrize},on:{click:function(i){return i.stopPropagation(),t.closePrize.apply(null,arguments)}}},[i("div",{staticClass:"m-item"},t._l(t.myPrizes,(function(s,e){return i("div",{key:e,staticClass:"u-item box"},["vip_asset"==s.prize_type?[i("img",{staticClass:"u-img",attrs:{src:"".concat(t.__imgRoot,"points.png")}}),i("span",[t._v(t._s(s.vip_asset_once_give+t.asset[s.vip_asset_type]))])]:t._e(),"thanks"==s.prize_type?[i("img",{staticClass:"u-img",attrs:{src:"".concat(t.__imgRoot,"thanks.png?123")}}),i("span",[t._v("感谢参与")])]:t._e(),"mall_goods"==s.prize_type?[i("img",{staticClass:"u-img",attrs:{src:s.goods.goods_images[0]}}),i("span",[t._v(t._s(s.goods.title))]),s.goods.is_virtual?t._e():i("a",{staticClass:"u-tips",attrs:{href:t.address,target:"_blank"}},[t._v(" 点击填写收货地址 ")])]:t._e()],2)})),0),i("img",{staticClass:"u-get",class:{disabled:null!==t.prizesInterval},attrs:{src:"".concat(t.themeImg).concat(t.history?"ok":"get",".svg?123"),alt:"拿下"},on:{click:function(i){return i.stopPropagation(),t.closePrize.apply(null,arguments)}}})])],1),t.event_status?t._e():i("div",{staticClass:"mark"},[i("div",{staticClass:"m-box"},[i("img",{attrs:{src:"".concat(t.__imgRoot,"null.png"),alt:"活动暂未开启"}})])]),t.visible?i("div",{staticClass:"mark",on:{click:function(i){t.visible=!1}}},[i("div",{staticClass:"m-box"},[i("bindWechat",{on:{close:function(i){t.visible=!1}}})],1)]):t._e()],1)},a=[],n=(s("cb29"),s("4de4"),s("caad"),s("d81d"),s("14d9"),s("4e82"),s("e9f5"),s("910d"),s("7d54"),s("ab43"),s("d3b7"),s("2532"),s("3ca3"),s("159b"),s("ddb0"),function(){var t=this,i=t._self._c;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-notice-wechat",on:{click:t.handleClose}},[i("div",{staticClass:"m-wechat-content"},[t.ticket?i("el-image",{staticClass:"u-qr",attrs:{src:t.qrcodeValue,lazy:""}}):t._e(),t.success?[t._m(0),i("span",{staticClass:"u-tips"},[t._v("请刷新页面后再进行抽奖")])]:i("i",{staticClass:"u-tip"},[t._v("请关注公众号再进行抽奖")])],2)])}),o=[function(){var t=this,i=t._self._c;return i("div",{staticClass:"u-bind"},[i("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a","margin-right":"5px"}}),i("span",{staticClass:"u-bind-text"},[t._v("绑定成功")])])}],c=s("41cb");function r(t){return Object(c["$pay"])().get("/api/lucky-draw/my/history",{params:t})}function l(t){return Object(c["$pay"])().get("/api/lucky-draw/my/history/".concat(t,"/details"))}function u(t){return Object(c["$pay"])().get("/api/lucky-draw/public/details",{params:{id:t}})}function d(t,i){return Object(c["$pay"])().post("/api/lucky-draw/public/item/".concat(t,"/try-my-lucky?batch=").concat(i))}function p(){return Object(c["$cms"])().get("/api/cms/wechat/mp/bind")}function h(){return Object(c["$cms"])().get("/api/cms/user/my/info",{params:{__no_cache:1}})}function m(){return Object(c["$cms"])().get("/api/cms/config",{params:{key:"lottery"}})}var v=s("c9d2"),f=s("65c2"),g=s("41cb"),_=g.SSE,b="https://mp.weixin.qq.com/cgi-bin/showqrcode",y={name:"wechat",data:function(){return{ticket:"",sse:null,profile:null,success:!1,loading:!1,isPhone:window.innerWidth<768}},computed:{url:function(){return f["__cms"]+"api/cms/wechat/mp/bind/result?token="+v["a"].getToken()},isWechatVerified:function(){var t;return!(null===(t=this.profile)||void 0===t||!t.wechat_mp_openid)},qrcodeValue:function(){return"".concat(b,"?ticket=").concat(encodeURIComponent(this.ticket))}},mounted:function(){this.loadUser()},methods:{loadUser:function(){var t=this;h().then((function(i){t.profile=i.data.data,t.loadQrcode()}))},handleClose:function(){this.sse&&this.sse.disconnect(),this.$emit("close")},loadQrcode:function(){var t=this;this.loading=!0,p().then((function(i){var s;t.ticket=null===(s=i.data.data)||void 0===s?void 0:s.ticket,!t.isWechatVerified&&t.ticket&&(t.sse&&t.sse.disconnect(),t.initSSE())})).finally((function(){t.loading=!1}))},initSSE:function(){this.sse=new _(this.url),this.sse.connect(),this.sse.on("open",(function(t){console.log("SSE Initialization")})),this.sse.on("bind_wx_mp",this.onMessage),this.sse.on("error",(function(t){console.log("SSE Error",t)}))},onMessage:function(){this.success=!0,this.profile.wechat_mp_openid=!0,localStorage.setItem("bind_wx",1)}}},w=y,k=(s("4293"),s("2877")),x=Object(k["a"])(w,n,o,!1,null,null,null),C=x.exports,z=function(){var t=this,i=t._self._c;return i("div",{staticClass:"m-history-content"},[i("div",{staticClass:"m-toolbar"},[i("el-radio-group",{attrs:{size:"mini",fill:"#000"},model:{value:t.status,callback:function(i){t.status=i},expression:"status"}},[i("el-radio-button",{attrs:{label:"0"}},[t._v("全部记录")]),i("el-radio-button",{attrs:{label:"2"}},[t._v("中奖")]),i("el-radio-button",{attrs:{label:"3"}},[t._v("未中奖")])],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-table-box",attrs:{data:t.list,align:"left"}},[i("el-table-column",{attrs:{prop:"created_at",width:"160px",label:"抽奖时间"}}),i("el-table-column",{attrs:{prop:"chance_count",width:"2"==t.status?"90px":"",label:"抽奖次数"}}),"2"==t.status?i("el-table-column",{attrs:{prop:"win_count",width:"90px",label:"中奖数量"}}):t._e(),"2"!==t.status?i("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(s){return[i("el-tag",{attrs:{type:2==s.row.status?"success":"info",size:"small"}},[t._v(" "+t._s(2==s.row.status?"中奖":"未中奖")+" ")])]}}],null,!1,792952835)}):t._e(),"3"!==t.status?i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[2==s.row.status?i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.look(s.row.id)}}},[t._v(" 查看详情 ")]):t._e(),s.row.address?i("el-button",{attrs:{size:"mini"},on:{click:t.editAddress}},[t._v(" 填写地址 ")]):t._e()]}}],null,!1,201261229)}):t._e()],1),i("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"prev, pager, next","hide-on-single-page":!0,"page-size":t.pageSize,total:t.total,"current-page":t.index},on:{"update:currentPage":function(i){t.index=i},"update:current-page":function(i){t.index=i},"current-change":t.change}})],1)},L=[],I=s("2ef0"),P={name:"History",props:["id","show"],data:function(){return{list:[],index:0,pageSize:7,total:0,loading:!1,status:"2"}},watch:{show:{immediate:!0,handler:function(t){t&&this.load(this.id)}},status:function(){this.index=1,this.load()}},methods:{load:function(t){var i=this;this.loading=!0;var s={luckyDrawId:t,pageSize:this.pageSize,index:this.index,status:this.status};r(s).then((function(t){var s=t.data.data.list||[];"2"==i.status&&(s=s.map((function(t){return t.address=Object(I["some"])(t.prizes,(function(t){return"entity"==t.goods.category})),t}))),i.list=s,i.total=t.data.data.page.total})).finally((function(){i.loading=!1}))},look:function(t){this.$emit("update",t)},change:function(t){this.index=t,this.load(this.id)},editAddress:function(){var t=f["__Root"]+"dashboard/address";window.open(t,"_blank")}}},j=P,O=(s("3fb4"),Object(k["a"])(j,z,L,!1,null,null,null)),B=O.exports,D=s("6168"),S=s("85e4"),$=(s("1efd"),s("1922"),s("bed4"),s("cc69"),[2,3]),R={name:"Index",data:function(){return{theme:"",raw:{},draw:{},prizeList:[],previewList:[],points:0,index:0,active:"",allActive:!1,boxList:new Array(10).fill(1).map((function(t,i){return i+1})),activeList:[],replay:0,historyList:[],status:{0:"全部",1:"抽奖中",2:"中奖",3:"未中奖"},asset:{boxcoin:"盒币（重制）",boxcoin_origin:"盒币（缘起）",point:"积分"},mark:!1,history:!1,close:!1,hasPrize:!1,myPrizes:[],scrollInterval:null,prizesInterval:null,isDrawing:!1,info:"",odds:"",blindboxID:"",event_status:!0,gift_off:!1,visible:!1,loading:!1,user:{},preview:!1}},components:{History:B,bindWechat:C},computed:{data:function(){var t={};return this.raw.forEach((function(i){t[i.subtype]||(t[i.subtype]=[]),t[i.subtype].push(i)})),t},isLogin:function(){return v["a"].isLogin()},isBindWechat:function(){var t;return!(null===(t=this.user)||void 0===t||!t.wechat_mp_openid)},__imgRoot:function(){return f["__cdn"]+"design/event/lottery/"},themeImg:function(){return this.theme&&"normal"!==this.theme?this.__imgRoot+this.theme+"/":this.__imgRoot},address:function(){return f["__Root"]+"dashboard/address"},ID:function(){return this.$route.query.id||this.blindboxID||0},assetImg:function(){return{point:"".concat(this.__imgRoot,"points.png"),boxcoin:"".concat(this.__imgRoot,"boxcoin.png")}},isVideo:function(){var t={hacker:"hacker",weiqi:"weiqi"};return t[this.theme]}},watch:{isLogin:{immediate:!0,handler:function(t){t&&this.myPoints()}},ID:{immediate:!0,handler:function(t){t&&this.load()}},theme:{immediate:!0,handler:function(t){"hacker"==t&&(document.body.style.backgroundColor="#000")}}},mounted:function(){this.init(),this.loadUser()},methods:{loadUser:function(){var t=this;this.isLogin&&h().then((function(i){t.user=i.data.data}))},init:function(){var t=this;m().then((function(i){var s,e,a=!!~~(null===(s=i.data)||void 0===s||null===(e=s.data)||void 0===e?void 0:e.val)||0;a?v["a"].isTeammate()?t.LoadId():t.event_status=!1:t.LoadId()}))},LoadId:function(){var t=this;Object(D["b"])({key:"lottery_ID"}).then((function(i){t.blindboxID=i.val;var s=[Object(D["a"])("lottery_info"),Object(D["a"])("lottery_odds_".concat(t.ID)),Object(D["a"])("lottery_gift_status_".concat(t.ID))];Promise.all(s).then((function(i){t.info=i[0],t.odds=i[1],t.gift_off=i[2]})).finally((function(){t.loading=!1}))}))},load:function(){var t=this;u(this.ID).then((function(i){var s=i.data.data;t.draw=Object(I["zip"])(s.allow_once_try_count,s.allow_once_try_count_cost_points),t.previewList=t.setPrizeList(s),t.prizeList=t.setPrizeList(s).reverse(),t.scroll(t.prizeList.length);var e=s.user_level_limit,a=v["a"].getLevel(t.user.experience);e>a&&t.$alert("很抱歉，您的用户等级不足","无法进行当前活动",{type:"error"}),t.theme=s.skin,t.refreshBox()})).catch((function(i){t.$alert("活动还未开始或已结束",{type:"error"})}))},setPrizeList:function(t){var i=this;return t.prize.map((function(t){return"mall_goods"!=t.prize_type&&i.assetImg[t.vip_asset_type]?{img:i.assetImg[t.vip_asset_type],name:"积分（积分）"}:{id:t.mall_goods.id,img:Object(S["resolveImagePath"])(t.mall_goods.goods_images[0]),name:t.mall_goods.title,be_won_count:t.be_won_count,prize_count:t.prize_count}}))},toLogin:function(){this.$confirm("参与抽奖必须登录, 是否登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){v["a"].toLogin()}))},showBox:function(t){return this.activeList.includes(t+1)},aLink:function(t){var i=t.id;return i?f["__Root"]+"vip/mall/"+i:""},myPoints:function(){var t=this;v["a"].getAsset().then((function(i){t.points=(null===i||void 0===i?void 0:i.points)||0}))},scroll:function(t){var i=this;setTimeout((function(){var s="\n            @keyframes scroll_prize {\n                0% {\n                    transform: translateX(0);\n                }\n                100% {\n                    transform: translateX(-".concat(148*t,"px);\n                }\n            }"),e=document.createElement("style");e.setAttribute("type","text/css"),document.head.appendChild(e),e.sheet.insertRule(s),i.$refs.scroll.style.animation="scroll_prize ".concat(148*t/50,"s linear infinite")}),1500)},refreshBox:function(){this.allActive=!1,this.activeList=Object(I["cloneDeep"])(this.boxList),this.replay++},openBox:Object(I["throttle"])((function(t){var i=this;if(this.isBindWechat)if("all"===t){var s=0;this.activeList.length<10&&(this.activeList=[],this.refreshBox(),s=2e3),setTimeout((function(){i.openAllBox()}),s)}else{var e=this.activeList[Math.floor(Math.random()*this.activeList.length)];this.change(e)}else this.visible=!0}),3e3),openAllBox:function(){var t=this;this.allActive=!0,setTimeout((function(){t.activeList=[],t.allActive=!1}),1600),this.hasLucky()},change:function(t){var i=this;this.points<this.draw[0][1]||this.mark||(this.active=t,this.mark=!0,setTimeout((function(){i.activeList=i.activeList.filter((function(i){return i!==t})),i.mark=!1,i.active=""}),1600),this.hasLucky())},hasLucky:function(){var t=this,i=1;this.allActive&&(i=10),this.isDrawing=!0,d(this.ID,i).then((function(i){var s,e=null===(s=i.data)||void 0===s?void 0:s.data.id;t.showPrizes(e,!0),t.myPoints()}))},showPrizes:function(t,i){var s=this;if(t){var e=0,a=function(){l(t).then((function(t){var a;if(e>5)return clearInterval(s.prizesInterval),s.prizesInterval=null,s.$alert("请前往开盒记录查看，如无结果请联系网站管理人员","开盒出现异常",{type:"error"});if(-1!==$.indexOf(null===(a=t.data)||void 0===a?void 0:a.data.status)){var n,o;s.myPrizes=(null===(n=t.data)||void 0===n?void 0:n.data.prizes)&&(null===(o=t.data)||void 0===o?void 0:o.data.prizes.map((function(t){return t.goods.goods_images&&(t.goods.goods_images[0]=Object(S["resolveImagePath"])(t.goods.goods_images[0])),t})))||[];var c=!0;if(i&&c){var r,l,u,d,p=(null===(r=t.data)||void 0===r||null===(l=r.data)||void 0===l||null===(u=l.prizes)||void 0===u?void 0:u.length)||0,h=(null===(d=t.data)||void 0===d?void 0:d.data.chance_count)-p,m=new Array(h).fill({prize_type:"thanks"});s.myPrizes=s.myPrizes.concat(m).sort((function(){return.5-Math.random()})),c=!1}s.hasPrize=!0,clearInterval(s.prizesInterval),s.prizesInterval=null}else e++}))};i?this.prizesInterval=setInterval(a,1e3):a()}},closePrize:function(){var t=this;this.hasPrize=!1,this.isDrawing=!1,this.history||u(this.ID).then((function(i){var s=i.data.data;t.prizeList=t.setPrizeList(s),t.scroll(t.prizeList.length)})),this.activeList.length||this.refreshBox(),this.myPrizes=[]},openHistory:function(){this.history=!0},closeHistory:function(){this.history=!1}},destroyed:function(){clearInterval(this.scrollInterval)}},A=R,q=(s("dcb8"),Object(k["a"])(A,e,a,!1,null,null,null));i["default"]=q.exports},dcb8:function(t,i,s){"use strict";s("618b")}}]);