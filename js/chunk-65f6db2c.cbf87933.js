(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65f6db2c"],{"01ea":function(t,n,e){"use strict";e.d(n,"k",(function(){return s})),e.d(n,"h",(function(){return c})),e.d(n,"j",(function(){return r})),e.d(n,"g",(function(){return u})),e.d(n,"q",(function(){return l})),e.d(n,"c",(function(){return d})),e.d(n,"b",(function(){return _})),e.d(n,"m",(function(){return p})),e.d(n,"e",(function(){return f})),e.d(n,"f",(function(){return h})),e.d(n,"l",(function(){return m})),e.d(n,"r",(function(){return v})),e.d(n,"d",(function(){return b})),e.d(n,"i",(function(){return g})),e.d(n,"n",(function(){return w})),e.d(n,"o",(function(){return x})),e.d(n,"p",(function(){return C})),e.d(n,"a",(function(){return j})),e.d(n,"t",(function(){return y}));var i=e("5530"),a=e("65c2"),o=Object(i["a"])(Object(i["a"])({},a),{},{__dataPath:"https://data.jx3box.com/",__imgPath:"https://img.jx3box.com/",__iconPath:"https://icon.jx3box.com/"}),s=o.__imgPath,c=o.__dataPath,r=o.__iconPath,u=o.__cms,l=(o.__down,o.__node,o.__ossMirror,o.__ossRoot,o.__visibleMap),d=(o.default_avatar,o.__Root),_=o.__OriginRoot,p=(o.__Github,o.__Preview,o.__server),f=(o.__sso,o.__spider,o.__spider2,o.__next,o.__pay,o.__team,o.__lua,o.__dbm,o.__helperUrl,o.__os,o.__jx3,o.__cdn),h=(o.__staticPath,o.__clients),m=o.__postType,v=o.__wikiType,b=o.__appType,g=o.__gameType,w=(o.__sourceType,o.__userGroup),x=o.__userLevel,C=o.__userLevelColor,j=o.__Links,y=o.feedback;n["s"]=o},"0ee9":function(t,n,e){"use strict";e("c0c42")},"99d9":function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t._self._c;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-dashboard-work m-dashboard-cms m-dashboard-union"},[n("div",{staticClass:"m-dashboard-work-header"},[n("h2",{staticClass:"u-title"},[t._v(" 联合创作 "),n("span",{staticClass:"u-subtype"},[n("i",{staticClass:"el-icon-arrow-right"}),n("span",[t._v(t._s(t.subtype))])])])]),n("div",{staticClass:"m-dashboard-box"},[t.data&&t.data.length?n("ul",{staticClass:"m-dashboard-box-list"},t._l(t.data,(function(e,i){return n("li",{key:i},[e.union_post_raw?[n("i",{staticClass:"u-icon"},["publish"==e.union_post_raw.post_status?n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16",width:"12",height:"16","aria-hidden":"true",fill:"#555","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"}})]):n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16",width:"12",height:"16",fill:"#dbab09","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M4 13H3v-1h1v1zm8-6v7c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h1V4c0-2.2 1.8-4 4-4s4 1.8 4 4v2h1c.55 0 1 .45 1 1zM3.8 6h4.41V4c0-1.22-.98-2.2-2.2-2.2-1.22 0-2.2.98-2.2 2.2v2H3.8zM11 7H2v7h9V7zM4 8H3v1h1V8zm0 2H3v1h1v-1z"}})])]),n("a",{staticClass:"u-title",attrs:{target:"_blank",href:t.postLink(e.union_post_raw.post_type,e.union_post_raw.ID)}},[t._v(t._s(e.union_post_raw.post_title||"无标题"))]),n("div",{staticClass:"u-desc"},[n("span",{staticClass:"u-desc-subitem"},[n("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(t._f("visibleFormat")(e.union_post_raw.visible))+" ")]),n("time",{staticClass:"u-desc-subitem"},[n("i",{staticClass:"el-icon-finished"}),t._v(" 发布 : "+t._s(t._f("dateFormat")(e.union_post_raw.post_date))+" ")]),n("time",{staticClass:"u-desc-subitem"},[n("i",{staticClass:"el-icon-refresh"}),t._v(" 更新 : "+t._s(t._f("dateFormat")(e.union_post_raw.post_modified))+" ")])]),n("el-button-group",{staticClass:"u-action"},[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",title:"编辑"},on:{click:function(n){return t.edit(e.union_post_raw.post_type,e.union_post_raw.ID)}}}),t.isActive?n("el-button",{attrs:{size:"mini",icon:"el-icon-delete",title:"删除"},on:{click:function(n){return t.del(e.union_post_raw.ID,i)}}}):n("el-popconfirm",{attrs:{title:"确认退出该作品的联合创作者身份吗？"},on:{confirm:function(n){return t.quit(e.union_post_raw.ID,i)}}},[n("el-button",{staticClass:"u-quit",attrs:{slot:"reference",size:"mini",icon:"el-icon-download",title:"退出联合身份"},slot:"reference"})],1)],1)]:t._e()],2)})),0):n("el-alert",{staticClass:"m-dashboard-box-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),n("el-pagination",{staticClass:"m-dashboard-box-pages",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(n){t.page=n},"update:current-page":function(n){t.page=n}}})],1)])},a=[],o=(e("a434"),e("b0c0"),e("d3b7"),e("ccee")),s=e("e623"),c=e("85e4"),r=e("01ea"),u=e("fb92"),l={name:"work",props:[],data:function(){return{loading:!1,data:[],total:1,page:1,per:10}},computed:{params:function(){return{page:this.page,per:this.per,is_active:~~this.isActive}},subtype:function(){return"union_active"==this.$route.name?"邀请创作":"受邀创作"},isActive:function(){return"union_active"==this.$route.name}},watch:{params:{deep:!0,immediate:!0,handler:function(t){this.loadPosts()}}},methods:{loadPosts:function(){var t=this;this.loading=!0,Object(s["c"])(this.params).then((function(n){t.data=n.data.data.list||[],t.total=n.data.data.total})).finally((function(){t.loading=!1}))},edit:function(t,n){location.href="/publish/#/"+t+"/"+n},postLink:function(t,n){return Object(c["getLink"])(t,n)},quit:function(t,n){var e=this;Object(s["d"])(t).then((function(t){e.$notify({title:"退出成功",message:"成功退出该作品联合创作",type:"success"}),e.data.splice(n,1)}))},del:function(t,n){var e=this;this.$alert("确定要删除吗？","确认信息",{confirmButtonText:"确定",callback:function(i){"confirm"==i&&Object(o["a"])(t).then((function(t){e.$notify({title:"删除成功",message:"成功删除作品",type:"success"}),e.data.splice(n,1)}))}})}},filters:{dateFormat:function(t){return Object(u["a"])(new Date(t))},visibleFormat:function(t){return r["q"][~~t]}}},d=l,_=(e("0ee9"),e("2877")),p=Object(_["a"])(d,i,a,!1,null,null,null);n["default"]=p.exports},c0c42:function(t,n,e){},e623:function(t,n,e){"use strict";e.d(n,"c",(function(){return a})),e.d(n,"d",(function(){return o})),e.d(n,"a",(function(){return c})),e.d(n,"b",(function(){return s})),e.d(n,"f",(function(){return r})),e.d(n,"e",(function(){return u}));e("99af");var i=e("41cb");function a(t){return Object(i["$cms"])().get("/api/cms/posts/user/my/union",{params:t})}function o(t){return Object(i["$cms"])().delete("/api/cms/post/".concat(t,"/authors/quit"))}function s(t){return Object(i["$cms"])().get("/api/cms/post/".concat(t,"/authors"))}function c(t,n){return Object(i["$cms"])().post("/api/cms/post/".concat(t,"/author/").concat(n),{label:"撰稿",r_edit:1})}function r(t,n,e){return Object(i["$cms"])().put("/api/cms/post/".concat(t,"/author/").concat(n),e)}function u(t,n){return Object(i["$cms"])().delete("/api/cms/post/".concat(t,"/author/").concat(n))}},fb92:function(t,n,e){"use strict";e("99af");function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.getFullYear(),o=t.getMonth()+1,s=t.getDate(),c=e?"".concat(i).concat(n).concat(a(o)).concat(n).concat(a(s)):"".concat(i).concat(n).concat(o).concat(n).concat(s);return c}function a(t){return t<10?"0"+t:t}n["a"]=i}}]);