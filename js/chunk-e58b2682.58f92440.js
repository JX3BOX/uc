(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e58b2682"],{"2d46":function(t,e,n){"use strict";n.d(e,"q",(function(){return u})),n.d(e,"e",(function(){return s})),n.d(e,"o",(function(){return o})),n.d(e,"p",(function(){return d})),n.d(e,"k",(function(){return v})),n.d(e,"a",(function(){return p})),n.d(e,"i",(function(){return b})),n.d(e,"l",(function(){return g})),n.d(e,"b",(function(){return h})),n.d(e,"r",(function(){return l})),n.d(e,"d",(function(){return m})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return C})),n.d(e,"n",(function(){return $})),n.d(e,"j",(function(){return _})),n.d(e,"s",(function(){return x})),n.d(e,"c",(function(){return y})),n.d(e,"f",(function(){return j})),n.d(e,"m",(function(){return O}));var a=n("41cb"),c=n("bc3a"),r=n.n(c),i=n("01ea");function s(){return Object(a["$cms"])().get("/api/cms/user/my/profile")}function u(t){return Object(a["$cms"])().put("/api/cms/user/my/profile",t)}function o(t){return Object(a["$cms"])().put("/api/cms/user/my/avatar",t)}function l(t){return Object(a["$cms"])().post("/api/cms/upload/avatar",t)}function m(){var t=i["k"]+"avatar/index.json";return r.a.get(t)}function f(t){return Object(a["$cms"])().get("/api/cms/user/".concat(t,"/info"),{params:{__no_cache:1}})}function d(t){return Object(a["$cms"])().put("/api/cms/user/my/password",t)}function p(t){return Object(a["$cms"])().get("/api/cms/user/account/email/valid",{params:{email:t}})}function b(t){return Object(a["$cms"])().post("/api/cms/user/account/email/bind",t)}function v(t){return Object(a["$cms"])().put("/api/cms/user/account/email/verify",{code:t},{app:"jx3box"})}function h(){return Object(a["$cms"])().get("/api/cms/account/oauth/status")}function g(t){return Object(a["$cms"])({popType:"alert"}).delete("/api/cms/account/oauth/unbind/".concat(t))}function j(){return Object(a["$next"])().get("/api/next2/qqbot/bind-token")}function O(){return Object(a["$next"])().delete("/api/next2/qqbot/bind-token")}function C(){return Object(a["$cms"])().get("/api/cms/wechat/mp/bind")}function $(){return Object(a["$cms"])().get("/api/cms/wechat/mp/unbind")}function _(t){return Object(a["$cms"])().post("/api/cms/account/oauth/phone/bind",t,{app:"jx3box"})}function x(t){return Object(a["$cms"])().put("/api/cms/account/oauth/phone/verify",t,{app:"jx3box"})}function y(t){return Object(a["$cms"])().get("/api/cms/account/oauth/phone/check",{params:t})}},"39dd":function(t,e,n){},"48c0":function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-dashboard-profile m-profile"},[e("h2",{staticClass:"u-title"},[e("i",{class:t.icon}),t._v(" "+t._s(t.title)+" "),t._t("header")],2),e("tabs",{attrs:{tabs:t.tabList,"msg-change-count":t.msgChangeCount}}),t._t("default")],2)},c=[],r=(n("a9e3"),n("b0c0"),function(){var t=this,e=t._self._c;return e("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabs,(function(n){return e("el-tab-pane",{key:n.name,attrs:{name:n.name}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"u-tab-icon",class:n.icon}),t._v(" "+t._s(n.label)+" "),t.showCount?e("span",{staticClass:"u-count",class:t.count[t.countMap[n.name]]?"is-orange":""},[t._v("("+t._s(t.count[t.countMap[n.name]]||0)+")")]):t._e()])])})),1)}),i=[],s=(n("caad"),n("14d9"),n("c944")),u={name:"",props:{tabs:{type:Array,default:function(){return[]}},msgChangeCount:{type:Number,default:0}},data:function(){return{active:"",countMap:{msg:"message",letter:"letter"},count:{message:0,letter:0}}},watch:{$route:function(){this.active=this.routeName},msgChangeCount:{immediate:!0,handler:function(t){t>0&&(this.count.message=0),t<0&&this.count.message>0&&(this.count.message+=t)}}},computed:{showCount:function(){return["msg","letter"].includes(this.routeName)},routeName:function(){return this.$route.name}},methods:{changeTab:function(){this.$router.push({name:this.active})},loadCount:function(){var t=this;Object(s["b"])().then((function(e){var n,a=(null===(n=e.data)||void 0===n?void 0:n.data)||{};t.count.letter=a.letter||0})),Object(s["c"])().then((function(e){var n;t.count.message=(null===(n=e.data.data)||void 0===n?void 0:n.unread_count)||0}))}},mounted:function(){this.active=this.routeName,this.showCount&&this.loadCount()},components:{}},o=u,l=n("2877"),m=Object(l["a"])(o,r,i,!1,null,null,null),f=m.exports,d=n("5c97"),p={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return d["d"]}},msgChangeCount:{type:Number,default:0}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:f}},b=p,v=(n("dc6f"),Object(l["a"])(b,a,c,!1,null,null,null));e["a"]=v.exports},"5c97":function(t){t.exports=JSON.parse('{"e":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"medal","icon":"el-icon-medal","label":"勋章"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"}],"d":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"notice","icon":"el-icon-message","label":"通知中心"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"},{"name":"auth","icon":"el-icon-s-check","label":"账号认证"}],"b":[{"name":"mall","icon":"el-icon-shopping-bag-1","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-2","label":"系统订单"}],"c":[{"name":"msg","icon":"el-icon-message","label":"通知"},{"name":"letter","icon":"el-icon-chat-dot-square","label":"私信"}],"a":[{"name":"certification","icon":"el-icon-medal","label":"电子证书"},{"name":"holidayCard","icon":"el-icon-sugar","label":"节日贺卡"},{"name":"birthdayCard","icon":"el-icon-present","label":"生日贺卡"}]}')},7379:function(t,e,n){},ab27:function(t,e,n){"use strict";n("7379")},c944:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return u}));var a=n("41cb");function c(t){return Object(a["$next"])().get("/api/next2/userdata/messages",{params:t})}function r(t){return Object(a["$next"])().put("/api/next2/userdata/messages/read/".concat(t))}function i(){return Object(a["$next"])().put("/api/next2/userdata/messages/read")}function s(t){return Object(a["$next"])().delete("/api/next2/userdata/messages/".concat(t))}function u(){return Object(a["$next"])({mute:!0}).get("/api/next2/userdata/messages/unread_total")}function o(){return Object(a["$next"])({mute:!0}).get("/api/letter/unread/count")}function l(t){return Object(a["$next"])().get("/api/next2/comment/item/".concat(t))}},ca63:function(t,e,n){"use strict";n.r(e);n("b0c0");var a=function(){var t=this,e=t._self._c;return e("uc",{staticClass:"m-dashboard-frame m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[e("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[e("div",{staticClass:"m-frame"},[e("div",{staticClass:"m-frame-left"},[e("a",{staticClass:"u-btn el-button el-button--default el-button--mini is-plain",attrs:{href:"/dashboard/avatar",target:"_blank"}},[e("i",{staticClass:"el-icon-picture-outline-round"}),t._v(" 修改头像")]),e("div",{staticClass:"u-avatar-box"},[e("div",{staticClass:"u-avatar"},[e("img",{staticClass:"u-avatar-pic",attrs:{src:t.showAvatar(t.avatar)}}),t.frame?e("i",{staticClass:"u-avatar-frame"},[e("img",{attrs:{src:t.frameUrl(t.frame)}})]):t._e()])])]),e("div",{staticClass:"m-frame-right"},[e("div",{staticClass:"u-theme"},[e("div",{staticClass:"u-frame-list"},[e("div",{staticClass:"u-title"},[e("span",{staticClass:"u-name"},[e("i",{staticClass:"el-icon-collection-tag"}),t._v("头像框")]),e("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=avatar",target:"_blank"}},[e("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),e("div",{staticClass:"u-frame-item"},t._l(t.frameList,(function(n,a){return e("div",{key:a,staticClass:"u-picbox"},[e("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":200}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(n.desc)),e("br"),t._v(t._s(n.postscript))]),e("div",{staticClass:"u-pic",class:t.setClass(n),on:{click:function(e){return t.setAvatar(n)}}},[n.name?e("el-image",{attrs:{src:t.frameUrl(n.name),fit:"contain"}}):e("div",{staticClass:"u-noFrame"})],1)])],1)})),0)])])])]),e("div",{staticClass:"m-btn"},[e("el-button",{attrs:{type:"primary"},on:{click:t.updateAvatarFrame}},[t._v("确认")]),e("el-button",{on:{click:t.reset}},[t._v("清除所有装扮")])],1)])},c=[],r=n("5530"),i=(n("99af"),n("4de4"),n("7db0"),n("d81d"),n("14d9"),n("e9f5"),n("910d"),n("f665"),n("7d54"),n("ab43"),n("b64b"),n("d3b7"),n("159b"),n("48c0")),s=n("5c97"),u=n("c9d2"),o=n("85e4"),l=n("01ea"),m=n("2d46"),f=n("f6be"),d={name:"frame",props:[],data:function(){return{tabList:s["e"],uid:u["a"].getInfo().uid,frameList:[],framebak:"",framesBak:{},avatar:u["a"].getInfo().avatar_origin,frame:null,frames:{},avatars:[],decoration:null}},computed:{},methods:{reset:function(){this.frame=this.framebak,this.frames=this.framesBak,this.dataProcessing()},frameUrl:function(t){if(t)return l["k"]+"avatar/images/".concat(t,"/").concat(t,".svg")},showAvatar:function(t){return Object(o["showAvatar"])(t,600)},setClass:function(t){return t.decoration&&t.receive?"receive":t.isHave?t.using?"select":void 0:"noHave"},updateAvatarFrame:function(){var t=this;Object(f["q"])({user_avatar_frame:this.frame}).then((function(e){t.$message({message:"头像框更新成功",type:"success"});var n=t.frameList.map((function(t){return{val:t.name,using:t.using,type:"avatar"}}));Object(f["n"])(n)}))},receiveFrame:function(t){var e=this;Object(f["m"])(this.uid,t).then((function(t){e.$message({message:"领取成功",type:"success"}),e.loadDecoration()}))},setAvatar:function(t){if(t.decoration&&t.receive)this.receiveFrame(t.name);else if(t.isHave){var e=this.frameList,n=e.find((function(t){return 1==t.using}));n&&(n.using=0),1==t.using?t.using=0:t.using=1,this.frame=t.name}},load:function(){var t=this;Object(m["g"])(this.uid).then((function(e){t.frame=e.data.data.user_avatar_frame||"",t.framebak=e.data.data.user_avatar_frame||""})),Object(m["d"])().then((function(e){t.frames=e.data,t.framesBak=e.data,t.loadDecoration()}))},loadDecoration:function(){var t=this;Object(f["c"])().then((function(e){var n=e.data.data,a=["atcard","homebg","sidebar","calendar"],c=n.filter((function(t){return""!=t.type&&-1!=a.indexOf(t.type)}));t.decoration=t.formattingData(c,"val"),t.avatars=n.filter((function(t){return"avatar"==t.type})),t.dataProcessing()}))},formattingData:function(t,e){var n={};return t.forEach((function(t,a){n[t[e]]?n[t[e]].push(t):n[t[e]]=[t]})),n},decorationAather:function(t){var e,n=["atcard","homebg","sidebar","calendar"],a=null===(e=this.decoration[t])||void 0===e?void 0:e.filter((function(t){return""!=t.type&&-1!=n.indexOf(t.type)}));return(null===a||void 0===a?void 0:a.length)>=4},dataProcessing:function(){var t=this,e=this.avatars||[],n=this.frames,a=[{desc:"无边框",name:"",val:"",isHave:1,using:1}],c=[],i=[];Object.keys(n).forEach((function(s,u){var o=Object(r["a"])(Object(r["a"])({},n[s]),{isHave:0,using:0,receive:!1}),l=e.find((function(t){return t.val==s}));l?(o.using=l.using,o.isHave=1,o.using&&(a[0].using=0)):o.decoration&&(o.receive=t.decorationAather(o.name)),o.isHave?a.push(o):o.decoration?c.push(o):i.push(o)})),this.frameList=[].concat(a,c,i)}},mounted:function(){this.load()},components:{uc:i["a"]}},p=d,b=(n("ab27"),n("2877")),v=Object(b["a"])(p,a,c,!1,null,null,null);e["default"]=v.exports},dc6f:function(t,e,n){"use strict";n("39dd")},f6be:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"n",(function(){return o})),n.d(e,"d",(function(){return l})),n.d(e,"h",(function(){return f})),n.d(e,"e",(function(){return m})),n.d(e,"m",(function(){return d})),n.d(e,"q",(function(){return p})),n.d(e,"f",(function(){return b})),n.d(e,"i",(function(){return v})),n.d(e,"o",(function(){return h})),n.d(e,"a",(function(){return g})),n.d(e,"j",(function(){return j})),n.d(e,"g",(function(){return C})),n.d(e,"p",(function(){return $})),n.d(e,"k",(function(){return u})),n.d(e,"l",(function(){return O})),n.d(e,"b",(function(){return _}));n("99af");var a=n("41cb"),c=n("bc3a"),r=n.n(c),i=n("01ea");function s(t){return Object(a["$cms"])().get("/api/cms/user/decoration",{params:t})}function u(t){return Object(a["$cms"])().get("/api/cms/user/medal/check",{params:t})}function o(t){return Object(a["$cms"])().post("/api/cms/user/decoration",t)}function l(){var t=i["e"]+"design/decoration/index.json?".concat(Date.now());return r.a.get(t)}function m(){return r.a.get("".concat(i["h"],"emotion/output/catalog.json?").concat(Date.now()))}function f(t){return Object(a["$cms"])().get("/api/cms/user/decoration/check",{params:t})}function d(t,e){return Object(a["$cms"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(e,"/for/avatar"))}function p(t){return Object(a["$cms"])().put("/api/cms/user/my/avatar-frame",t)}function b(t){return Object(a["$cms"])().get("/api/cms/user/config/honor",{params:t})}function v(t){return Object(a["$next"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function h(t){return Object(a["$cms"])().put("/api/cms/user/honor/use/".concat(t))}function g(){return Object(a["$cms"])().delete("/api/cms/user/honor/use")}function j(t,e){return Object(a["$next"])({mute:!0}).get("/api/next2/user/"+t+"/medals",{params:e})}function O(t){return Object(a["$cms"])().post("/api/cms/user/medal/receive",t)}function C(t){return Object(a["$cms"])().get("/api/cms/config/medal",{params:t})}function $(t,e,n){return Object(a["$next"])().put("/api/next2/user/".concat(t,"/medals/").concat(e,"/wear/").concat(n))}function _(t){return Object(a["$cms"])().post("/api/cms/user/decoration/receive",t)}}}]);