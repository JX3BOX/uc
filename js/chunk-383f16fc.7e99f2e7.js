(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-383f16fc"],{"39dd":function(t,n,e){},"48c0":function(t,n,e){"use strict";var a=function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-dashboard-profile m-profile"},[n("h2",{staticClass:"u-title"},[n("i",{class:t.icon}),t._v(" "+t._s(t.title)+" "),t._t("header")],2),n("tabs",{attrs:{tabs:t.tabList,"msg-change-count":t.msgChangeCount}}),t._t("default")],2)},i=[],o=(e("a9e3"),e("b0c0"),function(){var t=this,n=t._self._c;return n("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":t.changeTab},model:{value:t.active,callback:function(n){t.active=n},expression:"active"}},t._l(t.tabs,(function(e){return n("el-tab-pane",{key:e.name,attrs:{name:e.name}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"u-tab-icon",class:e.icon}),t._v(" "+t._s(e.label)+" "),t.showCount?n("span",{staticClass:"u-count",class:t.count[t.countMap[e.name]]?"is-orange":""},[t._v("("+t._s(t.count[t.countMap[e.name]]||0)+")")]):t._e()])])})),1)}),s=[],c=(e("caad"),e("14d9"),e("c944")),r={name:"",props:{tabs:{type:Array,default:function(){return[]}},msgChangeCount:{type:Number,default:0}},data:function(){return{active:"",countMap:{msg:"message",letter:"letter"},count:{message:0,letter:0}}},watch:{$route:function(){this.active=this.routeName},msgChangeCount:{immediate:!0,handler:function(t){t>0&&(this.count.message=0),t<0&&this.count.message>0&&(this.count.message+=t)}}},computed:{showCount:function(){return["msg","letter"].includes(this.routeName)},routeName:function(){return this.$route.name}},methods:{changeTab:function(){this.$router.push({name:this.active})},loadCount:function(){var t=this;Object(c["b"])().then((function(n){var e,a=(null===(e=n.data)||void 0===e?void 0:e.data)||{};t.count.letter=a.letter||0})),Object(c["c"])().then((function(n){var e;t.count.message=(null===(e=n.data.data)||void 0===e?void 0:e.unread_count)||0}))}},mounted:function(){this.active=this.routeName,this.showCount&&this.loadCount()},components:{}},u=r,l=e("2877"),d=Object(l["a"])(u,o,s,!1,null,null,null),f=d.exports,m=e("5c97"),p={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return m["d"]}},msgChangeCount:{type:Number,default:0}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:f}},h=p,v=(e("dc6f"),Object(l["a"])(h,a,i,!1,null,null,null));n["a"]=v.exports},"5c97":function(t){t.exports=JSON.parse('{"e":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"medal","icon":"el-icon-medal","label":"勋章"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"}],"d":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"notice","icon":"el-icon-message","label":"通知中心"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"},{"name":"auth","icon":"el-icon-s-check","label":"账号认证"}],"b":[{"name":"mall","icon":"el-icon-shopping-bag-1","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-2","label":"系统订单"}],"c":[{"name":"msg","icon":"el-icon-message","label":"通知"},{"name":"letter","icon":"el-icon-chat-dot-square","label":"私信"}],"a":[{"name":"certification","icon":"el-icon-medal","label":"电子证书"},{"name":"holidayCard","icon":"el-icon-sugar","label":"节日贺卡"},{"name":"birthdayCard","icon":"el-icon-present","label":"生日贺卡"}]}')},"68c5":function(t,n,e){"use strict";e.r(n);e("b0c0");var a=function(){var t=this,n=t._self._c;return n("uc",{staticClass:"m-dashboard-honor m-dashboard-skin",attrs:{icon:"el-icon-brush",title:"主题装扮","tab-list":t.tabList},scopedSlots:t._u([{key:"header",fn:function(){return[n("a",{staticClass:"u-link el-button el-button--default el-button--mini is-round is-plain",attrs:{href:"/vip/mall?category=virtual",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取装扮")])]},proxy:!0}])},[n("div",{staticClass:"m-honor"},[n("div",{staticClass:"m-honor-left"},[n("div",{staticClass:"u-header-info"},[n("Avatar",{staticClass:"u-author-avatar",attrs:{uid:t.uid,url:t.avatar,size:t.avatarSize(),frame:t.avatar_frame}}),n("div",{staticClass:"u-author-info"},[n("span",{staticClass:"u-name"},[n("span",{on:{click:function(n){return t.copyData(t.data.display_name||"匿名")}}},[t._v(t._s(t.data.display_name||"匿名"))]),t._v(" "),n("span",{staticClass:"u-uid",on:{click:function(n){return t.copyData(t.data.ID||0)}}},[t._v("(UID : "+t._s(t.data.ID||0)+")")])]),n("div",{staticClass:"u-tips"},[n("el-tooltip",{attrs:{content:"当前经验 ".concat(t.data.experience||0),placement:"top"}},[n("span",{staticClass:"u-level",class:"lv-"+t.level,style:{backgroundColor:t.showLevelColor(t.level)}},[t._v("Lv."+t._s(t.level))])]),t.isPRO||t.isVIP?n("el-tooltip",{attrs:{content:t.vipTypeTitle,placement:"top"}},[n("span",{staticClass:"u-vip",attrs:{target:"_blank"}},[n("i",{staticClass:"u-icon vip"},[t._v(t._s(t.vipType))])])]):t._e(),t.isSuperAuthor?n("el-tooltip",{attrs:{content:"签约作者",placement:"top"}},[n("span",{staticClass:"u-superauthor"},[n("i",{staticClass:"u-icon superauthor"},[t._v("签约作者")])])]):t._e()],1),t.isSelect.isCustomize?t._e():n("div",{staticClass:"u-honor",style:{backgroundImage:"url(".concat(t.imgUrl(t.isSelect),")")}},[n("span",{style:{color:t.isSelect.color}},[t._v(t._s(t.isSelect.name))])])])],1)]),n("div",{staticClass:"m-honor-right"},[n("div",{staticClass:"u-honor-list"},[n("div",{staticClass:"u-title"},[n("span",{staticClass:"u-name"},[n("i",{staticClass:"el-icon-collection-tag"}),t._v("称号")]),n("a",{staticClass:"u-buy",attrs:{href:"/vip/mall?category=virtual&sub_category=honor",target:"_blank"}},[n("i",{staticClass:"el-icon-shopping-cart-2"}),t._v(" 前往获取")])]),n("div",{staticClass:"u-honor-item"},t._l(t.honorList,(function(e,a){return n("div",{key:a,staticClass:"u-picbox"},[n("el-tooltip",{attrs:{effect:"dark",placement:"top","open-delay":200}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.name))]),n("div",{staticClass:"u-pic",class:t.setClass(e),on:{click:function(n){return t.selectChange(e)}}},[e.isCustomize?n("div",{staticClass:"u-noHonor"}):n("el-image",{attrs:{src:t.imgUrl(e),fit:"contain"}})],1)])],1)})),0)])])]),n("div",{staticClass:"m-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认")]),n("el-button",{on:{click:t.reset}},[t._v("重置")])],1)])},i=[],o=e("5530"),s=(e("99af"),e("4de4"),e("7db0"),e("d81d"),e("4e82"),e("e9f5"),e("910d"),e("f665"),e("7d54"),e("ab43"),e("a9e3"),e("d3b7"),e("ac1f"),e("466d"),e("5319"),e("159b"),e("48c0")),c=e("5c97"),r=e("c9d2"),u=e("b490"),l=e("65c2"),d=e("f6be"),f=e("2ef0"),m={name:"honor",props:[],data:function(){return{tabList:c["e"],isVIP:!1,info:{uid:r["a"].getInfo().uid,name:"匿名",user_avatar:"".concat(l["__imgPath"],"/image/common/avatar.png"),user_avatar_frame:"default",bio:"-",sign:0},isSelect:{},honorList:[],list:[],isSelectBak:{}}},computed:{uid:function(){return r["a"].getInfo().uid},data:function(){return this.info},avatar:function(){return this.data.user_avatar||""},avatar_frame:function(){return this.data.user_avatar_frame||""},isPRO:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.is_pro},isSuperAuthor:function(){var t;return!(null===(t=this.data)||void 0===t||!t.sign)},vipType:function(){return this.isPRO?"PRO":"PRE"},vipTypeTitle:function(){return this.isPRO?"专业版会员用户":"高级版会员用户"},level:function(){var t;return r["a"].getLevel((null===(t=this.data)||void 0===t?void 0:t.experience)||0)}},methods:{imgUrl:function(t){return l["__cdn"]+"design/decoration/honor/".concat(t.img,"/").concat(t.img,".").concat(t.img_ext)},setClass:function(t){return t.isHave?t.using?"select":void 0:"noHave"},avatarSize:function(){var t=document.body.clientWidth||document.documentElement.clientWidth;return t>500?"m":"s"},loadUserInfo:function(){var t=this;Object(u["b"])().then((function(n){n.data.data&&(t.info=n.data.data)}))},disposeHonor:function(t){var n=t||{},e=(null===t||void 0===t?void 0:t.honor)||{},a=e.only,i=e.prefix,o=e.prefix.match(/(?<=\{)(.+?)(?=\})/g),s=e.ranking,c=e.year||"";if(a?c=i:o?n&&(c+=(null===t||void 0===t?void 0:t[o[0]])||""):c+=i,(null===s||void 0===s?void 0:s.length)>0&&n){n.imgIndex=0;for(var r=0;r<s.length;r++)if(void 0!=(null===t||void 0===t?void 0:t.ranking)&&Object(f["inRange"])(Number(null===t||void 0===t?void 0:t.ranking),s[r][0],s[r][1])){n.imgIndex=r;var u=s[r][2],l=u.match(/(?<=\{)(.+?)(?=\})/g);c+=l?u.replace(/\{([^{}]+?)\}/g,(function(e,a){return n[a]||t[a]||""})):u;break}}return c+e.suffix},loadHonor:function(){var t=this;Object(d["e"])({per:40}).then((function(n){t.honorList=n.data.data.list,t.loadDecoration()}))},loadDecoration:function(){var t=this;Object(d["g"])(this.uid).then((function(n){var e,a=n||[];t.honorList=t.honorList.map((function(n){var e=null===a||void 0===a?void 0:a.find((function(t){return t.honor_id==n.id}));e&&(n.isHave=!0);var i=null===a||void 0===a?void 0:a.find((function(t){return t.honor_id==n.id&&1==t.using}));return i&&(n.using=1),n.name=t.disposeHonor(Object(o["a"])(Object(o["a"])({},e),{},{honor:n})),n}));var i=null===(e=t.honorList)||void 0===e?void 0:e.find((function(t){return 1==t.using})),s={type:"honor_customize",img:"不佩戴称号",name:"取消佩戴称号",using:i?0:1,isHave:!0,isCustomize:!0};t.isSelect=i||s,t.honorList.unshift(s),t.honorList=t.sortData(t.honorList),t.list=Object(f["cloneDeep"])(t.honorList),t.isSelectBak=Object(f["cloneDeep"])(t.isSelect)}))},selectChange:function(t){t.isHave&&(this.honorList.forEach((function(t){t.using=0})),t.using=1,this.isSelect=t)},reset:function(){this.$set(this,"honorList",Object(f["cloneDeep"])(this.list)),this.$set(this,"isSelect",Object(f["cloneDeep"])(this.isSelectBak))},sortData:function(t){var n=t.filter((function(t){return t.isHave})).sort((function(t,n){return t.honor_id-n.honor_id})),e=t.filter((function(t){return!t.isHave})).sort((function(t,n){return t.honor_id-n.honor_id}));return n.concat(e)},showLevelColor:function(t){return l["__userLevelColor"][t]},submit:function(){var t,n=this,e=null===(t=this.honorList)||void 0===t?void 0:t.find((function(t){return 1==t.using}));null!==e&&void 0!==e&&e.id?Object(d["k"])(e.id).then((function(t){n.$message({message:"称号更新成功",type:"success"})})):Object(d["a"])().then((function(t){n.$message({message:"称号更新成功",type:"success"})}))}},mounted:function(){this.loadUserInfo(),this.loadHonor()},components:{uc:s["a"]}},p=m,h=(e("b10e"),e("2877")),v=Object(h["a"])(p,a,i,!1,null,null,null);n["default"]=v.exports},"77a2":function(t,n,e){},b10e:function(t,n,e){"use strict";e("77a2")},c944:function(t,n,e){"use strict";e.d(n,"d",(function(){return i})),e.d(n,"f",(function(){return o})),e.d(n,"e",(function(){return s})),e.d(n,"g",(function(){return c})),e.d(n,"b",(function(){return u})),e.d(n,"a",(function(){return l})),e.d(n,"c",(function(){return r}));var a=e("41cb");function i(t){return Object(a["$next"])().get("/api/next2/userdata/messages",{params:t})}function o(t){return Object(a["$next"])().put("/api/next2/userdata/messages/read/".concat(t))}function s(){return Object(a["$next"])().put("/api/next2/userdata/messages/read")}function c(t){return Object(a["$next"])().delete("/api/next2/userdata/messages/".concat(t))}function r(){return Object(a["$next"])({mute:!0}).get("/api/next2/userdata/messages/unread_total")}function u(){return Object(a["$next"])({mute:!0}).get("/api/letter/unread/count")}function l(t){return Object(a["$next"])().get("/api/next2/comment/item/".concat(t))}},dc6f:function(t,n,e){"use strict";e("39dd")},f6be:function(t,n,e){"use strict";e.d(n,"b",(function(){return c})),e.d(n,"j",(function(){return r})),e.d(n,"c",(function(){return u})),e.d(n,"d",(function(){return l})),e.d(n,"i",(function(){return d})),e.d(n,"m",(function(){return f})),e.d(n,"e",(function(){return m})),e.d(n,"g",(function(){return p})),e.d(n,"k",(function(){return h})),e.d(n,"a",(function(){return v})),e.d(n,"h",(function(){return b})),e.d(n,"f",(function(){return g})),e.d(n,"l",(function(){return _}));e("99af");var a=e("41cb"),i=e("bc3a"),o=e.n(i),s=e("65c2");function c(t){return Object(a["$cms"])().get("/api/cms/user/decoration",{params:t})}function r(t){return Object(a["$cms"])().post("/api/cms/user/decoration",t)}function u(){var t=s["__cdn"]+"design/decoration/index.json?".concat(Date.now());return o.a.get(t)}function l(){return o.a.get("".concat(s["__dataPath"],"emotion/output/catalog.json?").concat(Date.now()))}function d(t,n){return Object(a["$cms"])().post("/api/cms/user/decoration/check-suit/".concat(t,"/").concat(n,"/for/avatar"))}function f(t){return Object(a["$cms"])().put("/api/cms/user/my/avatar-frame",t)}function m(t){return Object(a["$cms"])().get("/api/cms/user/config/honor",{params:t})}function p(t){return Object(a["$next"])({mute:!0}).get("/api/next2/user/"+t+"/honors").then((function(t){return t.data.data}))}function h(t){return Object(a["$cms"])().put("/api/cms/user/honor/use/".concat(t))}function v(){return Object(a["$cms"])().delete("/api/cms/user/honor/use")}function b(t,n){return Object(a["$next"])({mute:!0}).get("/api/next2/user/"+t+"/medals",{params:n})}function g(t){return Object(a["$cms"])().get("/api/cms/config/medal",{params:t})}function _(t,n,e){return Object(a["$next"])().put("/api/next2/user/".concat(t,"/medals/").concat(n,"/wear/").concat(e))}}}]);