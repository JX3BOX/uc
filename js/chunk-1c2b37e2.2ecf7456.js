(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c2b37e2"],{1249:function(t,n,e){"use strict";e.r(n);e("b0c0");var a=function(){var t=this,n=t._self._c;return n("uc",{staticClass:"m-dashboard-connect"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-profile-connect"},[n("el-alert",{staticClass:"u-tip",attrs:{title:"通过第三方账号快速登录，如需解绑则需要先绑定一个邮箱",type:"warning","show-icon":""}}),n("div",{staticClass:"m-dashboard-content-list"},[t._l(t.oauth,(function(e){return n("div",{key:e,staticClass:"m-item"},[n("span",{staticClass:"u-profile-item"},[n("img",{class:"u-"+e,attrs:{"svg-inline":"",src:t.icon(e)}}),n("span",{staticClass:"u-status"},[t._v(" "+t._s(t.types[e].name)+" ")])]),t.checkStatus(t.types[e].idKey)?n("el-button",{attrs:{size:"large",type:"danger"},on:{click:function(n){return t.unbind(t.types[e].uuid)}}},[n("span",{staticClass:"u-status"},[t._v(" 解除绑定 ")])]):n("el-button",{attrs:{type:"primary",size:"large"},on:{click:function(n){return t.bind(t.types[e].uuid)}}},[t._v(" 立即绑定 ")])],1)})),n("qqbot",{attrs:{data:t.data},on:{refresh:t.loadAuth}})],2)],1),n("el-dialog",{attrs:{visible:t.showMiniProgram,title:"绑定微信小程序",width:t.isPhone?"95%":"400px","custom-class":"m-qrcode-dialog","show-close":!1},on:{"update:visible":function(n){t.showMiniProgram=n}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("el-button",{attrs:{type:"primary"},on:{click:t.ihadBind}},[t._v("我已绑定")])]},proxy:!0}])},[n("div",{staticClass:"m-qr-content"},[n("img",{staticClass:"u-login-qrcode",attrs:{src:e("7a95"),alt:""}}),n("i",{staticClass:"u-tip"},[t._v("打开微信扫一扫，绑定小程序")]),n("small",{staticClass:"u-tip-small"},[t._v("绑定之后需要重新登陆方可生效")])])])],1)},i=[],c=(e("99af"),e("7db0"),e("caad"),e("e9f5"),e("f665"),e("4fadc"),e("d3b7"),e("2532"),e("48c0")),o=e("01ea"),s=e("2d46"),u=e("41cb");function r(t,n){return Object(u["$cms"])().delete("/api/cms/user/union/".concat(t,"/unbind"),{params:n})}var l=function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-qqbot m-item"},[n("span",{staticClass:"u-profile-item"},[n("img",{staticClass:"u-qqbot",attrs:{"svg-inline":"",src:t.icon("qqbot")}}),n("span",{staticClass:"u-status"},[t._v(" QQ机器人 ")])]),t.checkStatus?n("el-button",{attrs:{size:"large",type:"danger"},on:{click:t.unbind}},[n("span",{staticClass:"u-status"},[t._v(" 解除绑定 ")])]):n("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.bind}},[t._v(" 立即绑定 ")]),n("el-dialog",{staticClass:"m-qqbot-dialog",attrs:{width:t.isPhone?"95%":"",align:"center",title:"绑定魔盒QQ机器人",visible:t.showDialog},on:{"update:visible":function(n){t.showDialog=n}}},[n("div",{staticClass:"m-qqbot-content"},[n("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.bindText,expression:"bindText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"u-token",attrs:{title:"点击复制"}},[n("i",{staticClass:"el-icon-document-copy"}),t._v(" "+t._s(t.bindText)+" ")])]),n("div",{staticClass:"m-custom-tip"},[t._v(" 请复制以上内容，私聊发送给魔盒QQ机器人"),n("br"),t._v(" QQ: "),n("b",[t._v(t._s(t.qq))])])])],1)},d=[],m={name:"qqbot",props:{data:{type:Object,default:function(){}}},data:function(){return{showDialog:!1,token:"",qq:"3889010020",isPhone:window.innerWidth<768}},computed:{checkStatus:function(){return this.data.qqbot},bindText:function(){return"绑定账号 ".concat(this.token)}},methods:{icon:function(t){return o["e"]+"design/user/qqbot.png"},bind:function(){var t=this;Object(s["f"])().then((function(n){t.token=n.data.data.token,t.showDialog=!0}))},unbind:function(){var t=this;this.$confirm("确定要解绑【魔盒QQ机器人】吗？","解绑",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["m"])().then((function(n){t.$message({type:"success",message:"解绑成功"}),t.$emit("refresh")}))})).catch((function(){}))},onCopy:function(t){this.$notify({title:"复制成功",message:t.text,type:"success"})},onError:function(){this.$notify.error({title:"复制失败",message:"请手动复制"})}}},f=m,p=(e("e91e"),e("2877")),b=Object(p["a"])(f,l,d,!1,null,null,null),h=b.exports,g=location.href.includes("origin")?"origin":"std",v=o["g"],w={qq:{icon:"qq",name:"QQ",uuid:"qqsite",idKey:"qq_openid"},weibo:{icon:"weibo",name:"微博",uuid:"weibosite",idKey:"weibo_id"},wechat:{icon:"wechat",name:"微信",uuid:"wesite",idKey:"wechat_openid"},wechat_miniprogram:{icon:"app",name:"微信小程序",uuid:"wechat_miniprogram",idKey:"wechat_miniprogram_openid"}},_={name:"connect",props:[],data:function(){return{data:{github_name:"",github_id:"",weibo_name:"",weibo_id:"",qq_name:"",qq_unionid:"",wechat_name:"",wechat_unionid:"",wechat_miniprogram_openid:"",user_email:""},oauth:["qq","weibo","wechat","wechat_miniprogram"],types:w,showMiniProgram:!1,isPhone:window.innerWidth<768,loading:!1}},computed:{},methods:{checkStatus:function(t){return this.data[t]},getNickname:function(t){return this.data[t+"_name"]||"已绑定"},bind:function(t){"wechat_miniprogram"!=t?location.href=this.getAuthUrl(t):this.showMiniProgram=!0},unbind:function(t){var n=this;if(this.data.user_email)if("wechat_miniprogram"==t){var e=Object.entries(w).find((function(n){return n[1].uuid==t}))[0],a=w[e].name;this.$confirm("确定要解绑【".concat(a,"】吗？"),"解绑",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["l"])(t).then((function(t){n.$message({message:"解绑成功",type:"success"}),n.loadAuth()}))})).catch((function(){}))}else this.unbindApp(t);else this.$alert("当前账号未验证邮箱，无法解除绑定","提示",{confirmButtonText:"确定",type:"warning"}).catch((function(){}))},icon:function(t){return o["e"]+"design/user/"+w[t]["icon"]+".png"},loadAuth:function(){var t=this;this.loading=!0,Object(s["b"])().then((function(n){t.data=n.data.data})).finally((function(){t.loading=!1}))},ihadBind:function(){this.showMiniProgram=!1,this.loadAuth()},getAuthUrl:function(t){return v+"api/cms/user/union/".concat(t,"/bind?client=").concat(g)},unbindApp:function(t){var n=this,e={wesite:"如果取消则无法再通过微信扫一扫登录",qqsite:"如果取消则无法再通过QQ登录",weibosite:"如果取消则无法再通过微博登录"}[t];this.$confirm(e,"确定取消绑定吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r(t).then((function(t){n.$message({message:"解绑成功",type:"success"}),n.loadAuth()}))})).catch((function(){}))}},mounted:function(){this.loadAuth()},components:{uc:c["a"],qqbot:h}},y=_,q=(e("c8bb"),Object(p["a"])(y,a,i,!1,null,null,null));n["default"]=q.exports},"2d46":function(t,n,e){"use strict";e.d(n,"q",(function(){return u})),e.d(n,"e",(function(){return s})),e.d(n,"o",(function(){return r})),e.d(n,"p",(function(){return f})),e.d(n,"k",(function(){return h})),e.d(n,"a",(function(){return p})),e.d(n,"i",(function(){return b})),e.d(n,"l",(function(){return v})),e.d(n,"b",(function(){return g})),e.d(n,"r",(function(){return l})),e.d(n,"d",(function(){return d})),e.d(n,"g",(function(){return m})),e.d(n,"h",(function(){return y})),e.d(n,"n",(function(){return q})),e.d(n,"j",(function(){return x})),e.d(n,"s",(function(){return j})),e.d(n,"c",(function(){return C})),e.d(n,"f",(function(){return w})),e.d(n,"m",(function(){return _}));var a=e("41cb"),i=e("bc3a"),c=e.n(i),o=e("01ea");function s(){return Object(a["$cms"])().get("/api/cms/user/my/profile")}function u(t){return Object(a["$cms"])().put("/api/cms/user/my/profile",t)}function r(t){return Object(a["$cms"])().put("/api/cms/user/my/avatar",t)}function l(t){return Object(a["$cms"])().post("/api/cms/upload/avatar",t)}function d(){var t=o["k"]+"avatar/index.json";return c.a.get(t)}function m(t){return Object(a["$cms"])().get("/api/cms/user/".concat(t,"/info"),{params:{__no_cache:1}})}function f(t){return Object(a["$cms"])().put("/api/cms/user/my/password",t)}function p(t){return Object(a["$cms"])().get("/api/cms/user/account/email/valid",{params:{email:t}})}function b(t){return Object(a["$cms"])().post("/api/cms/user/account/email/bind",t)}function h(t){return Object(a["$cms"])().put("/api/cms/user/account/email/verify",{code:t},{app:"jx3box"})}function g(){return Object(a["$cms"])().get("/api/cms/account/oauth/status")}function v(t){return Object(a["$cms"])({popType:"alert"}).delete("/api/cms/account/oauth/unbind/".concat(t))}function w(){return Object(a["$next"])().get("/api/next2/qqbot/bind-token")}function _(){return Object(a["$next"])().delete("/api/next2/qqbot/bind-token")}function y(){return Object(a["$cms"])().get("/api/cms/wechat/mp/bind")}function q(){return Object(a["$cms"])().get("/api/cms/wechat/mp/unbind")}function x(t){return Object(a["$cms"])().post("/api/cms/account/oauth/phone/bind",t,{app:"jx3box"})}function j(t){return Object(a["$cms"])().put("/api/cms/account/oauth/phone/verify",t,{app:"jx3box"})}function C(t){return Object(a["$cms"])().get("/api/cms/account/oauth/phone/check",{params:t})}},"39dd":function(t,n,e){},"48c0":function(t,n,e){"use strict";var a=function(){var t=this,n=t._self._c;return n("div",{staticClass:"m-dashboard-profile m-profile"},[n("h2",{staticClass:"u-title"},[n("i",{class:t.icon}),t._v(" "+t._s(t.title)+" "),t._t("header")],2),n("tabs",{attrs:{tabs:t.tabList,"msg-change-count":t.msgChangeCount}}),t._t("default")],2)},i=[],c=(e("a9e3"),e("b0c0"),function(){var t=this,n=t._self._c;return n("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":t.changeTab},model:{value:t.active,callback:function(n){t.active=n},expression:"active"}},t._l(t.tabs,(function(e){return n("el-tab-pane",{key:e.name,attrs:{name:e.name}},[n("span",{attrs:{slot:"label"},slot:"label"},[n("i",{staticClass:"u-tab-icon",class:e.icon}),t._v(" "+t._s(e.label)+" "),t.showCount?n("span",{staticClass:"u-count",class:t.count[t.countMap[e.name]]?"is-orange":""},[t._v("("+t._s(t.count[t.countMap[e.name]]||0)+")")]):t._e()])])})),1)}),o=[],s=(e("caad"),e("14d9"),e("c944")),u={name:"",props:{tabs:{type:Array,default:function(){return[]}},msgChangeCount:{type:Number,default:0}},data:function(){return{active:"",countMap:{msg:"message",letter:"letter"},count:{message:0,letter:0}}},watch:{$route:function(){this.active=this.routeName},msgChangeCount:{immediate:!0,handler:function(t){t>0&&(this.count.message=0),t<0&&this.count.message>0&&(this.count.message+=t)}}},computed:{showCount:function(){return["msg","letter"].includes(this.routeName)},routeName:function(){return this.$route.name}},methods:{changeTab:function(){this.$router.push({name:this.active})},loadCount:function(){var t=this;Object(s["b"])().then((function(n){var e,a=(null===(e=n.data)||void 0===e?void 0:e.data)||{};t.count.letter=a.letter||0})),Object(s["c"])().then((function(n){var e;t.count.message=(null===(e=n.data.data)||void 0===e?void 0:e.unread_count)||0}))}},mounted:function(){this.active=this.routeName,this.showCount&&this.loadCount()},components:{}},r=u,l=e("2877"),d=Object(l["a"])(r,c,o,!1,null,null,null),m=d.exports,f=e("5c97"),p={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return f["d"]}},msgChangeCount:{type:Number,default:0}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:m}},b=p,h=(e("dc6f"),Object(l["a"])(b,a,i,!1,null,null,null));n["a"]=h.exports},"4fadc":function(t,n,e){"use strict";var a=e("23e7"),i=e("6f53").entries;a({target:"Object",stat:!0},{entries:function(t){return i(t)}})},"591f":function(t,n,e){},"5c97":function(t){t.exports=JSON.parse('{"e":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"medal","icon":"el-icon-medal","label":"勋章"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"}],"d":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"notice","icon":"el-icon-message","label":"通知中心"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"},{"name":"auth","icon":"el-icon-s-check","label":"账号认证"}],"b":[{"name":"mall","icon":"el-icon-shopping-bag-1","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-2","label":"系统订单"}],"c":[{"name":"msg","icon":"el-icon-message","label":"通知"},{"name":"letter","icon":"el-icon-chat-dot-square","label":"私信"}],"a":[{"name":"certification","icon":"el-icon-medal","label":"电子证书"},{"name":"holidayCard","icon":"el-icon-sugar","label":"节日贺卡"},{"name":"birthdayCard","icon":"el-icon-present","label":"生日贺卡"}]}')},"6f53":function(t,n,e){"use strict";var a=e("83ab"),i=e("d039"),c=e("e330"),o=e("e163"),s=e("df75"),u=e("fc6a"),r=e("d1e7").f,l=c(r),d=c([].push),m=a&&i((function(){var t=Object.create(null);return t[2]=2,!l(t,2)})),f=function(t){return function(n){var e,i=u(n),c=s(i),r=m&&null===o(i),f=c.length,p=0,b=[];while(f>p)e=c[p++],a&&!(r?e in i:l(i,e))||d(b,t?[e,i[e]]:i[e]);return b}};t.exports={entries:f(!0),values:f(!1)}},"7a95":function(t,n,e){t.exports=e.p+"img/loginqrcode.af2b3174.jpg"},c8bb:function(t,n,e){"use strict";e("e2d6")},c944:function(t,n,e){"use strict";e.d(n,"d",(function(){return i})),e.d(n,"f",(function(){return c})),e.d(n,"e",(function(){return o})),e.d(n,"g",(function(){return s})),e.d(n,"b",(function(){return r})),e.d(n,"a",(function(){return l})),e.d(n,"c",(function(){return u}));var a=e("41cb");function i(t){return Object(a["$next"])().get("/api/next2/userdata/messages",{params:t})}function c(t){return Object(a["$next"])().put("/api/next2/userdata/messages/read/".concat(t))}function o(){return Object(a["$next"])().put("/api/next2/userdata/messages/read")}function s(t){return Object(a["$next"])().delete("/api/next2/userdata/messages/".concat(t))}function u(){return Object(a["$next"])({mute:!0}).get("/api/next2/userdata/messages/unread_total")}function r(){return Object(a["$next"])({mute:!0}).get("/api/letter/unread/count")}function l(t){return Object(a["$next"])().get("/api/next2/comment/item/".concat(t))}},dc6f:function(t,n,e){"use strict";e("39dd")},e2d6:function(t,n,e){},e91e:function(t,n,e){"use strict";e("591f")}}]);