(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b129d2d2"],{"2d46":function(t,e,n){"use strict";n.d(e,"o",(function(){return s})),n.d(e,"e",(function(){return r})),n.d(e,"m",(function(){return u})),n.d(e,"n",(function(){return f})),n.d(e,"j",(function(){return h})),n.d(e,"a",(function(){return p})),n.d(e,"h",(function(){return b})),n.d(e,"k",(function(){return g})),n.d(e,"b",(function(){return v})),n.d(e,"p",(function(){return l})),n.d(e,"d",(function(){return m})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return _})),n.d(e,"l",(function(){return y})),n.d(e,"i",(function(){return x})),n.d(e,"q",(function(){return C})),n.d(e,"c",(function(){return j}));var a=n("41cb"),c=n("bc3a"),o=n.n(c),i=n("65c2");function r(){return Object(a["$cms"])().get("/api/cms/user/my/profile")}function s(t){return Object(a["$cms"])().put("/api/cms/user/my/profile",t)}function u(t){return Object(a["$cms"])().put("/api/cms/user/my/avatar",t)}function l(t){return Object(a["$cms"])().post("/api/cms/upload/avatar",t)}function m(){var t=i["__imgPath"]+"avatar/index.json";return o.a.get(t)}function d(t){return Object(a["$cms"])().get("/api/cms/user/".concat(t,"/info"),{params:{__no_cache:1}})}function f(t){return Object(a["$cms"])().put("/api/cms/user/my/password",t)}function p(t){return Object(a["$cms"])().get("/api/cms/user/account/email/valid",{params:{email:t}})}function b(t){return Object(a["$cms"])().post("/api/cms/user/account/email/bind",t)}function h(t){return Object(a["$cms"])().put("/api/cms/user/account/email/verify",{code:t},{app:"jx3box"})}function v(){return Object(a["$cms"])().get("/api/cms/account/oauth/status")}function g(t){return Object(a["$cms"])({popType:"alert"}).delete("/api/cms/account/oauth/unbind/".concat(t))}function _(){return Object(a["$cms"])().get("/api/cms/wechat/mp/bind")}function y(){return Object(a["$cms"])().get("/api/cms/wechat/mp/unbind")}function x(t){return Object(a["$cms"])().post("/api/cms/account/oauth/phone/bind",t,{app:"jx3box"})}function C(t){return Object(a["$cms"])().put("/api/cms/account/oauth/phone/verify",t,{app:"jx3box"})}function j(t){return Object(a["$cms"])().get("/api/cms/account/oauth/phone/check",{params:t})}},"39dd":function(t,e,n){},"3f14":function(t,e,n){},"48c0":function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-dashboard-profile m-profile"},[e("h2",{staticClass:"u-title"},[e("i",{class:t.icon}),t._v(" "+t._s(t.title)+" "),t._t("header")],2),e("tabs",{attrs:{tabs:t.tabList,"msg-change-count":t.msgChangeCount}}),t._t("default")],2)},c=[],o=(n("a9e3"),n("b0c0"),function(){var t=this,e=t._self._c;return e("el-tabs",{staticClass:"m-dashboard-tabs",on:{"tab-click":t.changeTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabs,(function(n){return e("el-tab-pane",{key:n.name,attrs:{name:n.name}},[e("span",{attrs:{slot:"label"},slot:"label"},[e("i",{staticClass:"u-tab-icon",class:n.icon}),t._v(" "+t._s(n.label)+" "),t.showCount?e("span",{staticClass:"u-count",class:t.count[t.countMap[n.name]]?"is-orange":""},[t._v("("+t._s(t.count[t.countMap[n.name]]||0)+")")]):t._e()])])})),1)}),i=[],r=(n("caad"),n("14d9"),n("c944")),s={name:"",props:{tabs:{type:Array,default:function(){return[]}},msgChangeCount:{type:Number,default:0}},data:function(){return{active:"",countMap:{msg:"message",letter:"letter"},count:{message:0,letter:0}}},watch:{$route:function(){this.active=this.routeName},msgChangeCount:{immediate:!0,handler:function(t){t>0&&(this.count.message=0),t<0&&this.count.message>0&&(this.count.message+=t)}}},computed:{showCount:function(){return["msg","letter"].includes(this.routeName)},routeName:function(){return this.$route.name}},methods:{changeTab:function(){this.$router.push({name:this.active})},loadCount:function(){var t=this;Object(r["b"])().then((function(e){var n,a=(null===(n=e.data)||void 0===n?void 0:n.data)||{};t.count.letter=a.letter||0})),Object(r["c"])().then((function(e){var n;t.count.message=(null===(n=e.data.data)||void 0===n?void 0:n.unread_count)||0}))}},mounted:function(){this.active=this.routeName,this.showCount&&this.loadCount()},components:{}},u=s,l=n("2877"),m=Object(l["a"])(u,o,i,!1,null,null,null),d=m.exports,f=n("5c97"),p={name:"uc",props:{icon:{type:String,default:"el-icon-user"},title:{type:String,default:"我的资料"},tabList:{type:Array,default:function(){return f["d"]}},msgChangeCount:{type:Number,default:0}},data:function(){return{}},computed:{},methods:{},mounted:function(){},components:{tabs:d}},b=p,h=(n("dc6f"),Object(l["a"])(b,a,c,!1,null,null,null));e["a"]=h.exports},"5b5f":function(t,e,n){"use strict";n("3f14")},"5c97":function(t){t.exports=JSON.parse('{"e":[{"name":"frame","icon":"el-icon-camera","label":"头像框"},{"name":"theme","icon":"el-icon-orange","label":"主题风格"},{"name":"honor","icon":"el-icon-collection-tag","label":"称号"},{"name":"medal","icon":"el-icon-medal","label":"勋章"},{"name":"emotion","icon":"el-icon-picture-outline-round","label":"表情包"}],"d":[{"name":"profile","icon":"el-icon-user","label":"基本资料"},{"name":"avatar","icon":"el-icon-camera","label":"修改头像"},{"name":"pwd","icon":"el-icon-lock","label":"修改密码"},{"name":"notice","icon":"el-icon-message","label":"通知中心"},{"name":"connect","icon":"el-icon-connection","label":"绑定账号"},{"name":"address","icon":"el-icon-map-location","label":"地址管理"},{"name":"auth","icon":"el-icon-s-check","label":"账号认证"}],"b":[{"name":"mall","icon":"el-icon-shopping-bag-1","label":"商城订单"},{"name":"orders","icon":"el-icon-shopping-bag-2","label":"系统订单"}],"c":[{"name":"msg","icon":"el-icon-message","label":"通知"},{"name":"letter","icon":"el-icon-chat-dot-square","label":"私信"}],"a":[{"name":"certification","icon":"el-icon-medal","label":"电子证书"},{"name":"holidayCard","icon":"el-icon-sugar","label":"节日贺卡"},{"name":"birthdayCard","icon":"el-icon-present","label":"生日贺卡"}]}')},9756:function(t){t.exports=JSON.parse('["缘起稻香","天宝盛世","剑啸江湖","蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","眉间雪","有人赴约","万象长安","山海相逢","青梅煮酒","共結來緣","傲血戰意","巔峰再起","江海雲夢"]')},bde8:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("uc",[e("el-form",{ref:"form",staticClass:"m-profile-basic",attrs:{"label-width":"100px","label-position":t.position}},[e("el-form-item",{staticClass:"u-name",attrs:{label:"昵称"}},[e("div",{staticClass:"u-value"},[t._v(" "+t._s(t.nickname)+" "),e("a",{staticClass:"u-edit el-button el-button--primary el-button--mini",attrs:{href:"/vip/rename?from=dashboard_profile",target:"_blank"}},[e("i",{staticClass:"el-icon-edit"}),t._v(" 修改昵称 ")])])]),e("el-form-item",{staticClass:"u-name",attrs:{label:"服务器"}},[e("el-select",{staticClass:"u-server",attrs:{filterable:"",placeholder:"请输入服务器"},model:{value:t.form.jx3_server,callback:function(e){t.$set(t.form,"jx3_server",e)},expression:"form.jx3_server"}},t._l(t.servers,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1),e("span",{staticClass:"u-server-tip"},[e("i",{staticClass:"el-icon-question"}),t._v(" 部分应用将使用此服务器作为默认服务器 ")])],1),e("el-form-item",{staticClass:"u-name"},[e("div",{attrs:{slot:"label"},slot:"label"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"此项不会被公开,仅用于赛事联系或其它确认",placement:"left"}},[e("div",[e("i",{staticClass:"el-icon-lock"}),t._v(" QQ ")])])],1),e("el-input",{attrs:{placeholder:"请输入QQ号码"},model:{value:t.form.qq_number,callback:function(e){t.$set(t.form,"qq_number",e)},expression:"form.qq_number"}})],1),e("el-form-item",{staticClass:"u-birthday"},[e("div",{attrs:{slot:"label"},slot:"label"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"此项不会被公开,仅用于礼品发放",placement:"left"}},[e("div",[e("i",{staticClass:"el-icon-lock"}),t._v(" 生日 ")])])],1),e("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",placement:"bottom-start","picker-options":t.birthday_options},model:{value:t.form.birthday,callback:function(e){t.$set(t.form,"birthday",e)},expression:"form.birthday"}})],1),e("el-form-item",{staticClass:"u-name",attrs:{label:"签名"}},[e("el-input",{attrs:{type:"textarea",rows:4,maxlength:"80",placeholder:"签名内容","show-word-limit":""},model:{value:t.form.user_bio,callback:function(e){t.$set(t.form,"user_bio",e)},expression:"form.user_bio"}})],1),e("el-form-item",{staticClass:"u-tv",attrs:{label:"直播间"}},[e("el-row",[e("el-col",{attrs:{span:4}},[e("div",{staticClass:"u-tv-type"},[e("el-select",{attrs:{placeholder:"请选择平台"},model:{value:t.form.tv_type,callback:function(e){t.$set(t.form,"tv_type",e)},expression:"form.tv_type"}},t._l(t.tvmap,(function(t,n){return e("el-option",{key:n,attrs:{label:t,value:n}})})),1)],1)]),e("el-col",{attrs:{span:20}},[e("div",{staticClass:"u-tv-id",staticStyle:{"margin-left":"10px"}},[e("el-input",{attrs:{placeholder:"请输入直播间房间号"},model:{value:t.form.tv_id,callback:function(e){t.$set(t.form,"tv_id",e)},expression:"form.tv_id"}})],1)])],1)],1),e("el-form-item",{staticClass:"u-btns",attrs:{label:""}},[e("el-button",{staticClass:"u-submit",attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)],1)},c=[],o=(n("b0c0"),n("48c0")),i=n("c9d2"),r=n("2d46"),s=n("9756"),u=n("cf66d"),l={name:"profile",props:[],data:function(){return{nickname:i["a"].getInfo().name,servers:s,form:{jx3_server:"",user_bio:"",qq_number:"",phone:"",address:"",tv_id:"",tv_type:"",tuilan_id:"",birthday:""},position:window.innerWidth<768?"top":"left",tvmap:u,birthday_options:{disabledDate:function(t){return t.getTime()>Date.now()}}}},computed:{},methods:{submit:function(){var t=this;Object(r["o"])(this.form).then((function(e){t.$message({message:"资料修改成功",type:"success"})}))},getProfile:function(){var t=this;Object(r["e"])().then((function(e){var n=e.data.data,a=new Date(n.birthday);n.birthday=a,t.form=n}))}},mounted:function(){this.getProfile()},components:{uc:o["a"]}},m=l,d=(n("5b5f"),n("2877")),f=Object(d["a"])(m,a,c,!1,null,null,null);e["default"]=f.exports},c944:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return i})),n.d(e,"g",(function(){return r})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return s}));var a=n("41cb");function c(t){return Object(a["$next"])().get("/api/next2/userdata/messages",{params:t})}function o(t){return Object(a["$next"])().put("/api/next2/userdata/messages/read/".concat(t))}function i(){return Object(a["$next"])().put("/api/next2/userdata/messages/read")}function r(t){return Object(a["$next"])().delete("/api/next2/userdata/messages/".concat(t))}function s(){return Object(a["$next"])({mute:!0}).get("/api/next2/userdata/messages/unread_total")}function u(){return Object(a["$next"])({mute:!0}).get("/api/letter/unread/count")}function l(t){return Object(a["$next"])().get("/api/next2/comment/item/".concat(t))}},cf66d:function(t){t.exports=JSON.parse('{"douyu":"斗鱼","bilibili":"B站","huya":"虎牙"}')},dc6f:function(t,e,n){"use strict";n("39dd")}}]);